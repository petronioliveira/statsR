<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>8&nbsp; Gráficos – Bioestatística Usando o R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./09-probabilidades.html" rel="next">
<link href="./07-tabelas.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-364982630eef5352dd1537128a8ed5cb.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Procurar"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="style.css">
</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./06-medidasResumidoras.html">Parte III - Estatística Descritiva</a></li><li class="breadcrumb-item"><a href="./08-graficos.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Gráficos</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Procurar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Bioestatística Usando o R</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Procurar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prefácio</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte I - Fundamentos</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introdução</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-dados.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Natureza dos Dados</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-producaoDados.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Produção dos Dados</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte II - Ambiente Computacional com R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-introducaoR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Introdução ao uso do R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-manipulandoDados.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Manipulando dados no R</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte III - Estatística Descritiva</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-medidasResumidoras.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Medidas Resumidoras</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-tabelas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Tabelas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-graficos.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Gráficos</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte IV - Probabilidades e Distribuições</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-probabilidades.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Introdução à Teoria das Probabilidades</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-assimetria.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Assimetria e Curtose</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-distAmostrais.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Distribuições Amostrais</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte V - Inferência Estatística</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-estimacao.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Estimação</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-testeHipoteses.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Teste de Hipóteses</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte VI - Testes Paramétricos</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-teste-t.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Comparação entre duas médias</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-anova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Análise de Variância</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-anovaRep.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Anova de Medidas Repetidas</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte VII - Relações entre Variáveis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-correlacao.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Correlação</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-regressao.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Regressão Linear Simples</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte VIII - Métodos Não Paramétricos</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19-dadoscategoricos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Análise de Dados Categóricos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-testes-naoParametricos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Métodos não paramétricos</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte IX - Bioestatística Aplicada à Epidemiologia</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-testesDiag.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Determinação da validade e confiabilidade de testes diagnósticos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-medidasOcorrencia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Medidas de ocorrência de doença</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-sobrevida.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Análise de Sobrevida</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-reglogbin.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Regressão Logística Binária</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./referencias.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Referências</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Índice</h2>
   
  <ul>
  <li><a href="#pacotes-necessários-neste-capítulo" id="toc-pacotes-necessários-neste-capítulo" class="nav-link active" data-scroll-target="#pacotes-necessários-neste-capítulo"><span class="header-section-number">8.1</span> Pacotes necessários neste capítulo</a></li>
  <li><a href="#sec-dados8" id="toc-sec-dados8" class="nav-link" data-scroll-target="#sec-dados8"><span class="header-section-number">8.2</span> Fonte de dados para este capítulo</a></li>
  <li><a href="#sec-ggplot2" id="toc-sec-ggplot2" class="nav-link" data-scroll-target="#sec-ggplot2"><span class="header-section-number">8.3</span> Pacote ggplot2</a>
  <ul class="collapse">
  <li><a href="#sec-grammar" id="toc-sec-grammar" class="nav-link" data-scroll-target="#sec-grammar"><span class="header-section-number">8.3.1</span> Gramática dos Gráficos</a></li>
  <li><a href="#vantagens-do-ggplot2" id="toc-vantagens-do-ggplot2" class="nav-link" data-scroll-target="#vantagens-do-ggplot2"><span class="header-section-number">8.3.2</span> Vantagens do ggplot2</a></li>
  </ul></li>
  <li><a href="#sec-scatter" id="toc-sec-scatter" class="nav-link" data-scroll-target="#sec-scatter"><span class="header-section-number">8.4</span> Gráfico de dispersão</a>
  <ul class="collapse">
  <li><a href="#gráfico-de-dispersão-básico" id="toc-gráfico-de-dispersão-básico" class="nav-link" data-scroll-target="#gráfico-de-dispersão-básico"><span class="header-section-number">8.4.1</span> Gráfico de dispersão básico</a></li>
  <li><a href="#geometria" id="toc-geometria" class="nav-link" data-scroll-target="#geometria"><span class="header-section-number">8.4.2</span> Geometria</a></li>
  <li><a href="#sec-custom" id="toc-sec-custom" class="nav-link" data-scroll-target="#sec-custom"><span class="header-section-number">8.4.3</span> Customização do gráfico de dispersão</a></li>
  <li><a href="#sec-jitter" id="toc-sec-jitter" class="nav-link" data-scroll-target="#sec-jitter"><span class="header-section-number">8.4.4</span> Lidando com a sobreposição dos pontos e os rótulos</a></li>
  <li><a href="#mudando-o-tema" id="toc-mudando-o-tema" class="nav-link" data-scroll-target="#mudando-o-tema"><span class="header-section-number">8.4.5</span> Mudando o tema</a></li>
  <li><a href="#sec-coresr" id="toc-sec-coresr" class="nav-link" data-scroll-target="#sec-coresr"><span class="header-section-number">8.4.6</span> Mudando as cores</a></li>
  <li><a href="#sec-facet" id="toc-sec-facet" class="nav-link" data-scroll-target="#sec-facet"><span class="header-section-number">8.4.7</span> Facetamento</a></li>
  <li><a href="#reta-de-regressão" id="toc-reta-de-regressão" class="nav-link" data-scroll-target="#reta-de-regressão"><span class="header-section-number">8.4.8</span> Reta de Regressão</a></li>
  </ul></li>
  <li><a href="#sec-hist" id="toc-sec-hist" class="nav-link" data-scroll-target="#sec-hist"><span class="header-section-number">8.5</span> Histograma</a></li>
  <li><a href="#sec-bxp" id="toc-sec-bxp" class="nav-link" data-scroll-target="#sec-bxp"><span class="header-section-number">8.6</span> Boxplot</a>
  <ul class="collapse">
  <li><a href="#múltiplos-boxplots" id="toc-múltiplos-boxplots" class="nav-link" data-scroll-target="#múltiplos-boxplots"><span class="header-section-number">8.6.1</span> Múltiplos boxplots</a></li>
  <li><a href="#sec-bxphorizontal" id="toc-sec-bxphorizontal" class="nav-link" data-scroll-target="#sec-bxphorizontal"><span class="header-section-number">8.6.2</span> Boxplots horizontais</a></li>
  </ul></li>
  <li><a href="#sec-violin" id="toc-sec-violin" class="nav-link" data-scroll-target="#sec-violin"><span class="header-section-number">8.7</span> Gráfico de violino</a></li>
  <li><a href="#gráfico-de-barras" id="toc-gráfico-de-barras" class="nav-link" data-scroll-target="#gráfico-de-barras"><span class="header-section-number">8.8</span> Gráfico de barras</a>
  <ul class="collapse">
  <li><a href="#proporção-ou-porcentagem" id="toc-proporção-ou-porcentagem" class="nav-link" data-scroll-target="#proporção-ou-porcentagem"><span class="header-section-number">8.8.1</span> Proporção ou porcentagem</a></li>
  <li><a href="#controle-da-largura-da-barra-com-width" id="toc-controle-da-largura-da-barra-com-width" class="nav-link" data-scroll-target="#controle-da-largura-da-barra-com-width"><span class="header-section-number">8.8.2</span> Controle da largura da barra com width</a></li>
  <li><a href="#gráfico-de-barras-empilhadas" id="toc-gráfico-de-barras-empilhadas" class="nav-link" data-scroll-target="#gráfico-de-barras-empilhadas"><span class="header-section-number">8.8.3</span> Gráfico de barras empilhadas</a></li>
  <li><a href="#gráfico-de-barras-lado-a-lado" id="toc-gráfico-de-barras-lado-a-lado" class="nav-link" data-scroll-target="#gráfico-de-barras-lado-a-lado"><span class="header-section-number">8.8.4</span> Gráfico de barras lado a lado</a></li>
  <li><a href="#gráfico-de-barra-para-uma-variável-numérica-discreta" id="toc-gráfico-de-barra-para-uma-variável-numérica-discreta" class="nav-link" data-scroll-target="#gráfico-de-barra-para-uma-variável-numérica-discreta"><span class="header-section-number">8.8.5</span> Gráfico de barra para uma variável numérica discreta</a></li>
  <li><a href="#gráfico-de-barra-de-erro" id="toc-gráfico-de-barra-de-erro" class="nav-link" data-scroll-target="#gráfico-de-barra-de-erro"><span class="header-section-number">8.8.6</span> Gráfico de barra de erro</a></li>
  </ul></li>
  <li><a href="#manipulando-outras-partes-dos-gráficos" id="toc-manipulando-outras-partes-dos-gráficos" class="nav-link" data-scroll-target="#manipulando-outras-partes-dos-gráficos"><span class="header-section-number">8.9</span> Manipulando outras partes dos gráficos</a>
  <ul class="collapse">
  <li><a href="#mudando-o-nome-dos-eixos-o-nome-e-a-ordem-dos-rótulos" id="toc-mudando-o-nome-dos-eixos-o-nome-e-a-ordem-dos-rótulos" class="nav-link" data-scroll-target="#mudando-o-nome-dos-eixos-o-nome-e-a-ordem-dos-rótulos"><span class="header-section-number">8.9.1</span> Mudando o nome dos eixos, o nome e a ordem dos rótulos</a></li>
  <li><a href="#título-e-subtítulo-do-gráfico" id="toc-título-e-subtítulo-do-gráfico" class="nav-link" data-scroll-target="#título-e-subtítulo-do-gráfico"><span class="header-section-number">8.9.2</span> Título e subtítulo do gráfico</a></li>
  <li><a href="#modificação-dos-limites-dos-eixos" id="toc-modificação-dos-limites-dos-eixos" class="nav-link" data-scroll-target="#modificação-dos-limites-dos-eixos"><span class="header-section-number">8.9.3</span> Modificação dos limites dos eixos</a></li>
  <li><a href="#modificação-da-expansão" id="toc-modificação-da-expansão" class="nav-link" data-scroll-target="#modificação-da-expansão"><span class="header-section-number">8.9.4</span> Modificação da expansão</a></li>
  </ul></li>
  <li><a href="#ajustando-o-layout-e-as-margens-no-ggplot2" id="toc-ajustando-o-layout-e-as-margens-no-ggplot2" class="nav-link" data-scroll-target="#ajustando-o-layout-e-as-margens-no-ggplot2"><span class="header-section-number">8.10</span> Ajustando o layout e as margens no ggplot2</a>
  <ul class="collapse">
  <li><a href="#modificação-das-margens-com-a-função-theme" id="toc-modificação-das-margens-com-a-função-theme" class="nav-link" data-scroll-target="#modificação-das-margens-com-a-função-theme"><span class="header-section-number">8.10.1</span> Modificação das margens com a função theme()</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./06-medidasResumidoras.html">Parte III - Estatística Descritiva</a></li><li class="breadcrumb-item"><a href="./08-graficos.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Gráficos</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span id="sec-graficos" class="quarto-section-identifier"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Gráficos</span></span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Código</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Para descrever os dados e visualizar o que está acontecendo, recomenda-se utilizar um gráfico adequado. O que é adequado depende principalmente do tipo de dados, bem como das características particulares do que se quer explorar. Além disso, um gráfico em um relatório sempre é um fator de “impacto”. Ou seja, pode ter um efeito positivo no leitor ou fazê-lo abandonar a leitura. Finalmente, um gráfico de frequência pode ser utilizado para ilustrar, explicar uma situação complexa onde palavras ou uma tabela podem ser confusos, extensos ou de outro modo insuficiente. Por outro lado, deve-se evitar usar gráficos onde poucas palavras expressam claramente o que se quer mostrar. Aconselha-se que, ao analisar os dados, é importante inspecioná-los como se fossem uma imagem, uma fotografia, ver como eles se parecem, qual o seu aspecto, e só então pensar em interpretar os aspectos vitais da estatística <span class="citation" data-cites="field2012graphs">(<a href="referencias.html#ref-field2012graphs" role="doc-biblioref">Field, Miles, e Field 2012</a>)</span>.<br>
O R básico fornece uma grande variedade de funções para visualizar dados, elas de uma maneira relativamente simples permitem a construção de gráficos que facilitam a interpretação tanto de variáveis categórica como numéricas. Existe uma farta bibliografia para a construção de gráficos, utilizando o R básico, mas a <a href="https://r-graph-gallery.com/">The R Graph Gallery</a> responde a maioria das dúvidas, apesar de ter seu foco em <code>tidyverse</code> (veja <a href="05-manipulandoDados.html#sec-tidyverse" class="quarto-xref"><span>Seção 5.4</span></a>) e <code>ggplot2.</code><br>
Neste livro, a ênfase será no pacote <code>ggplot2</code> <span class="citation" data-cites="wickham2016ggplot2">(<a href="referencias.html#ref-wickham2016ggplot2" role="doc-biblioref">Wickham 2016</a>)</span>. Este pacote é uma ferramenta extremamente versátil que oferece uma estrutura com grande flexibilidade para exibir os dados através de gráficos. O <code>gpglot2</code> não é apenas uma instrumento para criar gráficos, mas uma maneira de pensar sobre a visualização de dados de uma forma mais estruturada e poderosa.</p>
<section id="pacotes-necessários-neste-capítulo" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="pacotes-necessários-neste-capítulo"><span class="header-section-number">8.1</span> Pacotes necessários neste capítulo</h2>
<p>Certifique-se que estes pacotes estejam instalados e carregados, utilizando o pacote <code>pacman</code> (consulte a <a href="04-introducaoR.html#sec-pacman" class="quarto-xref"><span>Seção 4.2.2.4</span></a>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, readxl, scales, ggsci,  paletteer, knitr, RColorBrewer, scico)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="sec-dados8" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="sec-dados8"><span class="header-section-number">8.2</span> Fonte de dados para este capítulo</h2>
<p>Os dados serão provenientes do conjunto de dados apresentado na <a href="05-manipulandoDados.html#sec-dadosMater" class="quarto-xref"><span>Seção 5.6</span></a>, denominado de <code>dadosMater.xlsx</code> e que pode ser encontrado para baixar <a href="https://github.com/petronioliveira/Arquivos/blob/main/dadosMater.xlsx">aqui</a>.Serão selecionadas as variáveis de interesse e adicionadas variáveis que categorizam a idade da mãe e a intensidade do tabagismo durante a gestação<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. Além disso, serão feitas transformações para fatores das variáveis numéricas que na realidade são fatores. O código inicia com a semente <code>set.seed()</code> para garantir a repetibilidade.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"dados/dadosMater.xlsx"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(idadeMae,fumo, quantFumo, ig, pesoRN, compRN, para, sexo) <span class="sc">%&gt;%</span> </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fumo =</span> <span class="fu">factor</span>(fumo, </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Fumante"</span>, <span class="st">"Não fumante"</span>)),</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">sexo =</span> <span class="fu">factor</span>(sexo, </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>                       <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Masculino"</span>, <span class="st">"Feminino"</span>)),</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">categIdade =</span> <span class="fu">case_when</span>(</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>           idadeMae <span class="sc">&lt;</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">"&lt; 20 anos"</span>,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>           idadeMae <span class="sc">&gt;=</span> <span class="dv">20</span> <span class="sc">&amp;</span> idadeMae <span class="sc">&lt;=</span> <span class="dv">35</span> <span class="sc">~</span> <span class="st">"20 a 35 anos"</span>,</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>           idadeMae <span class="sc">&gt;</span> <span class="dv">35</span> <span class="sc">~</span> <span class="st">"&gt; 35 anos"</span>),</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">categIdade =</span> <span class="fu">factor</span>(categIdade, </span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>                             <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"&lt; 20 anos"</span>, </span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">"20 a 35 anos"</span>,</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">"&gt; 35 anos"</span>)),</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">categFumo =</span> <span class="fu">case_when</span>(</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>           quantFumo <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"nao_fumante"</span>,</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>           quantFumo <span class="sc">&lt;=</span> <span class="dv">10</span> <span class="sc">~</span><span class="st">"fumante_leve"</span>,</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>           quantFumo <span class="sc">&gt;</span> <span class="dv">10</span>  <span class="sc">&amp;</span> quantFumo <span class="sc">&lt;</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">"fumante_moderada"</span>,</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>           quantFumo <span class="sc">&gt;=</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">"fumante_pesada"</span>),</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>         <span class="at">categFumo =</span> <span class="fu">factor</span>(categFumo, </span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>                            <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"nao_fumante"</span>, </span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"fumante_leve"</span>,</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"fumante_moderada"</span>,</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"fumante_pesada"</span>))) </span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dados)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [1,368 × 10] (S3: tbl_df/tbl/data.frame)
 $ idadeMae  : num [1:1368] 42 29 19 31 34 29 30 34 17 32 ...
 $ fumo      : Factor w/ 2 levels "Fumante","Não fumante": 2 2 2 2 2 1 1 2 2 2 ...
 $ quantFumo : num [1:1368] 0 0 0 0 0 10 20 0 0 0 ...
 $ ig        : num [1:1368] 29 33 33 33 33 33 33 33 34 34 ...
 $ pesoRN    : num [1:1368] 1035 2300 1580 1840 2475 ...
 $ compRN    : num [1:1368] 35.5 45 39 41 47 41 44 44 47 48 ...
 $ para      : num [1:1368] 5 0 0 1 2 1 2 1 0 4 ...
 $ sexo      : Factor w/ 2 levels "Masculino","Feminino": 2 2 2 2 2 2 2 2 2 2 ...
 $ categIdade: Factor w/ 3 levels "&lt; 20 anos","20 a 35 anos",..: 3 2 1 2 2 2 2 2 1 2 ...
 $ categFumo : Factor w/ 4 levels "nao_fumante",..: 1 1 1 1 1 2 4 1 1 1 ...</code></pre>
</div>
</div>
</section>
<section id="sec-ggplot2" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="sec-ggplot2"><span class="header-section-number">8.3</span> Pacote ggplot2</h2>
<p>O <code>ggplot2</code> é um pacote da linguagem R voltado para a visualização de dados, oferecendo uma abordagem poderosa e elegante baseada na <em>Gramática dos Gráficos</em> <span class="citation" data-cites="wickham2010layered">(<a href="referencias.html#ref-wickham2010layered" role="doc-biblioref">Wickham 2010</a>)</span>.</p>
<section id="sec-grammar" class="level3" data-number="8.3.1">
<h3 data-number="8.3.1" class="anchored" data-anchor-id="sec-grammar"><span class="header-section-number">8.3.1</span> Gramática dos Gráficos</h3>
<p>O R base usa funções específicas para a construção de um gráfico, por exemplo, <code>hist()</code> para criar um histograma ou a função plot() que é uma função mais genérica que produz um gráfico de dispersão, no R, quando são passados a ela dois vetores numéricos ou boxplots quando são fornecidos dados categóricos.</p>
<p>Tomando as variáveis <code>compRN</code> e <code>pesoRN</code> de uma amostra de de 100 observações do conjunto <code>dados</code>, com filtro para as gestações a termo <a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>, será construído um gráfico de dispersão (<a href="#fig-scatter1" class="quarto-xref">Figura&nbsp;<span>8.1</span></a>) com a função<code>plot()</code> do R base:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span> (<span class="at">x =</span><span class="fu">jitter</span>(dadosRNT100<span class="sc">$</span>compRN,<span class="dv">10</span>),</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> dadosRNT100<span class="sc">$</span>pesoRN,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">ylab =</span> <span class="st">"Peso de Recém-nascido (g)"</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">xlab =</span> <span class="st">"Comprimento do Recém-nascido (cm)"</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">cex.axis =</span> <span class="fl">0.8</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">las =</span> <span class="dv">1</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">bty =</span> <span class="st">"L"</span>,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">pch =</span> <span class="dv">19</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">cex =</span> <span class="fl">1.5</span>,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">col =</span> <span class="st">"cyan4"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-scatter1" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scatter1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-scatter1-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scatter1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.1: Gráfico de dispersão produzido com uma função específica plot(), do R base
</figcaption>
</figure>
</div>
</div>
</div>
<p>Este gráfico não difere muito do gráfico da <a href="#fig-scatter5" class="quarto-xref">Figura&nbsp;<span>8.7</span></a> no seu aspecto final, produzido no <code>ggplot2</code>. Entretanto, a filosofia de construção dos gráficos é muito diferente.</p>
<p>Em vez de se pensar em funções específicas para cada tipo de gráfico, o <code>ggplot2</code> permite que se construa gráficos combinando diferentes componentes. Pode-se pensar nisso como se fosse a montagem de um quebra-cabeça, onde cada peça representa uma parte do gráfico. Essa abordagem modular e intuitiva é o que torna o <code>ggplot2</code> tão flexível e poderoso.</p>
<p>Os principais componentes combinados para criar um gráfico no <code>ggplot2</code> são:</p>
<ul>
<li><p><strong>Dados (Data)</strong>: cada camada deve ter dados associados. É o conjunto de dados que se quer visualizar. Geralmente, ele deve estar em um formato <strong>tidy</strong> (arrumado), onde cada coluna é uma variável e cada linha é uma observação (<a href="05-manipulandoDados.html#sec-tibble" class="quarto-xref"><span>Seção 5.3</span></a>).</p></li>
<li><p><strong>Mapeamentos Estéticos</strong>: Os mapeamentos estéticos são definidos com a função <code>aes()</code>. A parte onde se associa as variáveis do conjunto de dados a propriedades visuais do gráfico, como os eixos <em>x</em> e <em>y</em>, a cor, o tamanho, a forma e a transparência. Por exemplo, é possível mapear a variável peso do recém-nascido para o eixo <em>y</em> e a variável comprimento do recém-nascido para o eixo <em>x</em>. Os mapeamentos estéticos podem ser fornecidos na <code>ggplot()</code> , chamada inicial, em camadas individuais ou em uma combinação de ambos. Todas essas chamadas criam a mesma especificação de plotagem.</p>
<p>Escalas (<em>Scales</em>) podem ser usadas para controlar a forma dos mapeamentos estéticos. Pode-se usar escalas para ajustar cores, tamanhos e a aparência dos eixos.</p></li>
<li><p><strong>Geometrias (Geoms)</strong>: Formas geométricas que representam os dados. É aqui que se define o tipo de gráfico a ser criado. Alguns exemplos são:</p>
<ul>
<li><p><code>geom_point()</code> para um gráfico de dispersão (pontos).</p></li>
<li><p><code>geom_line()</code> para um gráfico de linha.</p></li>
<li><p><code>geom_bar()</code> para um gráfico de barras.</p></li>
<li><p><code>geom_errorbar()</code>: barras de erro.</p></li>
<li><p><code>geom_bar(stat = "identity")</code>: um gráfico de barras de resumos pré-calculados</p></li>
<li><p><code>geom_histogram()</code> para um histograma.</p></li>
<li><p><code>geom_boxplot()</code> para um boxplot.</p></li>
</ul>
<p>Pode-se adicionar múltiplas camadas que permitem combinar diferentes tipos de geoms em uma única visualização. Por exemplo, é possível colocar uma linha de tendência (<code>geom_smooth()</code>) em cima de um gráfico de dispersão (<code>geom_point()</code>), veja a <a href="#fig-scatter12" class="quarto-xref">Figura&nbsp;<span>8.16</span></a>.</p></li>
<li><p><strong>Estatísticas</strong>: O <code>ggplot2</code> não permite a colocação direta de estatísticas dentro dos geoms. A forma mais comum de adicionar estatísticas em um gráfico é usando a função <code>stat_</code>. As funções <code>stat_</code> calculam as estatísticas (como média, mediana, contagem) e, em seguida, as representam no gráfico, criando uma camada de dados calculados.</p>
<ul>
<li><p><code>stat_summary</code>: adiciona um resumo estatístico a cada grupo. Usada para adicionar a média, mediana ou desvio padrão em um geom já existente, como um gráfico de dispersão ou de barras.</p></li>
<li><p><code>stat_smooth</code>: Adiciona uma linha de tendência (como regressão linear) com um intervalo de confiança.</p></li>
<li><p><code>stat_bin</code>: Calcula a contagem de cada <em>bin</em> e os plota como um histograma.</p></li>
</ul>
<p>A partir das últimas versões do <code>ggplot2</code>, é possível mapear variáveis calculadas pelo <code>stat_</code> diretamente em uma estética, como <em>y</em>, <em>size</em> ou <em>label</em>. Isso dá uma grande flexibilidade.</p>
<p>Em vez de usar as funções <code>stat_</code>, é possível calcular as estatísticas em um passo separado usando o <code>dplyr</code> e, em seguida, plotar esses dados pré-calculados usando <code>ggplot2</code>.</p>
<ul>
<li>Calcule as estatísticas usando <code>group_by()</code> e <code>summarize()</code> do <code>dplyr</code>.</li>
<li>Crie o gráfico usando os novos dados calculados.</li>
</ul></li>
<li><p><strong>Ajustes de posição</strong>: aplicam pequenos ajustes na posição dos elementos dentro de uma camada. Por exemplos, há três ajustes que são úteis em gráficos de pontos</p>
<ul>
<li><p><code>position_nudge()</code>: mover pontos por um deslocamento fixo.</p></li>
<li><p><code>position_jitter()</code>: adicione um pouco de ruído aleatório a cada posição (<a href="#fig-scatter4" class="quarto-xref">Figura&nbsp;<span>8.6</span></a>).</p></li>
<li><p><code>position_jitterdodge()</code>: desviar de pontos dentro de grupos e depois adicionar um pouco de ruído aleatório. Na construção do gráfico de dispersão será mostrado exemplo desses ajustes (<a href="#sec-jitter" class="quarto-xref"><span>Seção 8.4.4</span></a>).</p></li>
</ul>
<p>Para o gráfico de barras, pode-se aplicar alguns ajustes:<br>
</p>
<ul>
<li><code>position_stack()</code>: empilhar barras (ou áreas) sobrepostas umas sobre as outras.</li>
<li><code>position_fill()</code>: empilhe barras sobrepostas, dimensionando para que o topo esteja sempre em 1.</li>
<li><code>position_dodge()</code>: coloque barras sobrepostas (ou boxplots) lado a lado.</li>
</ul></li>
<li><p><strong>Facetas (Facets)</strong>: Permitem criar múltiplos subgráficos baseados em uma ou mais variáveis categóricas. É uma ótima maneira de explorar as relações entre diferentes grupos de dados de forma visual (<a href="#fig-scatter11" class="quarto-xref">Figura&nbsp;<span>8.15</span></a>).</p></li>
<li><p><strong>Temas (Themes)</strong>: Controlam a aparência geral do gráfico, como a cor de fundo, a fonte, as linhas da grade e a aparência dos títulos. O <code>ggplot2</code> permite construir gráficos complexos camada por camada, possibilitando a criação de gráficos sofisticados <span class="citation" data-cites="wickham2023ggplot2">(<a href="referencias.html#ref-wickham2023ggplot2" role="doc-biblioref">Wickham, Navarro, e Pedersen 2023</a>)</span>. Em cada uma das camadas deve-se ter preocupação em controlar os componentes do gráfico.</p></li>
</ul>
</section>
<section id="vantagens-do-ggplot2" class="level3" data-number="8.3.2">
<h3 data-number="8.3.2" class="anchored" data-anchor-id="vantagens-do-ggplot2"><span class="header-section-number">8.3.2</span> Vantagens do ggplot2</h3>
<ul>
<li><p><strong>Consistência e Flexibilidade</strong>: A abordagem de camadas e a gramática de gráficos permitem criar uma variedade enorme de visualizações de forma consistente.</p></li>
<li><p><strong>Qualidade Visual</strong>: Os gráficos produzidos pelo ggplot2 são esteticamente agradáveis e prontos para publicações.</p></li>
<li><p><strong>Intuitividade</strong>: Uma vez que se entenda o conceito, é fácil construir gráficos complexos de forma gradual.</p></li>
<li><p><strong>Extensibilidade</strong>: O pacote pode ser estendido com outros pacotes que adicionam novas geoms, temas ou funcionalidades, como o gganimate para animações ou o ggrepel para evitar sobreposição de rótulos.</p></li>
</ul>
</section>
</section>
<section id="sec-scatter" class="level2" data-number="8.4">
<h2 data-number="8.4" class="anchored" data-anchor-id="sec-scatter"><span class="header-section-number">8.4</span> Gráfico de dispersão</h2>
<p>Um gráfico de dispersão (<em>Scatterplot</em>) exibe a relação entre duas variáveis numéricas. Cada ponto representa uma observação. Suas posições nos eixos <em>x</em> (horizontal) e <em>y</em> (vertical) representam os valores das duas variáveis.<br>
O gráfico de dispersão permite identificar padrões, tendências e a força de uma possível correlação entre essas variáveis. Frequentemente, vem acompanhado por um cálculo do coeficiente de correlação (<a href="17-correlacao.html" class="quarto-xref"><span>Capítulo 17</span></a>), que , em geral, mede a relação linear.</p>
<p>Pretende-se, na construção de um gráfico de dispersão introduzir a lógica do <code>ggplot2</code>. Os dados usados para o exemplo, serão os mesmos usados na construção do gráfico de dispersão com a função nativa <code>plot()</code>(<a href="#sec-grammar" class="quarto-xref"><span>Seção 8.3.1</span></a>).</p>
<section id="gráfico-de-dispersão-básico" class="level3" data-number="8.4.1">
<h3 data-number="8.4.1" class="anchored" data-anchor-id="gráfico-de-dispersão-básico"><span class="header-section-number">8.4.1</span> Gráfico de dispersão básico</h3>
<p>Este é o exemplo mais simples que começa com o mapeamento de duas variáveis para os eixos <em>x</em> e <em>y.</em> A função central do pacote <code>ggplot2</code> é <code>ggplot()</code>, que recebe os dados por meio do argumento <code>data</code>. Em seguida, a função estética <code>aes()</code> define os mapeamentos dos eixos <em>x</em> e <em>y</em>, iniciando o gráfico com uma <strong>camada base</strong> — ainda vazia, mesmo que os dados já tenham sido fornecidos. Essa camada base corresponde a um painel cinza (<a href="#fig-baselayer" class="quarto-xref">Figura&nbsp;<span>8.2</span></a>), sobre o qual outras camadas serão adicionadas. Funciona como um terreno pronto para receber uma construção, que será erguida com o uso de uma função geométrica.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dadosRNT100, <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-baselayer" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-baselayer-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-baselayer-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-baselayer-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.2: Camada base do ggplot
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="geometria" class="level3" data-number="8.4.2">
<h3 data-number="8.4.2" class="anchored" data-anchor-id="geometria"><span class="header-section-number">8.4.2</span> Geometria</h3>
<p>A seguir, adiciona-se <a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> a camada dos pontos que usa a geometria <code>geom_point()</code> para criar um gráfico de dispersão.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dadosRNT100,</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN)) <span class="sc">+</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-scatter2" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scatter2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-scatter2-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scatter2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.3: Gráfico de dispersão simples
</figcaption>
</figure>
</div>
</div>
</div>
<p>A <a href="#fig-scatter2" class="quarto-xref">Figura&nbsp;<span>8.3</span></a> mostra um gráfico de dispersão ainda sem um aspecto elegante, mas com as informações necessárias. Tem este fundo escuro que não é do agrado da maioria, além de não apresentar o rótulos das variáveis de forma mais clara, mais adequada.</p>
<p>O mesmo resultado da <a href="#fig-scatter2" class="quarto-xref">Figura&nbsp;<span>8.3</span></a> pode ser obtido, colocando o mapeamento com a estética <code>aes()</code> dentro do <code>geom_point()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dadosRNT100) <span class="sc">+</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="sec-custom" class="level3" data-number="8.4.3">
<h3 data-number="8.4.3" class="anchored" data-anchor-id="sec-custom"><span class="header-section-number">8.4.3</span> Customização do gráfico de dispersão</h3>
<p>A geometria <code>geom_point()</code> múltiplas opções de customização, através de seus argumentos:</p>
<ul>
<li><strong>color</strong>: a cor do traço, o contorno do círculo</li>
<li><strong>stroke</strong>: a largura do traço no ponto</li>
<li><strong>fill</strong>: cor da parte interna do ponto</li>
<li><strong>shape</strong>: forma do marcador (<a href="#fig-shape" class="quarto-xref">Figura&nbsp;<span>8.4</span></a>)</li>
<li><strong>alpha</strong>: transparência do ponto, varia de 0 a 1, 0 é totalmente transparente; 1 = opaco.</li>
<li><strong>size</strong>: tamanho do ponto</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-shape" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-shape-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="https://i.imgur.com/2irU1vJ.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-shape-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.4: Formato dos pontos disponíveis no R
</figcaption>
</figure>
</div>
</div>
</div>
<p>Para definir um tamanho uniforme para todos os pontos do gráfico, basta especificar um valor numérico no argumento <code>size</code> da função <code>geom_point()</code>, como por exemplo <code>size = 1.5</code> (padrão). Para melhor visualização, será escolhido <code>size = 3</code> ou <code>4</code>. O mesmo princípio se aplica à cor. No argumento <code>color</code> (vai colorir o contorno dos pontos), colocar, por exemplo, <code>color = “gray20”</code> ou, se o formato (<code>shape</code>), no argumento <code>fill</code> para a cor de preenchimento do ponto. A escolha das cores depende do gosto pessoal, na <a href="#sec-coresr" class="quarto-xref"><span>Seção 8.4.6</span></a>, serão mostrados alguns princípios que auxiliam esse processo. Para alterar o formato dos pontos, usar o argumento <code>shape</code>, conforme as opções na figura <a href="#fig-shape" class="quarto-xref">Figura&nbsp;<span>8.4</span></a>. Somente os formatos 21 a 25 permitem preenchimento. No exemplo, será usado <code>shape = 21.</code> Nesse caso, é possível adicionar o argumento para definir a cor interna do ponto, ou seja, uma cor fixa (fill = “tomato”) ou uma variável categórica, como <code>sexo</code>. Ao utilizar uma variável como <code>fill = sexo</code>, o <code>ggplot2</code> preencherá os pontos com cores diferentes automaticamente, de acordo com os níveis dessa variável.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dadosRNT100,</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN)) <span class="sc">+</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"gray20"</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span><span class="st">"tomato"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="dv">1</span>,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span><span class="dv">1</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-scatter3" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scatter3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-scatter3-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scatter3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.5: Gráfico de dispersão colorido
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="sec-jitter" class="level3" data-number="8.4.4">
<h3 data-number="8.4.4" class="anchored" data-anchor-id="sec-jitter"><span class="header-section-number">8.4.4</span> Lidando com a sobreposição dos pontos e os rótulos</h3>
<p>Na <a href="#fig-scatter3" class="quarto-xref">Figura&nbsp;<span>8.5</span></a> a modificação realizada melhorou o aspecto do gráfico. Entretanto, os pontos estão se sobrepondo, porque o comprimento dos recém-nascidos está registrado como uma variável numérica discreta e existem vários com o mesmo comprimento. Nesse caso, a solução para evitar a sobreposição, é provocar um pequeno deslocamento aleatório dos pontos, tornando o gráfico mais legível. Isto é feito, embutindo o <em>jitter</em> (espalhamento) com um argumento dentro do <code>geom_point()</code>, o <code>position = position_jitter (width = 0.2, height = 0)</code>. O argumento <code>width</code> controla o deslocamento horizontal (eixo <em>x</em>); <code>height</code> controla o deslocamento vertical (eixo <em>y</em>). No exemplo (<a href="#fig-scatter4" class="quarto-xref">Figura&nbsp;<span>8.6</span></a>), os pontos serão espalhados horizontalmente, mantendo a posição vertical. Será usado o argumento <code>width = 0.2</code> que espalha os pontos de forma leve, sem alterar o eixo <em>y</em>.</p>
<p>Nesta modificação, será colocada mais uma camada para trabalhar com os rótulos dos eixos x e y., usando as funções <code>ylab()</code> e <code>xlab()</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dadosRNT100, </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN, <span class="at">fill =</span> sexo)) <span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="dv">0</span>),</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"gray20"</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span><span class="st">"tomato2"</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="dv">1</span>,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Peso do Recém-nascido (g)"</span>) <span class="sc">+</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Comprimento do Recém-nascido (cm)"</span>) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-scatter4" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scatter4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-scatter4-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scatter4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.6: Gráfico de dispersão com jitter
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="mudando-o-tema" class="level3" data-number="8.4.5">
<h3 data-number="8.4.5" class="anchored" data-anchor-id="mudando-o-tema"><span class="header-section-number">8.4.5</span> Mudando o tema</h3>
<p>A <a href="#fig-scatter4" class="quarto-xref">Figura&nbsp;<span>8.6</span></a> já é um gráfico bem aceitável, praticamente sem defeitos, apesar de o autor implicar muito com o fundo cinza – <code>theme_gray()</code>. Essa cor acinzentada padrão do <code>ggplot2</code> pode ser alterada pela definição de outro tema integrado, entre muitos, como <code>theme_classic()</code> que é um tema de aparência clássica, com linhas dos eixos <em>x</em> e <em>y</em> e sem linhas de grade, semelhante ao da <a href="#fig-scatter1" class="quarto-xref">Figura&nbsp;<span>8.1</span></a>, criado com a função nativa <code>plot()</code>. Outro tema interessante é o <code>theme_bw()</code> que usa um fundo branco e linhas finas de grade cinza.</p>
<p>Para ver outras possibilidades acesse <a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">Completes themes - ggplt2</a>. Foi adicionado o argumento <code>base_size = 13</code>, para modificar o tamaho das letras.</p>
<p>O gráfico da <a href="#fig-scatter4" class="quarto-xref">Figura&nbsp;<span>8.6</span></a> com a adição do <code>theme_classic()</code> e aumento dp tamanho das letras, pode ser observado na <a href="#fig-scatter5" class="quarto-xref">Figura&nbsp;<span>8.7</span></a>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dadosRNT100,</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN)) <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="dv">0</span>),</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"gray20"</span>,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span><span class="st">"steelblue"</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="dv">1</span>,</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Peso do Recém-nascido (g)"</span>) <span class="sc">+</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Comprimento do Recém-nascido (cm)"</span>)<span class="sc">+</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-scatter5" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scatter5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-scatter5-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scatter5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.7: Gráfico de dispersão com jitter e theme_bw()
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="sec-coresr" class="level3" data-number="8.4.6">
<h3 data-number="8.4.6" class="anchored" data-anchor-id="sec-coresr"><span class="header-section-number">8.4.6</span> Mudando as cores</h3>
<p>Na <a href="#sec-custom" class="quarto-xref"><span>Seção 8.4.3</span></a> foi introduzido o uso de cores no R. Agora, apesar deste tema praticamente não ter limites, serão mostrados alguns princípios do manuseio das cores no <code>ggplot2.</code> É possível visualizar as cores para usar no <code>ggplot2</code> de uma maneira fácil, acessando, por exemplo, <a href="https://r-graph-gallery.com/42-colors-names.html">An overview of color names in R</a> ou um guia completo <a href="http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/">Colors (ggplot2)</a>.<br>
A escolha das cores pode ser feita especificando o seu nome em inglês. Essa escolha é pessoal. O R possui 657 cores integradas que permitem uma gama ampla de opções. Pode-se chamar uma cor pelo nome e a função <code>colors()</code> exibe todos elas. Uma outra maneira de especificar as cores, é usar o sistema RGB ou hexadecimal. O código hexadecimal da cor branca é <code>#FFFFFF</code>F, da “gray58” é <code>#949494</code>, da “yellow4” é <code>#999900</code>, etc. Opcionalmente, a cor pode ser transparente, usando o formato “#RRGGBBAA”. <code>Alpha</code> refere-se à transparência de um <code>geom_</code>. Os valores de <code>alpha</code> variam de 0 a 1, com valores mais baixos correspondendo a cores mais transparentes. O argumento <code>alpha</code> também pode ser modificado por meio da estética de <code>color</code> ou <code>fill</code> se qualquer uma das estéticas fornecer valores de cor usando uma especificação RGB.</p>
<section id="mapeando-cores-com-aes" class="level4" data-number="8.4.6.1">
<h4 data-number="8.4.6.1" class="anchored" data-anchor-id="mapeando-cores-com-aes"><span class="header-section-number">8.4.6.1</span> Mapeando Cores com aes()</h4>
<p>A forma mais comum de usar cores é mapeando uma variável para a estética <code>color</code> ou <code>fill</code> dentro da função <code>aes()</code>. Quando se faz isso, o <code>ggplot2</code> atribui cores automaticamente, criando uma legenda. Esta legenda pode ser modificada de posição com a função theme(legend.position = “bottom”), que colocará a legenda na parte inferior do gráfico<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>. No caso deste gráfico, o título da legenda pode ser removido, porque ele é óbvio. Para isso, basta usar a função labs() que manauseia os títulos, usando <code>color</code> ou <code>fill</code>, dependendo se for a cor do contorno ou do preenchimento do ponto.</p>
<ul>
<li><p><strong>color</strong>: Usado para o contorno de formas, como a borda dos pontos ( ou como será visto adiante, as linhas de um gráfico de linha, ou a borda de um boxplot, de um gráfico de barra).</p></li>
<li><p><strong>fill</strong>: Usado para preencher formas, como pontos (<code>shape</code> 21 a 25) ou como as barras de um histograma ou as caixas de um boxplot (ver adiante).</p></li>
</ul>
<p>Inicialmente, serão manipuladas as cores do gráfico da <a href="#fig-scatter5" class="quarto-xref">Figura&nbsp;<span>8.7</span></a>, utilizando uma variável categórica, <code>fill = sexo</code>, dentro da função <code>aes()</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dadosRNT100, </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN, <span class="at">fill =</span> sexo)) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="dv">0</span>),</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="dv">1</span>,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">4</span>,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">""</span>,</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Comprimento do Recém-nascido (cm)"</span>,</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Peso do Recém-nascido (g)"</span>,</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-scatter6" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scatter6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-scatter6-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scatter6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.8: Gráfico de dispersão com cores de acordo com o sexo
</figcaption>
</figure>
</div>
</div>
</div>
<p>Neste caso, a variável categórica <code>sexo</code> foi mapeada para a estética fill. O <code>ggplot2</code> atribuiu uma cor diferente para cada <code>sexo</code> e criou uma legenda automaticamente (<a href="#fig-scatter6" class="quarto-xref">Figura&nbsp;<span>8.8</span></a>). No exemplo da <a href="#fig-scatter5" class="quarto-xref">Figura&nbsp;<span>8.7</span></a>, foi mostrado que quando a cor for única, o mapeamento da mesma se dá dentro do <code>geom_point()</code>.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Atenção!
</div>
</div>
<div class="callout-body-container callout-body">
<p>Se estiver usando <code>shape</code> que <strong>não aceita preenchimento</strong> (como 16 ou 19), então deve-se usar <code>color = sexo</code> e <code>scale_color_manual().</code></p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercício
</div>
</div>
<div class="callout-body-container callout-body">
<p>O que acontece se a cor determinada por uma variável categórica (<code>fill = sexo</code> ou <code>color= sexo</code>) for colocada fora do <code>aes()</code>?</p>
</div>
</div>
<p><u>Resposta</u><a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
</section>
<section id="paletas-de-cores" class="level4" data-number="8.4.6.2">
<h4 data-number="8.4.6.2" class="anchored" data-anchor-id="paletas-de-cores"><span class="header-section-number">8.4.6.2</span> Paletas de Cores</h4>
<p>Para ter controle total sobre as cores, deve-se usar funções de escala (<code>scale</code>). Existem diferentes funções de escala para variáveis categóricas e numéricas. Na <a href="#fig-scatter6" class="quarto-xref">Figura&nbsp;<span>8.8</span></a>, o <code>ggplot2</code> definiu as cores automaticamente. Agora, as cores serão personalizadas, usando a função <code>scale_color_manual()</code> (<a href="#fig-scatter7" class="quarto-xref">Figura&nbsp;<span>8.9</span></a>).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN, <span class="at">fill =</span> sexo)) <span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="dv">0</span>),</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"gray20"</span>, </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">4</span>, </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="at">Masculino =</span> <span class="st">"cyan"</span>,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>                               <span class="at">Feminino =</span> <span class="st">"pink3"</span>)) <span class="sc">+</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">""</span>,</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Comprimento do Recém-nascido (cm)"</span>,</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Peso do Recém-nascido (g)"</span>,</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-scatter7" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scatter7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-scatter7-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scatter7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.9: Gráfico de dispersão com cores personalizadas de acordo com o sexo
</figcaption>
</figure>
</div>
</div>
</div>
<p>Observar que, na <a href="#fig-scatter6" class="quarto-xref">Figura&nbsp;<span>8.8</span></a>, os pontos que representam os meninos estavam cor rosa e as meninas com cor azul. Na figura <a href="#fig-scatter7" class="quarto-xref">Figura&nbsp;<span>8.9</span></a>, isto foi modificado <strong>manualmente</strong>. Para realizar o mesmo processo, é muito comum usar pacotes de <strong>paletas de cores</strong>.</p>
<section id="pacote-ggsci" class="level5" data-number="8.4.6.2.1">
<h5 data-number="8.4.6.2.1" class="anchored" data-anchor-id="pacote-ggsci"><span class="header-section-number">8.4.6.2.1</span> Pacote ggsci</h5>
<p>O <code>ggsci</code> é um pacote que oferece uma coleção de paletas de alta qualidade inspiradas em cores usadas em revistas científicas, bibliotecas de visualização de dados, filmes de ficção científica e programas de TV. As paletas de cores no <code>ggsci</code> estão disponíveis como escalas <code>ggplot2</code>, Para todas usa-se as seguintes funções:</p>
<ul>
<li><code>scale_color_nomedapaleta()</code> e</li>
<li><code>scale_fill_nomedapaleta ()</code>.</li>
</ul>
<p>Por exemplo, para a paleta do <em>Lancet</em>, usa-se para o preenchimento: s<code>cale_fill_lancet()</code> . O pacote <code>ggsci</code> deve ser instalado e carregado para usar estas paletas.<br>
Para visualizar as opções do pacote <code>ggsci</code> acessar <a href="https://cran.r-project.org/web/packages/ggsci/vignettes/ggsci.html">Scientific Journal and Sci-Fi Themed Color Palettes for ggplot2</a>.</p>
<p>Como exemplo, será usado o código que gerou o gráfico da <a href="#fig-scatter7" class="quarto-xref">Figura&nbsp;<span>8.9</span></a> com alterações, usando a paleta do periódico <em>Lancet</em>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsci)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN, <span class="at">fill =</span> sexo)) <span class="sc">+</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="dv">0</span>),</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"gray20"</span>, </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">4</span>, </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_lancet</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">""</span>,</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Comprimento do Recém-nascido (cm)"</span>,</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Peso do Recém-nascido (g)"</span>,</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-scatter8" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scatter8-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-scatter8-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scatter8-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.10: Gráfico de dispersão com cores personalizadas usando o ggsci
</figcaption>
</figure>
</div>
</div>
</div>
<p>As cores usadas são agora as da paleta do <em>Lancet</em> (<a href="#fig-scatter8" class="quarto-xref">Figura&nbsp;<span>8.10</span></a>). Como eles são muito vivas e para que aparecesse que o ponto foi preenchido, foi utilizada uma transparência de alpha = 0.6. A paleta do <em>Lancet</em> pode ser visualizada com a função <code>show_col(pal_lancet())</code>(<a href="#fig-lancet" class="quarto-xref">Figura&nbsp;<span>8.11</span></a>)</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsci)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">show_col</span>(<span class="fu">pal_lancet</span>())</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-lancet" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-lancet-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-lancet-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-lancet-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.11: Paleta do Lancet do pacote ggsci
</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercício
</div>
</div>
<div class="callout-body-container callout-body">
<p>Visualizar outras paletas do pacote <code>ggsci</code>, usando a função <code>show_col()</code> do pacote scales. Por exemplo:</p>
<p>show_col(pal_jama())</p>
<p>show_col(pal_bmj())</p>
<p>show_col(pal_aaas())</p>
<p>show_col(pal_simpsons())</p>
</div>
</div>
</section>
<section id="pacote-rcolorbrewer" class="level5" data-number="8.4.6.2.2">
<h5 data-number="8.4.6.2.2" class="anchored" data-anchor-id="pacote-rcolorbrewer"><span class="header-section-number">8.4.6.2.2</span> Pacote RColorBrewer</h5>
<p>Existem outros pacotes, como o <code>RColorBrewer</code>, que oferecem paletas visualmente agradáveis e podem facilmente ser exploradas. Por alguns, é considerado uma ferramenta indispensável para gerenciar cores com R <span class="citation" data-cites="holtz2025colorbrewer">(<a href="referencias.html#ref-holtz2025colorbrewer" role="doc-biblioref">Holtz 2025</a>)</span>. Para visualizar (<a href="#fig-colorbrewer" class="quarto-xref">Figura&nbsp;<span>8.12</span></a>) as paletas do pacote <code>RColorBrewer</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>))            <span class="co"># modifica o tamanho das margens</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">display.brewer.all</span>()</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="fl">5.1</span>, <span class="fl">4.1</span>, <span class="fl">4.1</span>, <span class="fl">2.1</span>))    <span class="co"># retorna ao tamanho original das margens</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-colorbrewer" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-colorbrewer-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-colorbrewer-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-colorbrewer-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.12: Paleta do RColorBrewer
</figcaption>
</figure>
</div>
</div>
</div>
<p>Como exemplo, será repetido o gráfico da <a href="#fig-scatter8" class="quarto-xref">Figura&nbsp;<span>8.10</span></a> com uma paleta de cores do RColorBrewer, <code>Pastel2</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN, <span class="at">fill =</span> sexo)) <span class="sc">+</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="dv">0</span>),</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"gray20"</span>, </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">4</span>, </span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel2"</span>) <span class="sc">+</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">""</span>,</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Comprimento do Recém-nascido (cm)"</span>,</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Peso do Recém-nascido (g)"</span>,</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-scatter9" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scatter9-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-scatter9-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scatter9-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.13: Gráfico de dispersão com cores personalizadas usando o RColorBrewer
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="paleta-paletteer" class="level5" data-number="8.4.6.2.3">
<h5 data-number="8.4.6.2.3" class="anchored" data-anchor-id="paleta-paletteer"><span class="header-section-number">8.4.6.2.3</span> Paleta paletteer</h5>
<p>O pacote <code>paletteer</code> no R reúne um grande número de paletas de cores de diversos pacotes do R dedicados a cores. Fornece uma interface simples e consistente para acessar essas paletas, facilitando o trabalho. Oferece mais de 2000 paletas de cores de vários pacotes do R, como <code>ggthemes</code>, <code>wesanderson</code>, <code>lisa</code>, <code>scico</code>, entre outros. Tudo acessível por uma interface simples e poderosa, facilitando a criação de visualizações bonitas e informativas <span class="citation" data-cites="hvitfeldt2024paletteer">(<a href="referencias.html#ref-hvitfeldt2024paletteer" role="doc-biblioref">Hvitfeldt 2024</a>)</span>.<br>
Todas as paletas podem ser acessadas a partir das três funções <code>paletteer_c()</code>, <code>paletteer_d()</code> e <code>paletteer_dynamic()</code> usando a sintaxe: <code>nome_do_pacote::nome_da_paleta</code> <a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>.</p>
<p>Paletas discretas são paletas com um número fixo de cores. Elas são úteis para visualizar dados categóricos. Por exemplo, uma paleta que vai do vermelho ao laranja, do verde ao preto é uma paleta discreta.</p>
<p>Exemplo com a paleta <code>nbapalettes::supersonics_holiday</code>, mapeando os pontos em um tamanho maior (<code>size = 7</code>) para chamar atenção das cores.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(paletteer)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN, <span class="at">fill =</span> sexo)) <span class="sc">+</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="dv">0</span>),</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, </span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"gray20"</span>, </span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">6</span>, </span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_paletteer_d</span>(<span class="st">"nbapalettes::supersonics_holiday"</span>) <span class="sc">+</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">""</span>,</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Comprimento do Recém-nascido (cm)"</span>,</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Peso do Recém-nascido (g)"</span>,</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-scatter10" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scatter10-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-scatter10-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scatter10-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.14: Gráfico de dispersão com cores personalizadas usando o paletteer
</figcaption>
</figure>
</div>
</div>
</div>
<p>Para uma visualização rápida de algumas paletas com o <code>paleteteer</code>, pode-se digitar em um script do <em>RStudio</em> ou do <em>Positron</em> o seguinte comando:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>paletteer<span class="sc">::</span><span class="fu">paletteer_d</span>(<span class="st">"lisa::FridaKahlo"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;colors&gt;
#121510FF #6D8325FF #D6CFB7FF #E5AD4FFF #BD5630FF </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>paletteer<span class="sc">::</span><span class="fu">paletteer_d</span>(<span class="st">"nbapalettes::supersonics_holiday"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;colors&gt;
#D50032FF #F6BE00FF #00573FFF #010101FF </code></pre>
</div>
</div>
<p>No console, aparecerão as cores com os códigos hexadecimais. Se as cores não estiverem visíveis como aqui, então acesse o website <a href="https://html-color-codes.info/">HTML Coloe Codes</a>, onde facilente é feita essa conversão.</p>
<p>Isto é apenas o caminho, existem uma enorme quantidade de paletas (mais de 2500 paletas!) e o <code>paletteer</code> é uma espécie de facilitador para se ter acesso a elas. Escolher as cores para um gráfico é uma tarefa desafiadora e demorada, o que geralmente leva à insatisfação.Em um dos seus sites educacionais <a href="https://www.yan-holtz.com/">Yan Holtz</a> disponibiliza um <a href="https://r-graph-gallery.com/color-palette-finder">localizador de paletas de cores</a> que torna este trabalho mais palatável.</p>
</section>
</section>
</section>
<section id="sec-facet" class="level3" data-number="8.4.7">
<h3 data-number="8.4.7" class="anchored" data-anchor-id="sec-facet"><span class="header-section-number">8.4.7</span> Facetamento</h3>
<p>Na <a href="#sec-coresr" class="quarto-xref"><span>Seção 8.4.6</span></a>, foi mostrado como comparar grupos, através da cor, usando as estéticas <code>fill</code> ou <code>color</code> <a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>. Outra técnica para diferenciar grupos em um gráfico é o <strong>facetamento</strong>. O facetamento cria gráficos dividindo os dados em subconjuntos e exibindo o mesmo gráfico para cada subconjunto (<a href="#fig-scatter11" class="quarto-xref">Figura&nbsp;<span>8.15</span></a>) . Para facetar um gráfico, basta adicionar uma especificação de facetamento com a função <code>facet_wrap()</code>, que recebe o nome de uma variável categórica precedido pelo sinal gráfico <code>til (~)</code>.</p>
<p>Como exemplo prático, será aproveitado o código que gerou a <a href="#fig-scatter10" class="quarto-xref">Figura&nbsp;<span>8.14</span></a> com pequenas alterações <a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> e aplicação do <code>facet_wrap()</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN)) <span class="sc">+</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="dv">0</span>),</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> <span class="st">"tomato"</span>,</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"gray20"</span>, </span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">4</span>, </span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Comprimento do Recém-nascido (cm)"</span>, </span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Peso do Recém-nascido (g)"</span>) <span class="sc">+</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>sexo)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-scatter11" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scatter11-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-scatter11-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scatter11-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.15: Gráfico de dispersão com facetamento por categoria
</figcaption>
</figure>
</div>
</div>
</div>
<p>O facetamento (<a href="#fig-scatter11" class="quarto-xref">Figura&nbsp;<span>8.15</span></a>) permite verificar que a relação entre o comprimento e o peso dos recém-nascidos é nitidamente linear e semelhante entre os sexos.</p>
</section>
<section id="reta-de-regressão" class="level3" data-number="8.4.8">
<h3 data-number="8.4.8" class="anchored" data-anchor-id="reta-de-regressão"><span class="header-section-number">8.4.8</span> Reta de Regressão</h3>
<p>A função <code>geom_smooth()</code> é uma forma geométrica do <code>ggplot2</code> usada para visualizar tendências ou padrões entre duas variáveis numéricas. Ele adiciona uma linha suavizada ao gráfico, que ajuda a entender a relação entre os dados , especialmente quando há muitos pontos ou quando a relação não é linear. O <code>geom_smooth()</code> ajusta uma curva aos dados, usando métodos estatísticos. A regressão linear usa <code>method = “lm”</code> <a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a>. Por padrão, exibe o intervalo de confiança (veja <a href="12-estimacao.html" class="quarto-xref"><span>Capítulo 12</span></a>), que mostra a incerteza da estimativa da reta. Esta técnica ajuda a identificar padrões que não podem ser visíveis apenas com os pontos brutos.</p>
<p>O código da figura <a href="#fig-scatter8" class="quarto-xref">Figura&nbsp;<span>8.10</span></a> será tomado como base sem a divisão por sexo <a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a>, com modificações, para gerar a reta de regressão.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsci)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN)) <span class="sc">+</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="dv">0</span>),</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> <span class="st">"tomato"</span>,</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"gray20"</span>, </span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">4</span>, </span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, </span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">se =</span><span class="cn">TRUE</span>,</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">color=</span> <span class="st">"darkred"</span>) <span class="sc">+</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_lancet</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Comprimento do Recém-nascido (cm)"</span>) <span class="sc">+</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Peso do Recém-nascido (g)"</span>) <span class="sc">+</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div id="fig-scatter12" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scatter12-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-scatter12-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scatter12-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.16: Gráfico de dispersão com reta de regressão
</figcaption>
</figure>
</div>
</div>
</div>
<p>O gráfico da <a href="#fig-scatter12" class="quarto-xref">Figura&nbsp;<span>8.16</span></a>, mostra um ajuste dos pontos a uma reta, com inclinação ascendente, ou seja uma correlação positiva, à medida que o comprimento do recém-nascido aumenta, aumenta o seu peso ao nascer. Pela forte inclinação da reta. pressupoe-se que esta correlação é alta.<br>
A distância dos pontos à reta é o erro ou resíduo. A melhor reta ajustada é aquela em que a soma dos quadrados da distância de cada ponto (soma dos quadrados residual) em relação à reta é minimizada (veja também <a href="18-regressao.html" class="quarto-xref"><span>Capítulo 18</span></a>).</p>
</section>
</section>
<section id="sec-hist" class="level2" data-number="8.5">
<h2 data-number="8.5" class="anchored" data-anchor-id="sec-hist"><span class="header-section-number">8.5</span> Histograma</h2>
<p>O <strong>histograma</strong> é uma ferramenta gráfica que fornece informações sobre o formato da distribuição e dispersão dos dados, permitindo verificar se existe ou não simetria. É usado para dados contínuos.</p>
<p>No histograma, as frequências observadas são representadas por intervalos de classes de ocorrência que estão no eixo <em>x</em> e a altura das barras, representando a frequência de cada intervalo, no eixo <em>y</em>. A área de cada barra é proporcional à porcentagem de observações de cada intervalo. O <code>geom_histogram()</code> é a geometria para a construção de um histograma. Aqui, há necessidade apenas do eixo <em>x</em>, pois existe uma única variável. A execução do comando retorna a distribuição dessa variável.</p>
<p>Os dados para plotar um histograma, serão provenientes do dataframe <code>dados</code> (<a href="#sec-dados8" class="quarto-xref"><span>Seção 8.2</span></a>), utilizando um filtro para as gestações a termo, designado como <code>dadosRNT</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>dadosRNT <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ig <span class="sc">&gt;=</span> <span class="dv">37</span> <span class="sc">&amp;</span> ig <span class="sc">&lt;</span> <span class="dv">42</span>) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Será construído um histograma simples da variável <code>pesoRN</code> (peso dos recém-nascidos a termo), usando os eguinte código:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT, <span class="fu">aes</span>(<span class="at">x=</span>pesoRN)) <span class="sc">+</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()<span class="sc">+</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">" Peso dos Recém-Nascidos (g)"</span>, </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequência"</span>)  <span class="sc">+</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-hist1" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-hist1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-hist1-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-hist1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.17: Histograma simples
</figcaption>
</figure>
</div>
</div>
</div>
<p>A aparência do histograma da <a href="#fig-hist1" class="quarto-xref">Figura&nbsp;<span>8.17</span></a> permite ter uma idéia da distribuição e simetria dos dados, mas não está com um aspecto agradável, amigável. Mesmo que ele expresse corretamente a sua mensagem, essa mensagem pode ser prejudicada por uma má aparência.<br>
O histograma recebe uma variável numérica (no caso, o peso dos recém-nascidos) e a divide em vários “compartimentos”, os intervalos, representados pelas barras. A escolha do tamanho (amplitude) do intervalo é de extrema importância para a aparência do histograma.<br>
O <code>geom_histogram()</code> tem um argumento, denominado <code>binwidth</code> que permite alterar a amplitude do intervalo. O <code>binwidth</code> é um intervalo e sua unidade é igual a da variável que se está “histogramando”. No exemplo, foi usado o peso do recém-nascido (g). Se o objetivo são intervalos de 200 em 200 gramas, o <code>binwidth = 200</code>. Uma outra maneira, é usar bins que agrupa em intervalos de mesmo tamanho. Por exemplo <code>bins = 15</code>, o <code>geom_histogram()</code> dividirá em 15 intervalos iguais, gerando um histograma semelhante ao da <a href="#fig-hist2" class="quarto-xref">Figura&nbsp;<span>8.18</span></a>. Junto com a alteração dos intervalos, vamos modificar a cor de preenchimento (<code>fill</code>) e bordas (<code>color</code>) das barras (<a href="#fig-hist2" class="quarto-xref">Figura&nbsp;<span>8.18</span></a> ).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT, <span class="fu">aes</span>(<span class="at">x=</span>pesoRN)) <span class="sc">+</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">200</span>,</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fill =</span> <span class="st">"chartreuse"</span>,</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">"darkgreen"</span>)<span class="sc">+</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Peso dos Recém-Nascidos (g)"</span>, </span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequência"</span>)  <span class="sc">+</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-hist2" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-hist2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-hist2-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-hist2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.18: Histograma simples modificado
</figcaption>
</figure>
</div>
</div>
</div>
<p>Com frequência se observa um histograma com curva normal sobreposta (<a href="#fig-hist3" class="quarto-xref">Figura&nbsp;<span>8.19</span></a>) para facilitar a comparação dos dados com a distribuição normal. Isso pode ser conseguido com um código que usa função <code>stat_function()</code> para a construção da curva normal, baseada nos dados (média e desvio padrão da variável <code>pesoRN</code>) e a função <code>after_stat(density)</code>, colocada na estética do histograma, no eixo <em>y</em>, para substituir a frequência pela densidade de probabilidade (veja <a href="09-probabilidades.html#sec-distprob" class="quarto-xref"><span>Seção 9.6</span></a>). O restante do código somente estabelece que a linha da curva será tracejada (<code>linetype = “dashed”</code>), de cor vermelha (<code>color = “red”</code>) e com tamanho 1 (<code>linewidth = 1</code>).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT) <span class="sc">+</span> </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> pesoRN, </span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> <span class="fu">after_stat</span>(density)),</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">binwidth =</span> <span class="dv">200</span>,</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fill =</span> <span class="st">"chartreuse"</span>,</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">colour =</span> <span class="st">"darkgreen"</span>) <span class="sc">+</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_function</span>(<span class="at">fun =</span> dnorm, </span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>                <span class="at">args =</span> <span class="fu">list</span>(<span class="at">mean =</span> <span class="fu">mean</span>(dadosRNT<span class="sc">$</span>pesoRN),</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>                            <span class="at">sd =</span> <span class="fu">sd</span>(dadosRNT<span class="sc">$</span>pesoRN)),</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>                <span class="at">linetype =</span> <span class="st">"dashed"</span>,</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>                <span class="at">linewidth =</span> <span class="dv">1</span>,</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>                <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Peso do Recém-Nascido (g)"</span>, </span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Densidade de Probabilidade"</span>)  <span class="sc">+</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-hist3" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-hist3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-hist3-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-hist3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.19: Histograma com curva normal sobreposta
</figcaption>
</figure>
</div>
</div>
</div>
<p>Na <a href="#fig-hist3" class="quarto-xref">Figura&nbsp;<span>8.19</span></a>, se observa que os pesos dos recém-nascidos se ajustam razoavelmente à curva normal.</p>
</section>
<section id="sec-bxp" class="level2" data-number="8.6">
<h2 data-number="8.6" class="anchored" data-anchor-id="sec-bxp"><span class="header-section-number">8.6</span> Boxplot</h2>
<p>O boxplot é uma representação gráfica de um resumo eficaz, de fácil compreensão, de uma ou mais varáveis numéricas. Fornece uma análise visual da posição, dispersão, simetria, caudas e valores discrepantes (outliers) do conjunto de dados (<a href="#fig-boxplot" class="quarto-xref">Figura&nbsp;<span>8.20</span></a>).</p>
<ul>
<li><p><strong>Posição</strong> – Em relação à posição dos dados, observa-se a linha central do retângulo (a mediana ou segundo quartil).</p></li>
<li><p><strong>Dispersão</strong> – A dispersão dos dados pode ser representada pelo intervalo interquartil (IIQ), tamanho da caixa, que é a diferença entre o terceiro quartil (3ºQ) e o primeiro quartil (1ºQ), ou ainda pela amplitude que é calculada da seguinte maneira: valor máximo – valor mínimo. Embora a amplitude seja de fácil entendimento, o intervalo interquartil é uma estatística mais robusta para medir variabilidade uma vez que não sofre influência de outliers.</p></li>
<li><p><strong>Simetria</strong> – Um conjunto de dados que tem uma distribuição simétrica, terá a linha da mediana no centro do retângulo. Quando a linha da mediana está próxima ao primeiro quartil, os dados são assimétricos positivos e quando a posição da linha da mediana é próxima ao terceiro quartil, os dados são assimétricos negativos. Vale lembrar que a mediana é a medida de tendência central mais indicada quando os dados possuem distribuição assimétrica, uma vez que a média aritmética é influenciada pelos valores extremos.<br>
</p></li>
<li><p><strong>Caudas</strong> – As linhas que vão do retângulo até aos outliers podem fornecer o comprimento das caudas da distribuição.<br>
</p></li>
<li><p><strong>Valores atípicos</strong> (<em>Outliers</em>) – Os valores atípicos indicam possíveis valores discrepantes. No boxplot, as observações são consideradas atípicas quando estão abaixo ou acima dos limites superior e inferior. O limite de detecção de valores atípicos (outliers) é construído utilizando o intervalo interquartil, dado pela distância entre o primeiro e o terceiro quartil. Sendo assim, os limites inferior e superior de detecção de outlier são dados por:</p>
<ul>
<li><p>o Limite Inferior: 1ºQ – (1,5 * IIQ);</p></li>
<li><p>o Limite Superior: 3ºQ + (1,5 * IIQ). Tanto o limite superior como o inferior são representados por (º).</p></li>
<li><p>os Valores extremos: são valores que estão acima ou abaixo de 3 vezes o IIQ e são representados por (*).</p></li>
</ul></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-boxplot" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-boxplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="https://i.imgur.com/Dh2UszX.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-boxplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.20: Anatomia de um Boxplot
</figcaption>
</figure>
</div>
</div>
</div>
<p>Os boxplots são construídos com o <code>geom_boxplot()</code>. Deve-se especificar uma variável quantitativa para o eixo <em>y</em> e uma variável qualitativa para o eixo x (grupo). Se não houver, variável <em>x</em> e tem-se apenas um vetor de valores numéricos, então, ignora-se a variável <em>x</em>.<br>
Para o exemplo de construção de um boxplot, será usada a variável <code>pesoRN</code> do conjunto de dados <code>dadosRNT00</code> carregados na <a href="#sec-grammar" class="quarto-xref"><span>Seção 8.3.1</span></a>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> pesoRN)) <span class="sc">+</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill =</span> <span class="st">"skyblue"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span> (<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Peso do Recém-nascido (g)"</span>) <span class="sc">+</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-bxp1" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bxp1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-bxp1-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bxp1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.21: Boxplot simples
</figcaption>
</figure>
</div>
</div>
</div>
<p>O <code>geom_boxplot()</code> vazio gera um gráfico sem cores. Colocando o preenchimento <code>fill = “skyblue”</code>,tem-se um boxplot de cor azul céu (<a href="#fig-bxp1" class="quarto-xref">Figura&nbsp;<span>8.21</span></a>).</p>
<p>Na aparência do boxplot , é clássico o seu formato com os “bigodes” terminando em “T”, como mostra a <a href="#fig-boxplot" class="quarto-xref">Figura&nbsp;<span>8.20</span></a>, e não um traço simples. Para modificar isso, pode-se criar uma nova camada de barra de erro, usando a função <code>geom_errorbar()</code>, antes de <code>geom_boxblot()</code>. Assim, como o boxplot passa ser a camada mais superficial, ele impede que se visualize a barra de erro na caixa (<a href="#fig-bxp2" class="quarto-xref">Figura&nbsp;<span>8.22</span></a>), desde que ele seja opaco (remover ou zerar o argumento <code>alpha</code>). A função <code>geom_errorbar()</code> normalmente é usada para barras de erro, no entanto, aqui ela está sendo utilizada com <code>stat = "boxplot"</code> <a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a>, o que significa que os cálculos de estatística do boxplot serão aplicados à barra de erro. O argumento <code>width = 0.1</code> ajusta a largura das barras de erro, tornando-as mais estreitas.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> pesoRN)) <span class="sc">+</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="at">stat =</span> <span class="st">"boxplot"</span>, <span class="at">width =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill =</span> <span class="st">"skyblue"</span>) <span class="sc">+</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span> (<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Peso do Recém-nascido (g)"</span>) <span class="sc">+</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-bxp2" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bxp2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-bxp2-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bxp2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.22: Boxplot simples com bigodes em T
</figcaption>
</figure>
</div>
</div>
</div>
<section id="múltiplos-boxplots" class="level3" data-number="8.6.1">
<h3 data-number="8.6.1" class="anchored" data-anchor-id="múltiplos-boxplots"><span class="header-section-number">8.6.1</span> Múltiplos boxplots</h3>
<p>Os boxplots são bastante úteis quando se compara dois grupos, tornando-se uma ferramenta conveniente para compreender rapidamente as diferenças entre esses grupos. Ao usar os boxplots para comparar grupos, deve-se ter cuidado, pois os resumos podem levar à perda de informação que pode induzir erros de interpretação. Considere os boxplots da <a href="#fig-bxp3" class="quarto-xref">Figura&nbsp;<span>8.23</span></a>, comparando o comprimentos de recém-nascidos a termo masculinos e femininos, a mediana dos meninos é mais alta do a das meninas. As meninas apresentam a mediana fora do centro das caixas, indicando um certo grau de assimetria. Mesmo sendo possível obter informações importantes sobre os dados, usando um boxplot, não se pode discernir a distribuição subjacente dos pontos de dados individuais dentro de cada grupo ou o número total de observações.<br>
As cores dos boxplots serão definidas manualmente dentro do <code>geom_boxplot()</code>. Além disso, será adicionada a função <code>theme(legend.postion= "none)</code> para remover a legenda, pois ela é redundante neste gráfico, uma vez que os sexos já estão mencionados no eixo <em>x</em>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, <span class="fu">aes</span>(<span class="at">x =</span> sexo, <span class="at">y =</span> compRN)) <span class="sc">+</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="at">stat =</span> <span class="st">"boxplot"</span>, <span class="at">width =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill=</span> <span class="fu">c</span>(<span class="st">"goldenrod2"</span>, <span class="st">"orangered3"</span>)) <span class="sc">+</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Comprimento dos Recém-Nascidos (cm)"</span>) <span class="sc">+</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.postion=</span> <span class="st">"none"</span>) <span class="sc">+</span>  </span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-bxp3" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bxp3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-bxp3-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bxp3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.23: Comparação de dois grupos com boxplots
</figcaption>
</figure>
</div>
</div>
</div>
<p>Se necessários mais informações, é possível adicionar <em>jitter</em><a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a> no boxplot da (<a href="#fig-bxp4" class="quarto-xref">Figura&nbsp;<span>8.24</span></a>) para torná-lo mais esclarecedor e visualizar melhor a distribuição dos dados.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, <span class="fu">aes</span>(<span class="at">x =</span> sexo, <span class="at">y =</span> compRN)) <span class="sc">+</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="at">stat =</span> <span class="st">"boxplot"</span>, <span class="at">width =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill=</span> <span class="fu">c</span>(<span class="st">"goldenrod2"</span>, <span class="st">"orangered3"</span>)) <span class="sc">+</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">color=</span><span class="st">"grey30"</span>, <span class="at">size=</span><span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Comprimento dos Recém-Nascidos (cm)"</span>) <span class="sc">+</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.postion=</span> <span class="st">"none"</span>) <span class="sc">+</span>  </span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-bxp4" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bxp4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-bxp4-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bxp4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.24: Boxplots com jitter
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="sec-bxphorizontal" class="level3" data-number="8.6.2">
<h3 data-number="8.6.2" class="anchored" data-anchor-id="sec-bxphorizontal"><span class="header-section-number">8.6.2</span> Boxplots horizontais</h3>
<p>Para criar boxplots horizontais, adiciona-se a função <code>coord_flip()</code> à função <code>geom_boxplot()</code> para inverter os eixos. Em um boxplot padrão, a variável categórica está no eixo <em>x</em> e a variável numérica no eixo <em>y</em>. Com <code>coord_flip()</code>, as variáveis são invertidas, colocando a variável categórica no eixo <em>y</em> e a numérica no eixo <em>x</em>, resultando no boxplot horizontal da <a href="#fig-bxp5" class="quarto-xref">Figura&nbsp;<span>8.25</span></a>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, <span class="fu">aes</span>(<span class="at">x =</span> sexo, <span class="at">y =</span> compRN)) <span class="sc">+</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="at">stat =</span> <span class="st">"boxplot"</span>, <span class="at">width =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill=</span> <span class="fu">c</span>(<span class="st">"goldenrod2"</span>, <span class="st">"orangered3"</span>)) <span class="sc">+</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Comprimento dos Recém-Nascidos (cm)"</span>) <span class="sc">+</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.postion=</span> <span class="st">"none"</span>) <span class="sc">+</span>  </span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-bxp5" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bxp5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-bxp5-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bxp5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.25: Boxplots horizontais
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="sec-violin" class="level2" data-number="8.7">
<h2 data-number="8.7" class="anchored" data-anchor-id="sec-violin"><span class="header-section-number">8.7</span> Gráfico de violino</h2>
<p>Os gráficos de violino permitem visualizar a distribuição de uma variável numérica para um ou vários grupos. No <code>ggplot2</code>, são construídos com o <code>geom_violin()</code> e, com frequência, substituem os boxplots, principalmente, quando se tem uma amostra muito grande e usar o <em>jitter</em> no boxplot pode não ser eficaz, pois os pontos podem se sobrepor e tornar a figura inelegível.</p>
<p>Cada “violino” representa uma variável de agrupamento. A forma representa a estimativa de densidade de probabilidade da variável: quanto mais pontos de dados em um intervalo específico, mais largo será o violino para esse intervalo. É muito parecido com um boxplot, mas permite uma compreensão mais profunda da distribuição.</p>
<p>O gráfico de violino é uma técnica poderosa de visualização de dados, pois permite comparar a classificação de vários grupos e sua distribuição. São particularmente adequados quando a quantidade de dados é grande e é impossível mostrar observações individuais. Para conjuntos de dados pequenos, um boxplot com jitter é provavelmente uma opção melhor, pois realmente mostra todas as informações.</p>
<p>Para o exemplo prático, será usada uma amostra proveniente do conjunto de dados <code>dados</code> (veja <a href="#sec-dados8" class="quarto-xref"><span>Seção 8.2</span></a>), com filtrado para as gestações a termo, <code>dadosRNT</code>. Serão utilizadas as variáveis <code>pesoRN</code> e <code>categFumo</code>, tabagismo entre as gestantes, de acordo com a intensidade (não fumante, fumante leve. fumante moderada, fumante pesada) . O objetivo é observar visualmente o impacto do tabagismo sobre os pesos dos recém-nascidos .</p>
<p>Para construir o gráfico de violino, serão usados os argumentos <code>trim = FALSE</code>, para não aparar as caudas, e <code>draw_quantiles = c(0.25, 0.5, 0.75)</code>, para traçar os quartis (<a href="#fig-violino1" class="quarto-xref">Figura&nbsp;<span>8.26</span></a>). As cores das categoria foram definidas pelo <code>ggplot2</code>.<br>
Reiterando, função <code>theme(legend.position = "none")</code> será colocada para evitar que a legenda das categorias apareça, uma vez que ela é explicita no gráfico.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT, <span class="fu">aes</span>(<span class="at">x=</span>categFumo, <span class="at">y=</span>pesoRN,         </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill=</span>categFumo)) <span class="sc">+</span> </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">trim =</span> <span class="cn">FALSE</span>,</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">draw_quantiles =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>)) <span class="sc">+</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tabagismo Materno"</span>, </span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Peso do Recém-Nascido (g)"</span>)  <span class="sc">+</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-violino1" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-violino1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-violino1-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-violino1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.26: Gráfico de violino com os quartis
</figcaption>
</figure>
</div>
</div>
</div>
<p>Uma alteração interessante que pode ser feita no gráfico de violino, é colocar um boxplot, dentro do mesmo (<a href="#fig-violino2" class="quarto-xref">Figura&nbsp;<span>8.27</span></a>), faz o efeito do argumento <code>draw_quantiles()</code>, usado na <a href="#fig-violino1" class="quarto-xref">Figura&nbsp;<span>8.26</span></a>. Facilita a interpretação e, na opinião do autor, é mais bonito e elegante. O argumento <code>width = 0.5</code>, na função <code>geom_boxplot()</code>, estabelece a largura do boxplot, evitando que o boxplot se estenda para fora do “violino”.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT, <span class="fu">aes</span>(<span class="at">x=</span>categFumo, <span class="at">y=</span>pesoRN, <span class="at">fill=</span>categFumo)) <span class="sc">+</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">trim =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tabagismo Materno"</span>, </span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Peso do Recém-Nascido (g)"</span>)  <span class="sc">+</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-violino2" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-violino2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-violino2-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-violino2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.27: Gráfico de violino com boxplots
</figcaption>
</figure>
</div>
</div>
</div>
<p>A observação da <a href="#fig-violino2" class="quarto-xref">Figura&nbsp;<span>8.27</span></a> mostra uma tendência do peso do recém-nascido diminuir à medida que intensidade do fumo aumenta. O gráfico sugere que esta tendência não é sugnificativa, pois as caixas se sobrepõem.</p>
<p>Para obter uma versão horizontal da <a href="#fig-violino1" class="quarto-xref">Figura&nbsp;<span>8.26</span></a>, chama-se a função <code>coord_flip()</code> <a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a>que permite inverter os eixos <em>x</em> e <em>y</em> e, assim, tornar a interpretação mais intuitiva, mais amigável (?).</p>
<p>Para <u>interpretar um gráfico de violino</u>, observar o seguinte:</p>
<ul>
<li><p>Forma do violino, observando a largura em diferentes pontos para entender onde os dados se concentram.</p></li>
<li><p>A linha mediana e a caixa do boxplot associado indicam a mediana e o intervalo interquartil, respectivamente.</p></li>
<li><p>Se o violino é simétrico em torno da mediana, a distribuição dos dados é aproximadamente simétrica.</p></li>
<li><p>Se a parte superior do violino é mais larga, os dados podem ser assimétricos, inclinados para valores maiores.</p></li>
<li><p>Em múltiplas categorias, pode-se comparar rapidamente as distribuições. Diferentes formas e larguras entre as categorias fornecem uma visão clara das variações entre elas.</p></li>
</ul>
</section>
<section id="gráfico-de-barras" class="level2" data-number="8.8">
<h2 data-number="8.8" class="anchored" data-anchor-id="gráfico-de-barras"><span class="header-section-number">8.8</span> Gráfico de barras</h2>
<p>O gráfico de barras é uma análogo do histograma, onde as barras, ao contrário deste, são separadas. Os gráficos de barra exibem a distribuição (frequências) de uma variável categórica através de barras verticais ou horizontais, ou sobrepostas. A função <code>geom_bar()</code> permite delinear o gráfico de barras da <a href="#fig-bar1" class="quarto-xref">Figura&nbsp;<span>8.28</span></a>.</p>
<p>Para os exemplos práticos, será usada uma amostra proveniente do conjunto de dados dados (<a href="#sec-dados8" class="quarto-xref"><span>Seção 8.2</span></a>), manipulando as mesmas variáveis: <code>categFumo</code> , tabagismo materno, e <code>categIdade</code> , idade materna categorizada. Em outros exemplos de grágicos barras, serão usadas as variáveis <code>fumo</code> (fumante e não fumante), <code>para</code> (número de filhos anteriores) e <code>sexo</code> do recém-nascido.</p>
<p>O gráfico de barras inicial servirá para para visualizar a prevalência (<a href="22-medidasOcorrencia.html#sec-prevalencia" class="quarto-xref"><span>Seção 22.2.1</span></a>) de fumo na gestação categorizada pela intensidade do fumo.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados) <span class="sc">+</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> categFumo, </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> <span class="fu">after_stat</span>(count<span class="sc">/</span><span class="fu">sum</span>(count))))<span class="sc">+</span> </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tabagismo Materno"</span>, </span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Proporção por categoria"</span>)  <span class="sc">+</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-bar1" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bar1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-bar1-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bar1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.28: Gráfico de barras padrão do ggplot2
</figcaption>
</figure>
</div>
</div>
</div>
<p>As cores de preenchimento das barras podem ser alteradas, de acordo com a variável categórica. As cores serão estabelecidas de acordo com o padrão do ggplot2 (<a href="#fig-bar2" class="quarto-xref">Figura&nbsp;<span>8.29</span></a>). O gráfico retornará uma legenda, mostrando o que representa cada cor. Ela é desnecessária porque fica explicito, no eixo <em>x</em>, o que cada barra representa. Portanto, é uma boa conduta remover a legenda com a função <code>theme (legend.position = "none")</code>, como já visto em outras ocasiões (boxplots e gráfico de violino):</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados) <span class="sc">+</span> </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> categFumo, </span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> <span class="fu">after_stat</span>(count<span class="sc">/</span><span class="fu">sum</span>(count)),</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> categFumo))<span class="sc">+</span> </span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tabagismo Materno"</span>, </span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">y =</span> <span class="st">"Proporção por categoria"</span>)  <span class="sc">+</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-bar2" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bar2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-bar2-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bar2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.29: Gráfico de barras com as cores das barras estabelecidas pelo ggplot2
</figcaption>
</figure>
</div>
</div>
</div>
<p>As cores padrão do ggplot2 podem ser alteradas, como foi visto na <a href="#sec-coresr" class="quarto-xref"><span>Seção 8.4.6</span></a>, escolhendo manualmente, ou usando uma paleta, como as apresentadas pelo pacote <code>ggsci</code>, <code>RColorBrewer</code> ou <code>paletteer</code>. No exemplo, será usada a paleta do periódico <em>New England Journal of Medicine</em> (NEJM), <a href="#fig-bar3" class="quarto-xref">Figura&nbsp;<span>8.30</span></a>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsci)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados) <span class="sc">+</span> </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> categFumo, </span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> <span class="fu">after_stat</span>(count<span class="sc">/</span><span class="fu">sum</span>(count)),</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> categFumo))<span class="sc">+</span> </span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_nejm</span>() <span class="sc">+</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tabagismo Materno"</span>, </span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Proporção por categoria"</span>)  <span class="sc">+</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-bar3" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bar3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-bar3-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bar3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.30: Gráfico de barras com cores da paleta NEJM
</figcaption>
</figure>
</div>
</div>
</div>
<section id="proporção-ou-porcentagem" class="level3" data-number="8.8.1">
<h3 data-number="8.8.1" class="anchored" data-anchor-id="proporção-ou-porcentagem"><span class="header-section-number">8.8.1</span> Proporção ou porcentagem</h3>
<p>Na <a href="#fig-bar3" class="quarto-xref">Figura&nbsp;<span>8.30</span></a>, a unidade do eixo <em>y</em> encontra-se como uma proporção <code>y = after_stat(count/sum(count)</code>, ou seja, y = <em>frequência por categoria</em>/<em>total de observações</em>.<br>
É possível modificar para porcentagem (<a href="#fig-bar3a" class="quarto-xref">Figura&nbsp;<span>8.31</span></a>), empregando a função <code>percent_format()</code> do <code>pacote scales</code>. O código é praticamente igual, apenas acrescentar o argumento <code>labels = percent_format(accuracy = 0.1, decimal.mark = “,”)</code> dentro da função <code>scale_y_continuous()</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsci)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados) <span class="sc">+</span> </span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> categFumo, </span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> <span class="fu">after_stat</span>(count<span class="sc">/</span><span class="fu">sum</span>(count)),</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> categFumo))<span class="sc">+</span> </span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_nejm</span>() <span class="sc">+</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span> (<span class="at">labels =</span> <span class="fu">percent_format</span> (<span class="at">accuracy =</span> <span class="fl">0.1</span>,</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">decimal.mark =</span> <span class="st">","</span>)) <span class="sc">+</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tabagismo Materno"</span>, </span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Porcentagem por categoria"</span>)  <span class="sc">+</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-bar3a" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bar3a-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-bar3a-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bar3a-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.31: Gráfico de barras com porcentagem no eixo y
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="controle-da-largura-da-barra-com-width" class="level3" data-number="8.8.2">
<h3 data-number="8.8.2" class="anchored" data-anchor-id="controle-da-largura-da-barra-com-width"><span class="header-section-number">8.8.2</span> Controle da largura da barra com width</h3>
<p>Para controlar a largura e o espaço entre as barras, num gráfico de barras no <code>ggplot2</code>, usar o argumento <code>width</code> dentro da função <code>geom_bar()</code>, definindo um valor entre 0 e 1 (ou um valor fixo). Um valor de 1 representa a largura total, ou seja, não haverá espaço entre as barras, como no histograma.</p>
<p>Como exemplo, será alterado a largura das barras do gráfico da figura <a href="#fig-bar3" class="quarto-xref">Figura&nbsp;<span>8.30</span></a> . Se o objetivo é que as barras sejam mais estreitas e com mais espaço entre elas, deve-se definir um valor para <code>width</code> inferior a 0.9 (padrão). Na <a href="#fig-bar3b" class="quarto-xref">Figura&nbsp;<span>8.32</span></a>, será usado <code>width = 0.5</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsci)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados) <span class="sc">+</span> </span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> categFumo, </span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> <span class="fu">after_stat</span>(count<span class="sc">/</span><span class="fu">sum</span>(count)),</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> categFumo),</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">width =</span> <span class="fl">0.5</span>)<span class="sc">+</span> </span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_nejm</span>() <span class="sc">+</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tabagismo Materno"</span>, </span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Proporção por categoria"</span>)  <span class="sc">+</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-bar3b" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bar3b-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-bar3b-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bar3b-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.32: Gráfico de barras com cores da paleta NEJM
</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercício
</div>
</div>
<div class="callout-body-container callout-body">
<p>Qual a diferença entre <code>geom_bar()</code> e <code>geom_col()</code>? Construir o mesmo gráfico de barras da <a href="#fig-bar3b" class="quarto-xref">Figura&nbsp;<span>8.32</span></a>, usando a <code>geom_col()</code>.</p>
</div>
</div>
<p><u>Resposta</u> <a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a></p>
</section>
<section id="gráfico-de-barras-empilhadas" class="level3" data-number="8.8.3">
<h3 data-number="8.8.3" class="anchored" data-anchor-id="gráfico-de-barras-empilhadas"><span class="header-section-number">8.8.3</span> Gráfico de barras empilhadas</h3>
<p>O gráfico de barras empilhadas é ideal para visualizar a proporção de cada grupo dentro de uma categoria. A altura total da barra representa a contagem total para a variável no eixo <em>x</em>, e as cores dentro da barra mostram a distribuição da segunda variável.</p>
<p>Para criá-lo, mapear a primeira variável para o <strong>eixo x</strong> e a segunda variável para a <strong>estética fill</strong>. A função <code>geom_bar()</code> faz o empilhamento por padrão.</p>
<p>Com os mesmos dados, usados até nos gráficos de barras (<a href="#sec-dados8" class="quarto-xref"><span>Seção 8.2</span></a>), agora serão trabalhadas as variáveis <code>categIdade</code> e <code>fumo</code> com o objetivo de ver a proporção de tabagismo por faixa etária. Como aprimoramentos, se pretende colocar as porcentagens de fumantes em cada uma das faixas etária no topo das barras.</p>
<p>Em primeiro lugar, calcular as <em>proporções</em> de fumante em cada uma das faixas etárias e a <em>posição vertical dos rótulos no eixo y</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>proporcoes_fumo <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(categIdade, fumo) <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(categIdade) <span class="sc">%&gt;%</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">posicao_y =</span> <span class="fu">sum</span>(n) <span class="sc">-</span> (<span class="fl">0.5</span> <span class="sc">*</span> n),</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">total_faixa =</span> <span class="fu">sum</span>(n),</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">proporcao_fumo =</span> n <span class="sc">/</span> total_faixa) <span class="sc">%&gt;%</span> </span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fumo <span class="sc">==</span> <span class="st">"Fumante"</span>)</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>proporcoes_fumo</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 6
# Groups:   categIdade [3]
  categIdade   fumo        n posicao_y total_faixa proporcao_fumo
  &lt;fct&gt;        &lt;fct&gt;   &lt;int&gt;     &lt;dbl&gt;       &lt;int&gt;          &lt;dbl&gt;
1 &lt; 20 anos    Fumante    35      202.         219          0.160
2 20 a 35 anos Fumante   235      874.         992          0.237
3 &gt; 35 anos    Fumante    31      142.         157          0.197</code></pre>
</div>
</div>
<p>Após realizado o cálculo das proporções de fumantes em cada faixa etária, constrói-se o gráfico. Para colocar as porcentagens no gráfico<a href="#fn15" class="footnote-ref" id="fnref15" role="doc-noteref"><sup>15</sup></a>, será usada a <code>geometria geom_text()</code>, informando essas porcentagens e a localização no eixo <em>x</em> e <em>y</em>, resultando na <a href="#fig-bar4" class="quarto-xref">Figura&nbsp;<span>8.33</span></a>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> categIdade, <span class="at">fill =</span> fumo)) <span class="sc">+</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">color =</span><span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"gray90"</span>,<span class="st">"skyblue"</span>)) <span class="sc">+</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Faixa Etária"</span>, </span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequência"</span>,</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="cn">NULL</span>)  <span class="sc">+</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> proporcoes_fumo,</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">x =</span> categIdade,</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> posicao_y,</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">percent</span>(proporcao_fumo, <span class="at">accuracy =</span> <span class="fl">0.1</span>)),</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">4</span>,</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"black"</span> ) <span class="sc">+</span> </span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span> (<span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.05</span>))) <span class="sc">+</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Faixa Etária"</span>,</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequência"</span>,</span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-bar4" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bar4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-bar4-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bar4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.33: Gráfico de barras empilhadas
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="gráfico-de-barras-lado-a-lado" class="level3" data-number="8.8.4">
<h3 data-number="8.8.4" class="anchored" data-anchor-id="gráfico-de-barras-lado-a-lado"><span class="header-section-number">8.8.4</span> Gráfico de barras lado a lado</h3>
<p>O gráfico de barras lado a lado (ou agrupado) é útil para comparar diretamente a contagem de cada grupo entre as categorias. As barras de uma mesma categoria são dispostas lado a lado para facilitar a comparação visual. Para criá-lo, se faz de maneira semelhante das barras empilhadas. Mapear a primeira variável para o eixo <em>x</em> e a segunda para a estética <code>fill</code> e adicionar o argumento <code>position = "dodge"</code> dentro do <code>geom_bar()</code>. Este argumento diz ao <code>ggplot2</code> para não empilhar as barras, mas sim colocá-las lado a lado.<br>
O <code>geom_text ()</code> usa <code>position_dodge()</code> para replicar o comportamento das barras. O argumento <code>width = 0.9</code> é o valor padrão para a largura das barras no <code>ggplot2</code> e garante um alinhamento perfeito. O gráfico de barras lado a lado é, portanto construído assim:</p>
<ol type="1">
<li>Incialmente, calcula-se as proporções das categorias e a posição <em>y</em> dos rótulos:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>prop_fumo <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(categIdade, fumo) <span class="sc">%&gt;%</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(categIdade) <span class="sc">%&gt;%</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calcula a posição vertical do ponto médio de cada segmento</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">posicao_y =</span> (n) <span class="sc">-</span> <span class="dv">18</span>,</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_faixa =</span> <span class="fu">sum</span>(n),</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">proporcao_fumo =</span> n <span class="sc">/</span> total_faixa)</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>prop_fumo</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
# Groups:   categIdade [3]
  categIdade   fumo            n posicao_y total_faixa proporcao_fumo
  &lt;fct&gt;        &lt;fct&gt;       &lt;int&gt;     &lt;dbl&gt;       &lt;int&gt;          &lt;dbl&gt;
1 &lt; 20 anos    Fumante        35        17         219          0.160
2 &lt; 20 anos    Não fumante   184       166         219          0.840
3 20 a 35 anos Fumante       235       217         992          0.237
4 20 a 35 anos Não fumante   757       739         992          0.763
5 &gt; 35 anos    Fumante        31        13         157          0.197
6 &gt; 35 anos    Não fumante   126       108         157          0.803</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Com esses dados, constrói-se o gráfico:</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> categIdade, <span class="at">fill =</span> fumo)) <span class="sc">+</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>,</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span><span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"gray90"</span>,<span class="st">"skyblue"</span>)) <span class="sc">+</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Faixa Etária"</span>, </span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequência"</span>) <span class="sc">+</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> prop_fumo,</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">x =</span> categIdade,</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> posicao_y,</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">percent</span>(proporcao_fumo, <span class="at">accuracy =</span> <span class="fl">0.1</span>)),</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">3.5</span>,</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"black"</span> ,</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.9</span>)) <span class="sc">+</span> </span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span> (<span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.10</span>))) <span class="sc">+</span></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Faixa Etária"</span>,</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequência"</span>,</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-bar5" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bar5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-bar5-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bar5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.34: Gráfico de barras lado a lado
</figcaption>
</figure>
</div>
</div>
</div>
<p>A <a href="#fig-bar5" class="quarto-xref">Figura&nbsp;<span>8.34</span></a> mostra as porcentagens de fumantes em cada uma das categorias de uma forma bem clara.</p>
</section>
<section id="gráfico-de-barra-para-uma-variável-numérica-discreta" class="level3" data-number="8.8.5">
<h3 data-number="8.8.5" class="anchored" data-anchor-id="gráfico-de-barra-para-uma-variável-numérica-discreta"><span class="header-section-number">8.8.5</span> Gráfico de barra para uma variável numérica discreta</h3>
<p>Uma variável numérica discreta é um tipo de variável que assume valores inteiros, resultantes de contagens, e que não podem assumir valores fracionários entre eles. A medição ocorre através da contagem das observações (<a href="02-dados.html#sec-tipovariavel" class="quarto-xref"><span>Seção 2.5</span></a>). Para a representação gráfica, utiliza-se um gráfico de barras . O resultado é semelhante a um histograma com as barras separadas. Para o exemplo, serão usados os mesmos dados empregados na construção dos gráficos de barras empilhadas e lado a lado, provenientes do conjunto de dados <code>dadosMater.xlsx</code>. Nesses dados, existe a variável para que representa o número de filhos que a gestante teve antes do atual. É uma variável numérica discreta que será mostrada visualmente por gráfico de barras simples (<a href="#fig-bar6" class="quarto-xref">Figura&nbsp;<span>8.35</span></a>).</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Importante
</div>
</div>
<div class="callout-body-container callout-body">
<p>Apesar da variável para ser uma variável numérica discreta, para a construção do gráfico ela foi <strong>transformada em um fator</strong> para informar ao <code>ggplot2</code> que todos os rótulos do eixo <em>x</em> (nº de filhos anteriores) devem aparecer, inclusive o referente a 7 filhos anteriores, apesar de não existir na amostra.</p>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criar uma tabela com contagem completa, incluindo zeros</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>contagem <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">table</span>(<span class="fu">factor</span>(dados<span class="sc">$</span>para, <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">11</span>)))</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular proporção de cada barra</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>contagem<span class="sc">$</span>prop <span class="ot">&lt;-</span> contagem<span class="sc">$</span>Freq <span class="sc">/</span> <span class="fu">sum</span>(contagem<span class="sc">$</span>Freq)</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotar</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(contagem, <span class="fu">aes</span>(<span class="at">x =</span> Var1, <span class="at">y =</span> prop)) <span class="sc">+</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, </span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> <span class="st">"tomato"</span>, <span class="at">color =</span> <span class="st">"gray30"</span>) <span class="sc">+</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> scales<span class="sc">::</span><span class="fu">percent</span>(prop, <span class="at">accuracy =</span> <span class="fl">0.1</span>),</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> prop <span class="sc">+</span> <span class="fl">0.01</span>), <span class="at">size =</span> <span class="fl">3.5</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span> (<span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.05</span>))) <span class="sc">+</span></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Número de filhos anteriores ao atual"</span>, </span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Proporção"</span>) <span class="sc">+</span></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-bar6" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bar6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-bar6-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bar6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.35: Gráfico de barras de uma variável discreta
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="gráfico-de-barra-de-erro" class="level3" data-number="8.8.6">
<h3 data-number="8.8.6" class="anchored" data-anchor-id="gráfico-de-barra-de-erro"><span class="header-section-number">8.8.6</span> Gráfico de barra de erro</h3>
<p>Um gráfico de barra de erro é uma ferramenta visual que mostra a variabilidade de dados em um ponto específico. Ele consiste em pontos ou barras que representam as médias (ou outras estatísticas) de um conjunto de dados, com linhas verticais (ou horizontais) que indicam o intervalo de confiança, o desvio padrão ou o erro padrão da média. Essas linhas verticais são conhecidas como “barras de erro”. Usado para comparar as médias de diferentes grupos, mostrando a variabilidade dentro de cada grupo. É visto com frequência em pesquisas científicas e publicações para apresentar os resultados experimentais com suas respectivas variabilidades. As barras de erro dão uma ideia geral de quão precisa é uma medição. O cenário para a construção de um gráfico de barra de erro é o tabagismo na gestação e o peso dos recém-nascidos, onde as barras representarão a média do peso ao nascer (g) e as barras de erro com intervalo de confiança de 95% (veja <a href="12-estimacao.html" class="quarto-xref"><span>Capítulo 12</span></a>), calculado usando média <span class="math inline">\(\pm\)</span> margem de erro, onde a margem de <span class="math inline">\(erro = 1.96 × erro \ padrão\)</span>.</p>
<ol type="1">
<li>Resumo dos dados: Após carregar os dados necessários (<code>dadosRNT</code>), se fará um resumo dos mesmos que informará as respectivas médias, desvios padrão e margens de erro por grupo.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>  resumo <span class="ot">&lt;-</span> dadosRNT <span class="sc">%&gt;%</span> </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(sexo, fumo) <span class="sc">%&gt;%</span> </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">media =</span> <span class="fu">mean</span>(pesoRN, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">dp =</span> <span class="fu">sd</span>(pesoRN, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">me =</span> <span class="fl">1.96</span> <span class="sc">*</span> dp<span class="sc">/</span><span class="fu">sqrt</span>(n),</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">min =</span><span class="fu">min</span>(pesoRN, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">max =</span><span class="fu">max</span>(pesoRN, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">.groups =</span> <span class="st">'drop'</span>)</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(resumo)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 8
  sexo      fumo            n media    dp    me   min   max
  &lt;fct&gt;     &lt;fct&gt;       &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 Masculino Fumante       122 3162.  464.  82.4  1440  4410
2 Masculino Não fumante   470 3303.  453.  40.9  1425  4950
3 Feminino  Fumante       110 2998.  503.  94.1  1715  4620
4 Feminino  Não fumante   383 3190.  435.  43.6  2090  4485</code></pre>
</div>
</div>
<ol start="2" type="1">
<li><p>Construção do gráfico (<a href="#fig-bar7" class="quarto-xref">Figura&nbsp;<span>8.36</span></a>) , conforme explicado abaixo:</p>
<p>a) O gráfico inicia com a colocação a variável <code>sexo</code> no eixo <em>x</em> e média da variável <code>pesoRN</code> no <em>y</em> e estabelecendo cores diferentes para o fator <code>sexo</code>;</p>
<p>b) <code>geom_bar(stat = “identity”</code> usa os valores reais da média para a altura das barras, <code>color = “black”</code> estabelece a cor preta para o contorno das barras e <code>position_dodge(0.9)</code> separa as barras lado a lado para cada grupo de <code>fumo</code>;</p>
<p>c) <code>geom_point (position = position_dodge(0.9)</code> adiciona um ponto sobre cada barra (pode ser útil para destacar a média). É opcional;</p>
<p>d) <code>geom_errorbar()</code> adiciona a barra de erro acima da média, com base na barra de erro <code>me</code>. Poderia ter sido usado o desvio padrão. O erro está opcionalmente colocado acima da barra, mas poderia ser acima e abaixo ;</p>
<p>e) <code>labs()</code> define os rótulos dos eixos e da legenda;</p>
<p>f) <code>coord_cartesian(ylim = c(0, 3500))</code> limita o eixo <em>y</em> de 0 a 3500, sem cortar dados fora desse intervalo. Entretanto, para reduzir a altura das barras, pode-se cortar dados, por exemplo começar em1000, 1500 ou, mesmo, 2000, uma vez que não existem recém-nascidos, nesta amostra, com menos de 2000 g e o foco é a média e o IC95%;</p>
<p>g) <code>scale_fill_manual(values = c("gray80"</code>, <code>"darkslategray1"))</code> estabelece as cores para os níveis de <code>fumo</code>;</p>
<p>h) <code>scale_y_continuous( breaks = seq(0, 3500, 500) , expand = expansion(add = c(0, 0.05)))</code> - a primeira parte define os rótulos do eixo <em>y</em> de 500 em 500, começando em 0 <a href="#fn16" class="footnote-ref" id="fnref16" role="doc-noteref"><sup>16</sup></a>, a segunda adiciona um pequeno espaço acima das barras para não cortar os rótulos (adiante será discutido sobre isso);</p>
<p>i) Por último colocou o tema clássico<a href="#fn17" class="footnote-ref" id="fnref17" role="doc-noteref"><sup>17</sup></a> do <code>ggplot2</code> com fonte maior para melhorar a leitura.</p></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(resumo, <span class="fu">aes</span>(<span class="at">x=</span>sexo, <span class="at">y=</span>media, <span class="at">fill=</span>fumo)) <span class="sc">+</span>      </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">"identity"</span>, <span class="at">color=</span><span class="st">"black"</span>, </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">position=</span><span class="fu">position_dodge</span>(<span class="fl">0.9</span>)) <span class="sc">+</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="fl">0.9</span>)) <span class="sc">+</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> media, <span class="at">ymax =</span> media<span class="sc">+</span>me), <span class="at">width=</span><span class="fl">0.2</span>,</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">position=</span><span class="fu">position_dodge</span>(.<span class="dv">9</span>)) <span class="sc">+</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">""</span>, </span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Peso do Recém-Nascido(g)"</span>,</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">1500</span>, <span class="dv">3500</span>)) <span class="sc">+</span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"gray80"</span>, </span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"darkslategray1"</span>)) <span class="sc">+</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span> (<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">1500</span>, <span class="dv">3500</span>, <span class="dv">500</span>),</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>                      <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.05</span>))) <span class="sc">+</span></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-bar7" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bar7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-bar7-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bar7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.36: Gráfico de barras de erro
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="manipulando-outras-partes-dos-gráficos" class="level2" data-number="8.9">
<h2 data-number="8.9" class="anchored" data-anchor-id="manipulando-outras-partes-dos-gráficos"><span class="header-section-number">8.9</span> Manipulando outras partes dos gráficos</h2>
<section id="mudando-o-nome-dos-eixos-o-nome-e-a-ordem-dos-rótulos" class="level3" data-number="8.9.1">
<h3 data-number="8.9.1" class="anchored" data-anchor-id="mudando-o-nome-dos-eixos-o-nome-e-a-ordem-dos-rótulos"><span class="header-section-number">8.9.1</span> Mudando o nome dos eixos, o nome e a ordem dos rótulos</h3>
<p>Para modificar o nome dos eixos, utiliza-se, com frequência, as funções <code>xlab()</code> e <code>ylab()</code> como no gráfico da <a href="#fig-scatter4" class="quarto-xref">Figura&nbsp;<span>8.6</span></a> . O mesmo trabalho de alteração dos rótulos pode ser feito com a função labs() como no gráfico da figura <a href="#fig-scatter10" class="quarto-xref">Figura&nbsp;<span>8.14</span></a> .</p>
<p>O nome e ordem dos rótulos podem ser modificados, usando a função <code>scale_x_discrete()</code> com os argumentos <code>limits =</code> que coloca os níveis na ordem desejada e <code>labels =</code> que coloca os novos nomes<a href="#fn18" class="footnote-ref" id="fnref18" role="doc-noteref"><sup>18</sup></a> na ordem estabelecida pelo argumento <code>limits =</code>.</p>
<p>Observando, por exemplo, o gráfico da <a href="#fig-bar3" class="quarto-xref">Figura&nbsp;<span>8.30</span></a>, onde se usou a paleta do NEJM, verifica-se que os rótulos do eixo <em>x</em> estão como: <code>fumante_leve</code>, <code>fumante_moderada</code>, <code>fumante_pesada</code> e <code>nao_fumante</code>. Esses nomes não estão prontos para publicação e o ideal é que sejam modificados para <code>Leve</code>, <code>Moderado</code>, <code>Pesado</code> e <code>Não</code>, uma vez que o título do eixo x será modificado para <code>Tabagismo Materno</code>. Aproveitando, pode-se modificar a ordem das categorias, colocando, por exemplo, as fumantes pesadas como primeira categoria na <a href="#fig-bar8" class="quarto-xref">Figura&nbsp;<span>8.37</span></a>, a seguir as fumantes moderadas, leves e não fumantes para ter uma lógico crescente da intensidade de tabagismo materno.</p>
<ol type="1">
<li>Cálculo das proporções de tabagismo em cada uma das categorias para adicionar ao gráfico, melhorando as informações</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>prop_fumo <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(categFumo) <span class="sc">%&gt;%</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calcula a posição vertical do ponto médio de cada segmento</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">posicao_y =</span> (n) <span class="sc">+</span> <span class="dv">30</span>,</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_faixa =</span> <span class="fu">sum</span>(n),</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">proporcao_fumo =</span> n <span class="sc">/</span> total_faixa)</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>prop_fumo</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
  categFumo            n posicao_y total_faixa proporcao_fumo
  &lt;fct&gt;            &lt;int&gt;     &lt;dbl&gt;       &lt;int&gt;          &lt;dbl&gt;
1 nao_fumante       1067      1097        1368         0.780 
2 fumante_leve       157       187        1368         0.115 
3 fumante_moderada    37        67        1368         0.0270
4 fumante_pesada     107       137        1368         0.0782</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Construção do gráfico que resultará na <a href="#fig-bar8" class="quarto-xref">Figura&nbsp;<span>8.37</span></a>.</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados, <span class="fu">aes</span>(<span class="at">x =</span> categFumo, <span class="at">fill =</span> categFumo)) <span class="sc">+</span> </span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span><span class="st">"dodge"</span>, <span class="at">color =</span><span class="st">"black"</span>)<span class="sc">+</span> </span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_nejm</span>() <span class="sc">+</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tabagismo Materno"</span>, </span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequência"</span>)  <span class="sc">+</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="st">"fumante_pesada"</span>, </span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"fumante_moderada"</span>, </span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"fumante_leve"</span>,</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"nao_fumante"</span>),</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Pesado"</span>, </span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Moderado"</span>, </span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Leve"</span>,</span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Não"</span>)) <span class="sc">+</span></span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> prop_fumo,</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">x =</span> categFumo,</span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> posicao_y,</span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a>                <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">percent</span>(proporcao_fumo, <span class="at">accuracy =</span> <span class="fl">0.1</span>)),</span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">4</span>,</span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"black"</span> ) <span class="sc">+</span></span>
<span id="cb53-20"><a href="#cb53-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size=</span><span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb53-21"><a href="#cb53-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-bar8" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bar8-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-bar8-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bar8-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.37: Gráfico de barras modificado
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="título-e-subtítulo-do-gráfico" class="level3" data-number="8.9.2">
<h3 data-number="8.9.2" class="anchored" data-anchor-id="título-e-subtítulo-do-gráfico"><span class="header-section-number">8.9.2</span> Título e subtítulo do gráfico</h3>
<p>Nem sempre necessários, o título, o subtítulo ou uma nota de rodapé podem ser adicionados ao gráfico através da função <code>labs()</code>, usada anteriormente (por ex. na <a href="#fig-scatter10" class="quarto-xref">Figura&nbsp;<span>8.14</span></a>) para colocar rótulos nos eixos <em>x</em> e <em>y</em>. Além de argumentos para colocar título e subtítulo, a função <code>labs()</code> tem argumento para nota de rodapé, <code>caption</code>.</p>
<p>Como exemplo, será plotado um gráfico com boxplots que ilustrem o impacto do tabagismo materno sobre o peso do recém-nascido. Os dados serão provenientes da amostra dadosRNT (<a href="#sec-violin" class="quarto-xref"><span>Seção 8.7</span></a>).<br>
Serão usados todos os argumento da função <code>labs()</code>, e se repetirá o que foi feito na construção do gráfico da <a href="#fig-bar8" class="quarto-xref">Figura&nbsp;<span>8.37</span></a>, alterando os nomes dos rótulos do eixo <em>x</em>. O código do gráfico da <a href="#fig-bxp6" class="quarto-xref">Figura&nbsp;<span>8.38</span></a> vai ser atribuído a um objeto denominado <code>bxp</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>bxp <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dadosRNT, <span class="fu">aes</span>(<span class="at">x =</span> categFumo, </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">y =</span> pesoRN,</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">fill =</span> categFumo)) <span class="sc">+</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_boxplot</span>(<span class="at">geom =</span> <span class="st">"errorbar"</span>, <span class="at">width =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel2"</span>)  <span class="sc">+</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> <span class="st">"mean"</span>, </span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">colour =</span> <span class="st">"red"</span>, </span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">size =</span> <span class="dv">3</span>, </span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">geom =</span> <span class="st">"point"</span>) <span class="sc">+</span></span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Tabagismo Materno e Peso do Recém Nascido"</span>, </span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Maternidade do Hospital Geral de Caxias do Sul, 2008"</span>,</span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Tabagismo Materno"</span>,</span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Peso dos Recém-Nascidos (g)"</span>,</span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"O ponto vermelho é a média de cada grupo"</span>) <span class="sc">+</span></span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="st">"nao_fumante"</span>, </span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"fumante_leve"</span>, </span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"fumante_moderada"</span>, </span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"fumante_pesada"</span>),</span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Não"</span>, <span class="st">"Leve"</span>, </span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Moderado"</span>, <span class="st">"Pesado"</span>)) <span class="sc">+</span></span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb54-23"><a href="#cb54-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb54-24"><a href="#cb54-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb54-25"><a href="#cb54-25" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(bxp)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-bxp6" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bxp6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-bxp6-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bxp6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.38: Boxplots do impacto do tabagismo materno no peso do recém-nascido
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="modificação-dos-limites-dos-eixos" class="level3" data-number="8.9.3">
<h3 data-number="8.9.3" class="anchored" data-anchor-id="modificação-dos-limites-dos-eixos"><span class="header-section-number">8.9.3</span> Modificação dos limites dos eixos</h3>
<p>O pacote <code>ggplot2</code> possui uma família de funções <code>scale_</code> para modificar as propriedades referentes às escalas do gráfico. Como é possível ter escalas de números, categorias, cores, datas, entre outras, é disponibilizada uma função específica para cada tipo de escala.</p>
<p>Cada tipo fundamental é manipulado por uma das três funções construtoras de escala: <code>continuous_scale()</code>, <code>discrete_scale()</code> e <code>binned_scale()</code>.</p>
<p>No gráfico da <a href="#fig-bxp6" class="quarto-xref">Figura&nbsp;<span>8.38</span></a>, os pesos dos recém-nascidos estão dispostos em uma escala que varia a cada 1000 g. Para modificar esses limites, pode-se usar a função <code>scale_y_continuous()</code> para ter intervalos de 500 g.</p>
<p>O gráfico da <a href="#fig-bxp6" class="quarto-xref">Figura&nbsp;<span>8.38</span></a> foi designado para um objeto denominado <code>bxp</code>. Isto facilita o trabalho, pois não há necessidade de repetir todo o código que gerou o gráfico, apenas as modificações:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>bxp <span class="sc">+</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>,</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>,</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">face =</span> <span class="st">"bold"</span>,</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">color =</span> <span class="st">"darkgreen"</span>)) <span class="sc">+</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">1000</span>, <span class="dv">5000</span>, <span class="dv">500</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-bxp7" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bxp7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-bxp7-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bxp7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.39: Modificação dos limites do eixo y: 500 em 500
</figcaption>
</figure>
</div>
</div>
</div>
<p>Junto com a modificação dos limites dos eixo da <a href="#fig-bxp7" class="quarto-xref">Figura&nbsp;<span>8.39</span></a>, manipulou-se o título e subtítulo, usando a função <code>theme()</code> e foi aumentado o tamanho da fonte, usou-se negrito e a cor do subtítulo passou a ser “darkgreen”.</p>
</section>
<section id="modificação-da-expansão" class="level3" data-number="8.9.4">
<h3 data-number="8.9.4" class="anchored" data-anchor-id="modificação-da-expansão"><span class="header-section-number">8.9.4</span> Modificação da expansão</h3>
<p>Voltando aos gráficos de barra, todos, com exceção do gráfico da <a href="#fig-bar7" class="quarto-xref">Figura&nbsp;<span>8.36</span></a>, tem algo que incomoda ao autor: abaixo do valor 0 (zero) existe uma expansão, ou seja um espaço abaixo do 0. Isto, visualmente, é desagradável.</p>
<p>Para que as barras tenham início exatamente no 0 (zero), pode-se empregar a função <code>scale_y_continuous()</code> com o argumento <code>expand = expansion (add = c(0,0.05))</code>, significando que não se expande nada abaixo do 0 e se adiciona 5 unidades para cima, criando uma margem superior. Comparar a <a href="#fig-bar9" class="quarto-xref">Figura&nbsp;<span>8.40</span></a> com a <a href="#fig-bar3" class="quarto-xref">Figura&nbsp;<span>8.30</span></a>. O rótulos do eixo <em>y</em> também foram corrigidos.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsci)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados) <span class="sc">+</span> </span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> categFumo, </span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> <span class="fu">after_stat</span>(count<span class="sc">/</span><span class="fu">sum</span>(count)),</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> categFumo))<span class="sc">+</span> </span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_nejm</span>() <span class="sc">+</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span> (<span class="at">labels =</span> <span class="fu">percent_format</span> (<span class="at">accuracy =</span> <span class="fl">0.1</span>,</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">decimal.mark =</span> <span class="st">","</span>)) <span class="sc">+</span></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span> (<span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.05</span>))) <span class="sc">+</span></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="st">"nao_fumante"</span>, </span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"fumante_leve"</span>, </span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"fumante_moderada"</span>, </span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"fumante_pesada"</span>),</span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a>                   <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Não"</span>, <span class="st">"Leve"</span>, </span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Moderado"</span>, <span class="st">"Pesado"</span>)) <span class="sc">+</span></span>
<span id="cb56-18"><a href="#cb56-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tabagismo Materno"</span>, </span>
<span id="cb56-19"><a href="#cb56-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Proporção por categoria"</span>)  <span class="sc">+</span></span>
<span id="cb56-20"><a href="#cb56-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb56-21"><a href="#cb56-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-bar9" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-bar9-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-bar9-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bar9-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.40: Gráfico de barras com remoção do espaço abaixo de 0 (zero)
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="ajustando-o-layout-e-as-margens-no-ggplot2" class="level2" data-number="8.10">
<h2 data-number="8.10" class="anchored" data-anchor-id="ajustando-o-layout-e-as-margens-no-ggplot2"><span class="header-section-number">8.10</span> Ajustando o layout e as margens no ggplot2</h2>
<section id="modificação-das-margens-com-a-função-theme" class="level3" data-number="8.10.1">
<h3 data-number="8.10.1" class="anchored" data-anchor-id="modificação-das-margens-com-a-função-theme"><span class="header-section-number">8.10.1</span> Modificação das margens com a função theme()</h3>
<p>Usando o gráfico da <a href="#fig-scatter5" class="quarto-xref">Figura&nbsp;<span>8.7</span></a>, repetido aqui e designando-o a um objeto com nome de gdsip:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>gdisp <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> dadosRNT100,</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>                <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN)) <span class="sc">+</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="dv">0</span>),</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"gray20"</span>,</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span><span class="st">"steelblue"</span>,</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, </span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="dv">1</span>,</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Peso do Recém-nascido (g)"</span>) <span class="sc">+</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Comprimento do Recém-nascido (cm)"</span>)<span class="sc">+</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(gdisp)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="08-graficos_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption>Gráfico de dispersão</figcaption>
</figure>
</div>
</div>
</div>
<p>O objeto <code>gdisp</code> contém o gráfico de dispersão da <a href="#fig-scatter5" class="quarto-xref">Figura&nbsp;<span>8.7</span></a> e pode ser modificado sem ter que digitar todos os comandos novamente. Será usado para exemplicar como promover um aumento das margens, partindo do padrão do tema usado:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_classic</span>()<span class="sc">$</span>plot.margin</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.5points 5.5points 5.5points 5.5points</code></pre>
</div>
</div>
<p>Para aumentar as margens usa-se:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>gdisp <span class="sc">+</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">80</span>, <span class="at">r =</span> <span class="dv">80</span>, <span class="at">b =</span> <span class="dv">80</span>, <span class="at">l =</span> <span class="dv">80</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-scatter13" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-scatter13-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="08-graficos_files/figure-html/fig-scatter13-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-scatter13-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;8.41: Gráfico de dispersão com margem reduzida
</figcaption>
</figure>
</div>
</div>
</div>
<p>A função <code>margin()</code> define as margens em pontos <a href="#fn19" class="footnote-ref" id="fnref19" role="doc-noteref"><sup>19</sup></a>. Um ponto (pt) equivale a 1/72 de polegada, ou aproximadamente 0,35 milímetros. É a mesma unidade usada para definir tamanho de fonte. portanto, quando se observa um valor de 80, significa que o gráfico terá 80 pontos de margem no topo, à direita, à esquerda e na base. Isto dá aproximadamente 28 mm de espaço em cada lado. As letras <code>t</code>, <code>r</code>, <code>b</code> e <code>l</code> equivalem, respectivamente a <code>top</code>, <code>right</code>, <code>bottom</code> e <code>left</code>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Dica prática
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ao exportar gráficos para PDF ou PNG e quiser controlar o layout com precisão (por exemplo, para publicação), ajustar as margens com <code>margin()</code> é essencial para evitar que elementos fiquem cortados ou apertados demais.</p>
</div>
</div>


<!-- -->

<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-field2012graphs" class="csl-entry" role="listitem">
Field, Andy, Jeremy Miles, e Zoë Field. 2012. <span>«Exploring data with graphs»</span>. Em <em>Discovering statistics using R</em>, 117. Sage Publications, Ltd.
</div>
<div id="ref-holtz2025colorbrewer" class="csl-entry" role="listitem">
Holtz, Yan. 2025. <span>«R Color Brewer’s palettes»</span>. <em>– the R Graph Gallery</em>. <a href="https://r-graph-gallery.com/38-rcolorbrewers-palettes.html">https://r-graph-gallery.com/38-rcolorbrewers-palettes.html</a>.
</div>
<div id="ref-hvitfeldt2024paletteer" class="csl-entry" role="listitem">
Hvitfeldt, Emil. 2024. <span>«Use any color palette with paletteer»</span>. <em>The R Graph Gallery</em>. <a href="https://r-graph-gallery.com/package/paletteer.html">https://r-graph-gallery.com/package/paletteer.html</a>.
</div>
<div id="ref-wickham2010layered" class="csl-entry" role="listitem">
Wickham, Hadley. 2010. <span>«A layered grammar of graphics»</span>. <em>Journal of Computational and Graphical Statistics</em> 19 (1). Taylor &amp; Francis: 3–28.
</div>
<div id="ref-wickham2016ggplot2" class="csl-entry" role="listitem">
———. 2016. <em>ggplot2: Elegant Graphics for Data Analysis</em>. Springer-Verlag New York. <a href="https://ggplot2.tidyverse.org">https://ggplot2.tidyverse.org</a>.
</div>
<div id="ref-wickham2023ggplot2" class="csl-entry" role="listitem">
Wickham, Hadley, Danielle Navarro, e Thomas Lin Pedersen. 2023. <em>ggplot2: Elegant Graphics for Data Analysis (3e)</em>. <a href="http://www.new.pmean.com/ggplot2-book/">http://www.new.pmean.com/ggplot2-book/</a>.
</div>
</div>
</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p><strong>categIdade</strong> <span class="math inline">\(\to\)</span> &lt; 20 anos, 20 a 35 anos e &gt; 35 anos; <strong>categFumo</strong> <span class="math inline">\(\to\)</span> Não fumante, Fumante leve: &lt;= 10 cigarros/dia, Fumante moderada: &gt; 10 a &lt; 20 cigarros/dia, Fumante pesada: &gt;= 20 cigarros/ dia<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Gestações com idade gestacional igual ou acima de 37 semanas e abaixo de 42 semanas.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>O adicionar aqui é literal, pois isto é feito com o sinal (+).<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>A legenda também pode ser colocada em outras partes do gráfico: “top” (superior), “left” (esquerda), “rigth” (direita) e ser removida (“none”).<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Não acontece nada! O&nbsp;<em>R</em>&nbsp;ignora o código e retorna um gráfico com as sua cor padrão, a preta.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>A função <code>paletteer_c()</code> é usada para variáveis contínuas; a <code>paletteer_d()</code> para variáveis categóricas e a <code>paletteer_dinamic()</code> é pouco usada, mas serve para paletas que mudam conforme o número de categorias.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Além da cor, os grupos em um gráfico também podem ser diferenciados por meio das estéticas <strong>shape</strong> e <strong>size</strong>. Para isso, substituir o mapeamento <code>fill = sexo</code> por <code>shape = sexo</code> ou <code>size = sexo</code>.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>Além da função específica para o facetamento, a cor agora é determinada com preenchimento dos pontos ( <code>fill=”tomato”</code>) colocado dentro do <code>geom_point()</code> e houve uma diminuição do tamanho dos pontos (<code>size = 4</code>) .<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9"><p>Outros métodos: <code>“loess”</code>, <code>“glm”</code>, <code>“gam”</code>. Para mais informações, consulte a ajuda <code>?loess</code>, <code>?gam</code> ou <code>?glm</code> ou <code>NULL</code>, onde a escolha é automática: usa <code>“loess”</code> para &lt; 1000 pontos e <code>“gam”</code> para &gt; 1000.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10"><p>A <a href="#fig-scatter11" class="quarto-xref">Figura&nbsp;<span>8.15</span></a> mostrou que a correlação não parece diferir entre os sexos.<a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11"><p>O padrão é <code>stat = "identity"</code>, o que significa que os valores das barras de erro devem ser fornecidos diretamente no conjunto de dados, sem cálculos adicionais.<a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn12"><p>Prestar atenção para o fato de que o <em>jitter</em> é aleatório, por isso em cada execução do código os pontos se distribuem em posições diferentes.<a href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn13"><p>Consulte a construção da <a href="#fig-bxp5" class="quarto-xref">Figura&nbsp;<span>8.25</span></a><a href="#fnref13" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn14"><p>A <code>geom_bar()</code> conta as ocorrências e usa a altura para representar essa contagem, enquanto <code>geom_col()</code> usa a altura para representar o valor especificado na estética <em>y</em> . Ambas as funções aceitam o argumento <code>width</code>. Enquanto o <code>geom_bar()</code> com <code>after_start()</code> calcula os valores automaticamente, o <code>geom_col()</code> exige que se forneça os valores de <em>y</em> (as proporções) diretamente.<a href="#fnref14" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn15"><p>Este acréscimo das porcentagens dentro do gráfico é opcional. Para fazer o mesmo gráfico sem esta informação, não há necessidade dos cálculos das proporções e nem do <code>geom_text()</code> que deve ser removido.<a href="#fnref15" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn16"><p>Modificar se no <code>coord_cartesian()</code> o valor inicial for alterado, por exemplo, 1000, 1500 ou 2000.<a href="#fnref16" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn17"><p>Pode ser qualquer tema, este fica bem por ser bem limpo, sem grades, apenas eixo <em>x</em> e <em>y</em>.<a href="#fnref17" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn18"><p>Pode-se aproveitar aqui para trocar os nomes ou , simplesmente, corrigir acentuação que, às vezes, não foi colocada no dataframe.<a href="#fnref18" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn19"><p>A margem pode ser definida também em centímetros (cm), usando o mesmo comando, mas especificando que é em “cm”. Por exemplo, para aumentar 2 cm em todos os lados: <code>theme(plot.margin = unit(c(2, 2, 2, 20, "cm")</code><a href="#fnref19" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copiada");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copiada");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./07-tabelas.html" class="pagination-link" aria-label="Tabelas">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Tabelas</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./09-probabilidades.html" class="pagination-link" aria-label="Introdução à Teoria das Probabilidades">
        <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Introdução à Teoria das Probabilidades</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Código fonte</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb61" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Gráficos {#sec-graficos}</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>Para descrever os dados e visualizar o que está acontecendo, recomenda-se utilizar um gráfico adequado. O que é adequado depende principalmente do tipo de dados, bem como das características particulares do que se quer explorar. Além disso, um gráfico em um relatório sempre é um fator de "impacto". Ou seja, pode ter um efeito positivo no leitor ou fazê-lo abandonar a leitura. Finalmente, um gráfico de frequência pode ser utilizado para ilustrar, explicar uma situação complexa onde palavras ou uma tabela podem ser confusos, extensos ou de outro modo insuficiente. Por outro lado, deve-se evitar usar gráficos onde poucas palavras expressam claramente o que se quer mostrar. Aconselha-se que, ao analisar os dados, é importante inspecioná-los como se fossem uma imagem, uma fotografia, ver como eles se parecem, qual o seu aspecto, e só então pensar em interpretar os aspectos vitais da estatística <span class="co">[</span><span class="ot">@field2012graphs</span><span class="co">]</span>.\</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>O R básico fornece uma grande variedade de funções para visualizar dados, elas de uma maneira relativamente simples permitem a construção de gráficos que facilitam a interpretação tanto de variáveis categórica como numéricas. Existe uma farta bibliografia para a construção de gráficos, utilizando o R básico, mas a <span class="co">[</span><span class="ot">The R Graph Gallery</span><span class="co">](https://r-graph-gallery.com/)</span> responde a maioria das dúvidas, apesar de ter seu foco em <span class="in">`tidyverse`</span> (veja @sec-tidyverse) e <span class="in">`ggplot2.`</span>\</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>Neste livro, a ênfase será no pacote <span class="in">`ggplot2`</span> <span class="co">[</span><span class="ot">@wickham2016ggplot2</span><span class="co">]</span>. Este pacote é uma ferramenta extremamente versátil que oferece uma estrutura com grande flexibilidade para exibir os dados através de gráficos. O <span class="in">`gpglot2`</span> não é apenas uma instrumento para criar gráficos, mas uma maneira de pensar sobre a visualização de dados de uma forma mais estruturada e poderosa.</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="fu">## Pacotes necessários neste capítulo</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>Certifique-se que estes pacotes estejam instalados e carregados, utilizando o pacote <span class="in">`pacman`</span> (consulte a @sec-pacman):</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, readxl, scales, ggsci,  paletteer, knitr, RColorBrewer, scico)</span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a><span class="fu">## Fonte de dados para este capítulo {#sec-dados8}</span></span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a>Os dados serão provenientes do conjunto de dados apresentado na @sec-dadosMater, denominado de <span class="in">`dadosMater.xlsx`</span> e que pode ser encontrado para baixar <span class="co">[</span><span class="ot">aqui</span><span class="co">](https://github.com/petronioliveira/Arquivos/blob/main/dadosMater.xlsx)</span>.Serão selecionadas as variáveis de interesse e adicionadas variáveis que categorizam a idade da mãe e a intensidade do tabagismo durante a gestação<span class="ot">[^08-graficos-1]</span>. Além disso, serão feitas transformações para fatores das variáveis numéricas que na realidade são fatores. O código inicia com a semente <span class="in">`set.seed()`</span> para garantir a repetibilidade.</span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a><span class="ot">[^08-graficos-1]: </span>**categIdade** $\to$ \&lt; 20 anos, 20 a 35 anos e \&gt; 35 anos; **categFumo** $\to$ Não fumante, Fumante leve: <span class="sc">\&lt;</span>= 10 cigarros/dia, Fumante moderada: <span class="sc">\&gt;</span> 10 a <span class="sc">\&lt;</span> 20 cigarros/dia, Fumante pesada: <span class="sc">\&gt;</span>= 20 cigarros/ dia</span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-25"><a href="#cb61-25" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-26"><a href="#cb61-26" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb61-27"><a href="#cb61-27" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"dados/dadosMater.xlsx"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb61-28"><a href="#cb61-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(idadeMae,fumo, quantFumo, ig, pesoRN, compRN, para, sexo) <span class="sc">%&gt;%</span> </span>
<span id="cb61-29"><a href="#cb61-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fumo =</span> <span class="fu">factor</span>(fumo, </span>
<span id="cb61-30"><a href="#cb61-30" aria-hidden="true" tabindex="-1"></a>                       <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb61-31"><a href="#cb61-31" aria-hidden="true" tabindex="-1"></a>                       <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Fumante"</span>, <span class="st">"Não fumante"</span>)),</span>
<span id="cb61-32"><a href="#cb61-32" aria-hidden="true" tabindex="-1"></a>         <span class="at">sexo =</span> <span class="fu">factor</span>(sexo, </span>
<span id="cb61-33"><a href="#cb61-33" aria-hidden="true" tabindex="-1"></a>                       <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb61-34"><a href="#cb61-34" aria-hidden="true" tabindex="-1"></a>                       <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Masculino"</span>, <span class="st">"Feminino"</span>)),</span>
<span id="cb61-35"><a href="#cb61-35" aria-hidden="true" tabindex="-1"></a>         <span class="at">categIdade =</span> <span class="fu">case_when</span>(</span>
<span id="cb61-36"><a href="#cb61-36" aria-hidden="true" tabindex="-1"></a>           idadeMae <span class="sc">&lt;</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">"&lt; 20 anos"</span>,</span>
<span id="cb61-37"><a href="#cb61-37" aria-hidden="true" tabindex="-1"></a>           idadeMae <span class="sc">&gt;=</span> <span class="dv">20</span> <span class="sc">&amp;</span> idadeMae <span class="sc">&lt;=</span> <span class="dv">35</span> <span class="sc">~</span> <span class="st">"20 a 35 anos"</span>,</span>
<span id="cb61-38"><a href="#cb61-38" aria-hidden="true" tabindex="-1"></a>           idadeMae <span class="sc">&gt;</span> <span class="dv">35</span> <span class="sc">~</span> <span class="st">"&gt; 35 anos"</span>),</span>
<span id="cb61-39"><a href="#cb61-39" aria-hidden="true" tabindex="-1"></a>         <span class="at">categIdade =</span> <span class="fu">factor</span>(categIdade, </span>
<span id="cb61-40"><a href="#cb61-40" aria-hidden="true" tabindex="-1"></a>                             <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"&lt; 20 anos"</span>, </span>
<span id="cb61-41"><a href="#cb61-41" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">"20 a 35 anos"</span>,</span>
<span id="cb61-42"><a href="#cb61-42" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">"&gt; 35 anos"</span>)),</span>
<span id="cb61-43"><a href="#cb61-43" aria-hidden="true" tabindex="-1"></a>         <span class="at">categFumo =</span> <span class="fu">case_when</span>(</span>
<span id="cb61-44"><a href="#cb61-44" aria-hidden="true" tabindex="-1"></a>           quantFumo <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">"nao_fumante"</span>,</span>
<span id="cb61-45"><a href="#cb61-45" aria-hidden="true" tabindex="-1"></a>           quantFumo <span class="sc">&lt;=</span> <span class="dv">10</span> <span class="sc">~</span><span class="st">"fumante_leve"</span>,</span>
<span id="cb61-46"><a href="#cb61-46" aria-hidden="true" tabindex="-1"></a>           quantFumo <span class="sc">&gt;</span> <span class="dv">10</span>  <span class="sc">&amp;</span> quantFumo <span class="sc">&lt;</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">"fumante_moderada"</span>,</span>
<span id="cb61-47"><a href="#cb61-47" aria-hidden="true" tabindex="-1"></a>           quantFumo <span class="sc">&gt;=</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">"fumante_pesada"</span>),</span>
<span id="cb61-48"><a href="#cb61-48" aria-hidden="true" tabindex="-1"></a>         <span class="at">categFumo =</span> <span class="fu">factor</span>(categFumo, </span>
<span id="cb61-49"><a href="#cb61-49" aria-hidden="true" tabindex="-1"></a>                            <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"nao_fumante"</span>, </span>
<span id="cb61-50"><a href="#cb61-50" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"fumante_leve"</span>,</span>
<span id="cb61-51"><a href="#cb61-51" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"fumante_moderada"</span>,</span>
<span id="cb61-52"><a href="#cb61-52" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"fumante_pesada"</span>))) </span>
<span id="cb61-53"><a href="#cb61-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-54"><a href="#cb61-54" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dados)</span>
<span id="cb61-55"><a href="#cb61-55" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-56"><a href="#cb61-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-57"><a href="#cb61-57" aria-hidden="true" tabindex="-1"></a><span class="fu">## Pacote ggplot2 {#sec-ggplot2}</span></span>
<span id="cb61-58"><a href="#cb61-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-59"><a href="#cb61-59" aria-hidden="true" tabindex="-1"></a>O <span class="in">`ggplot2`</span> é um pacote da linguagem R voltado para a visualização de dados, oferecendo uma abordagem poderosa e elegante baseada na *Gramática dos Gráficos* <span class="co">[</span><span class="ot">@wickham2010layered</span><span class="co">]</span>.</span>
<span id="cb61-60"><a href="#cb61-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-61"><a href="#cb61-61" aria-hidden="true" tabindex="-1"></a><span class="fu">### Gramática dos Gráficos {#sec-grammar}</span></span>
<span id="cb61-62"><a href="#cb61-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-63"><a href="#cb61-63" aria-hidden="true" tabindex="-1"></a>O R base usa funções específicas para a construção de um gráfico, por exemplo, <span class="in">`hist()`</span> para criar um histograma ou a função plot() que é uma função mais genérica que produz um gráfico de dispersão, no R, quando são passados a ela dois vetores numéricos ou boxplots quando são fornecidos dados categóricos.</span>
<span id="cb61-64"><a href="#cb61-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-65"><a href="#cb61-65" aria-hidden="true" tabindex="-1"></a>Tomando as variáveis <span class="in">`compRN`</span> e <span class="in">`pesoRN`</span> de uma amostra de de 100 observações do conjunto <span class="in">`dados`</span>, com filtro para as gestações a termo <span class="ot">[^08-graficos-2]</span>, será construído um gráfico de dispersão (@fig-scatter1) com a função<span class="in">`plot()`</span> do R base:</span>
<span id="cb61-66"><a href="#cb61-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-67"><a href="#cb61-67" aria-hidden="true" tabindex="-1"></a><span class="ot">[^08-graficos-2]: </span>Gestações com idade gestacional igual ou acima de 37 semanas e abaixo de 42 semanas.</span>
<span id="cb61-68"><a href="#cb61-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-71"><a href="#cb61-71" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-72"><a href="#cb61-72" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb61-73"><a href="#cb61-73" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb61-74"><a href="#cb61-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-75"><a href="#cb61-75" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb61-76"><a href="#cb61-76" aria-hidden="true" tabindex="-1"></a>dadosRNT100 <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span> </span>
<span id="cb61-77"><a href="#cb61-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ig <span class="sc">&gt;=</span> <span class="dv">37</span> <span class="sc">&amp;</span> ig <span class="sc">&lt;</span> <span class="dv">42</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb61-78"><a href="#cb61-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n=</span><span class="dv">100</span>)</span>
<span id="cb61-79"><a href="#cb61-79" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-80"><a href="#cb61-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-83"><a href="#cb61-83" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-84"><a href="#cb61-84" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-85"><a href="#cb61-85" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb61-86"><a href="#cb61-86" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-scatter1</span></span>
<span id="cb61-87"><a href="#cb61-87" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-88"><a href="#cb61-88" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-89"><a href="#cb61-89" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.cap: "Gráfico de dispersão produzido com uma função específica plot(), do R base"</span></span>
<span id="cb61-90"><a href="#cb61-90" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-91"><a href="#cb61-91" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-92"><a href="#cb61-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-93"><a href="#cb61-93" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span> (<span class="at">x =</span><span class="fu">jitter</span>(dadosRNT100<span class="sc">$</span>compRN,<span class="dv">10</span>),</span>
<span id="cb61-94"><a href="#cb61-94" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> dadosRNT100<span class="sc">$</span>pesoRN,</span>
<span id="cb61-95"><a href="#cb61-95" aria-hidden="true" tabindex="-1"></a>      <span class="at">ylab =</span> <span class="st">"Peso de Recém-nascido (g)"</span>,</span>
<span id="cb61-96"><a href="#cb61-96" aria-hidden="true" tabindex="-1"></a>      <span class="at">xlab =</span> <span class="st">"Comprimento do Recém-nascido (cm)"</span>,</span>
<span id="cb61-97"><a href="#cb61-97" aria-hidden="true" tabindex="-1"></a>      <span class="at">cex.axis =</span> <span class="fl">0.8</span>,</span>
<span id="cb61-98"><a href="#cb61-98" aria-hidden="true" tabindex="-1"></a>      <span class="at">las =</span> <span class="dv">1</span>,</span>
<span id="cb61-99"><a href="#cb61-99" aria-hidden="true" tabindex="-1"></a>      <span class="at">bty =</span> <span class="st">"L"</span>,</span>
<span id="cb61-100"><a href="#cb61-100" aria-hidden="true" tabindex="-1"></a>      <span class="at">pch =</span> <span class="dv">19</span>,</span>
<span id="cb61-101"><a href="#cb61-101" aria-hidden="true" tabindex="-1"></a>      <span class="at">cex =</span> <span class="fl">1.5</span>,</span>
<span id="cb61-102"><a href="#cb61-102" aria-hidden="true" tabindex="-1"></a>      <span class="at">col =</span> <span class="st">"cyan4"</span>)</span>
<span id="cb61-103"><a href="#cb61-103" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-104"><a href="#cb61-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-105"><a href="#cb61-105" aria-hidden="true" tabindex="-1"></a>Este gráfico não difere muito do gráfico da @fig-scatter5 no seu aspecto final, produzido no <span class="in">`ggplot2`</span>. Entretanto, a filosofia de construção dos gráficos é muito diferente.</span>
<span id="cb61-106"><a href="#cb61-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-107"><a href="#cb61-107" aria-hidden="true" tabindex="-1"></a>Em vez de se pensar em funções específicas para cada tipo de gráfico, o <span class="in">`ggplot2`</span> permite que se construa gráficos combinando diferentes componentes. Pode-se pensar nisso como se fosse a montagem de um quebra-cabeça, onde cada peça representa uma parte do gráfico. Essa abordagem modular e intuitiva é o que torna o <span class="in">`ggplot2`</span> tão flexível e poderoso.</span>
<span id="cb61-108"><a href="#cb61-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-109"><a href="#cb61-109" aria-hidden="true" tabindex="-1"></a>Os principais componentes combinados para criar um gráfico no <span class="in">`ggplot2`</span> são:</span>
<span id="cb61-110"><a href="#cb61-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-111"><a href="#cb61-111" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Dados (Data)**: cada camada deve ter dados associados. É o conjunto de dados que se quer visualizar. Geralmente, ele deve estar em um formato **tidy** (arrumado), onde cada coluna é uma variável e cada linha é uma observação (@sec-tibble).</span>
<span id="cb61-112"><a href="#cb61-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-113"><a href="#cb61-113" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Mapeamentos Estéticos**: Os mapeamentos estéticos são definidos com a função <span class="in">`aes()`</span>. A parte onde se associa as variáveis do conjunto de dados a propriedades visuais do gráfico, como os eixos *x* e *y*, a cor, o tamanho, a forma e a transparência. Por exemplo, é possível mapear a variável peso do recém-nascido para o eixo *y* e a variável comprimento do recém-nascido para o eixo *x*. Os mapeamentos estéticos podem ser fornecidos na <span class="in">`ggplot()`</span> , chamada inicial, em camadas individuais ou em uma combinação de ambos. Todas essas chamadas criam a mesma especificação de plotagem.</span>
<span id="cb61-114"><a href="#cb61-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-115"><a href="#cb61-115" aria-hidden="true" tabindex="-1"></a>    Escalas (*Scales*) podem ser usadas para controlar a forma dos mapeamentos estéticos. Pode-se usar escalas para ajustar cores, tamanhos e a aparência dos eixos.</span>
<span id="cb61-116"><a href="#cb61-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-117"><a href="#cb61-117" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Geometrias (Geoms)**: Formas geométricas que representam os dados. É aqui que se define o tipo de gráfico a ser criado. Alguns exemplos são:</span>
<span id="cb61-118"><a href="#cb61-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-119"><a href="#cb61-119" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`geom_point()`</span> para um gráfico de dispersão (pontos).</span>
<span id="cb61-120"><a href="#cb61-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-121"><a href="#cb61-121" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`geom_line()`</span> para um gráfico de linha.</span>
<span id="cb61-122"><a href="#cb61-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-123"><a href="#cb61-123" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`geom_bar()`</span> para um gráfico de barras.</span>
<span id="cb61-124"><a href="#cb61-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-125"><a href="#cb61-125" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`geom_errorbar()`</span>: barras de erro.</span>
<span id="cb61-126"><a href="#cb61-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-127"><a href="#cb61-127" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`geom_bar(stat = "identity")`</span>: um gráfico de barras de resumos pré-calculados</span>
<span id="cb61-128"><a href="#cb61-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-129"><a href="#cb61-129" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`geom_histogram()`</span> para um histograma.</span>
<span id="cb61-130"><a href="#cb61-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-131"><a href="#cb61-131" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`geom_boxplot()`</span> para um boxplot.</span>
<span id="cb61-132"><a href="#cb61-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-133"><a href="#cb61-133" aria-hidden="true" tabindex="-1"></a>    Pode-se adicionar múltiplas camadas que permitem combinar diferentes tipos de geoms em uma única visualização. Por exemplo, é possível colocar uma linha de tendência (<span class="in">`geom_smooth()`</span>) em cima de um gráfico de dispersão (<span class="in">`geom_point()`</span>), veja a @fig-scatter12.</span>
<span id="cb61-134"><a href="#cb61-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-135"><a href="#cb61-135" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Estatísticas**: O <span class="in">`ggplot2`</span> não permite a colocação direta de estatísticas dentro dos geoms. A forma mais comum de adicionar estatísticas em um gráfico é usando a função <span class="in">`stat_`</span>. As funções <span class="in">`stat_`</span> calculam as estatísticas (como média, mediana, contagem) e, em seguida, as representam no gráfico, criando uma camada de dados calculados.</span>
<span id="cb61-136"><a href="#cb61-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-137"><a href="#cb61-137" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`stat_summary`</span>: adiciona um resumo estatístico a cada grupo. Usada para adicionar a média, mediana ou desvio padrão em um geom já existente, como um gráfico de dispersão ou de barras.</span>
<span id="cb61-138"><a href="#cb61-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-139"><a href="#cb61-139" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`stat_smooth`</span>: Adiciona uma linha de tendência (como regressão linear) com um intervalo de confiança.</span>
<span id="cb61-140"><a href="#cb61-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-141"><a href="#cb61-141" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`stat_bin`</span>: Calcula a contagem de cada *bin* e os plota como um histograma.</span>
<span id="cb61-142"><a href="#cb61-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-143"><a href="#cb61-143" aria-hidden="true" tabindex="-1"></a>    A partir das últimas versões do <span class="in">`ggplot2`</span>, é possível mapear variáveis calculadas pelo <span class="in">`stat_`</span> diretamente em uma estética, como *y*, *size* ou *label*. Isso dá uma grande flexibilidade.</span>
<span id="cb61-144"><a href="#cb61-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-145"><a href="#cb61-145" aria-hidden="true" tabindex="-1"></a><span class="in">    Em vez de usar as funções `stat_`, é possível calcular as estatísticas em um passo separado usando o `dplyr` e, em seguida, plotar esses dados pré-calculados usando `ggplot2`.</span></span>
<span id="cb61-146"><a href="#cb61-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-147"><a href="#cb61-147" aria-hidden="true" tabindex="-1"></a><span class="in">    -   Calcule as estatísticas usando `group_by()` e `summarize()` do `dplyr`.</span></span>
<span id="cb61-148"><a href="#cb61-148" aria-hidden="true" tabindex="-1"></a><span class="in">    -   Crie o gráfico usando os novos dados calculados.</span></span>
<span id="cb61-149"><a href="#cb61-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-150"><a href="#cb61-150" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Ajustes de posição**: aplicam pequenos ajustes na posição dos elementos dentro de uma camada. Por exemplos, há três ajustes que são úteis em gráficos de pontos</span>
<span id="cb61-151"><a href="#cb61-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-152"><a href="#cb61-152" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`position_nudge()`</span>: mover pontos por um deslocamento fixo.</span>
<span id="cb61-153"><a href="#cb61-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-154"><a href="#cb61-154" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`position_jitter()`</span>: adicione um pouco de ruído aleatório a cada posição (@fig-scatter4).</span>
<span id="cb61-155"><a href="#cb61-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-156"><a href="#cb61-156" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`position_jitterdodge()`</span>: desviar de pontos dentro de grupos e depois adicionar um pouco de ruído aleatório. Na construção do gráfico de dispersão será mostrado exemplo desses ajustes (@sec-jitter).</span>
<span id="cb61-157"><a href="#cb61-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-158"><a href="#cb61-158" aria-hidden="true" tabindex="-1"></a>    Para o gráfico de barras, pode-se aplicar alguns ajustes:\</span>
<span id="cb61-159"><a href="#cb61-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-160"><a href="#cb61-160" aria-hidden="true" tabindex="-1"></a><span class="in">    -   `position_stack()`: empilhar barras (ou áreas) sobrepostas umas sobre as outras.</span></span>
<span id="cb61-161"><a href="#cb61-161" aria-hidden="true" tabindex="-1"></a><span class="in">    -   `position_fill()`: empilhe barras sobrepostas, dimensionando para que o topo esteja sempre em 1.</span></span>
<span id="cb61-162"><a href="#cb61-162" aria-hidden="true" tabindex="-1"></a><span class="in">    -   `position_dodge()`: coloque barras sobrepostas (ou boxplots) lado a lado.</span></span>
<span id="cb61-163"><a href="#cb61-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-164"><a href="#cb61-164" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Facetas (Facets)**: Permitem criar múltiplos subgráficos baseados em uma ou mais variáveis categóricas. É uma ótima maneira de explorar as relações entre diferentes grupos de dados de forma visual (@fig-scatter11).</span>
<span id="cb61-165"><a href="#cb61-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-166"><a href="#cb61-166" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Temas (Themes)**: Controlam a aparência geral do gráfico, como a cor de fundo, a fonte, as linhas da grade e a aparência dos títulos. O <span class="in">`ggplot2`</span> permite construir gráficos complexos camada por camada, possibilitando a criação de gráficos sofisticados <span class="co">[</span><span class="ot">@wickham2023ggplot2</span><span class="co">]</span>. Em cada uma das camadas deve-se ter preocupação em controlar os componentes do gráfico.</span>
<span id="cb61-167"><a href="#cb61-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-168"><a href="#cb61-168" aria-hidden="true" tabindex="-1"></a><span class="fu">### Vantagens do ggplot2</span></span>
<span id="cb61-169"><a href="#cb61-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-170"><a href="#cb61-170" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Consistência e Flexibilidade**: A abordagem de camadas e a gramática de gráficos permitem criar uma variedade enorme de visualizações de forma consistente.</span>
<span id="cb61-171"><a href="#cb61-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-172"><a href="#cb61-172" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Qualidade Visual**: Os gráficos produzidos pelo ggplot2 são esteticamente agradáveis e prontos para publicações.</span>
<span id="cb61-173"><a href="#cb61-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-174"><a href="#cb61-174" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Intuitividade**: Uma vez que se entenda o conceito, é fácil construir gráficos complexos de forma gradual.</span>
<span id="cb61-175"><a href="#cb61-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-176"><a href="#cb61-176" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Extensibilidade**: O pacote pode ser estendido com outros pacotes que adicionam novas geoms, temas ou funcionalidades, como o gganimate para animações ou o ggrepel para evitar sobreposição de rótulos.</span>
<span id="cb61-177"><a href="#cb61-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-178"><a href="#cb61-178" aria-hidden="true" tabindex="-1"></a><span class="fu">## Gráfico de dispersão {#sec-scatter}</span></span>
<span id="cb61-179"><a href="#cb61-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-180"><a href="#cb61-180" aria-hidden="true" tabindex="-1"></a>Um gráfico de dispersão (*Scatterplot*) exibe a relação entre duas variáveis numéricas. Cada ponto representa uma observação. Suas posições nos eixos *x* (horizontal) e *y* (vertical) representam os valores das duas variáveis.\</span>
<span id="cb61-181"><a href="#cb61-181" aria-hidden="true" tabindex="-1"></a>O gráfico de dispersão permite identificar padrões, tendências e a força de uma possível correlação entre essas variáveis. Frequentemente, vem acompanhado por um cálculo do coeficiente de correlação (@sec-cor), que , em geral, mede a relação linear.</span>
<span id="cb61-182"><a href="#cb61-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-183"><a href="#cb61-183" aria-hidden="true" tabindex="-1"></a>Pretende-se, na construção de um gráfico de dispersão introduzir a lógica do <span class="in">`ggplot2`</span>. Os dados usados para o exemplo, serão os mesmos usados na construção do gráfico de dispersão com a função nativa <span class="in">`plot()`</span>(@sec-grammar).</span>
<span id="cb61-184"><a href="#cb61-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-185"><a href="#cb61-185" aria-hidden="true" tabindex="-1"></a><span class="fu">### Gráfico de dispersão básico</span></span>
<span id="cb61-186"><a href="#cb61-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-187"><a href="#cb61-187" aria-hidden="true" tabindex="-1"></a>Este é o exemplo mais simples que começa com o mapeamento de duas variáveis para os eixos *x* e *y.* A função central do pacote `ggplot2` é `ggplot()`, que recebe os dados por meio do argumento `data`. Em seguida, a função estética `aes()` define os mapeamentos dos eixos *x* e *y*, iniciando o gráfico com uma **camada base** — ainda vazia, mesmo que os dados já tenham sido fornecidos. Essa camada base corresponde a um painel cinza (@fig-baselayer), sobre o qual outras camadas serão adicionadas. Funciona como um terreno pronto para receber uma construção, que será erguida com o uso de uma função geométrica.</span>
<span id="cb61-188"><a href="#cb61-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-191"><a href="#cb61-191" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-192"><a href="#cb61-192" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-193"><a href="#cb61-193" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-baselayer</span></span>
<span id="cb61-194"><a href="#cb61-194" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-195"><a href="#cb61-195" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-196"><a href="#cb61-196" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.cap: "Camada base do ggplot"</span></span>
<span id="cb61-197"><a href="#cb61-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-198"><a href="#cb61-198" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dadosRNT100, <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN))</span>
<span id="cb61-199"><a href="#cb61-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-200"><a href="#cb61-200" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-201"><a href="#cb61-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-202"><a href="#cb61-202" aria-hidden="true" tabindex="-1"></a><span class="fu">### Geometria</span></span>
<span id="cb61-203"><a href="#cb61-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-204"><a href="#cb61-204" aria-hidden="true" tabindex="-1"></a>A seguir, adiciona-se <span class="ot">[^08-graficos-3]</span> a camada dos pontos que usa a geometria <span class="in">`geom_point()`</span> para criar um gráfico de dispersão.</span>
<span id="cb61-205"><a href="#cb61-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-206"><a href="#cb61-206" aria-hidden="true" tabindex="-1"></a><span class="ot">[^08-graficos-3]: </span>O adicionar aqui é literal, pois isto é feito com o sinal (+).</span>
<span id="cb61-207"><a href="#cb61-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-210"><a href="#cb61-210" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-211"><a href="#cb61-211" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-212"><a href="#cb61-212" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-scatter2</span></span>
<span id="cb61-213"><a href="#cb61-213" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-214"><a href="#cb61-214" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-215"><a href="#cb61-215" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Gráfico de dispersão simples"</span></span>
<span id="cb61-216"><a href="#cb61-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-217"><a href="#cb61-217" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dadosRNT100,</span>
<span id="cb61-218"><a href="#cb61-218" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN)) <span class="sc">+</span></span>
<span id="cb61-219"><a href="#cb61-219" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb61-220"><a href="#cb61-220" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-221"><a href="#cb61-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-222"><a href="#cb61-222" aria-hidden="true" tabindex="-1"></a>A @fig-scatter2 mostra um gráfico de dispersão ainda sem um aspecto elegante, mas com as informações necessárias. Tem este fundo escuro que não é do agrado da maioria, além de não apresentar o rótulos das variáveis de forma mais clara, mais adequada.</span>
<span id="cb61-223"><a href="#cb61-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-224"><a href="#cb61-224" aria-hidden="true" tabindex="-1"></a>O mesmo resultado da @fig-scatter2 pode ser obtido, colocando o mapeamento com a estética <span class="in">`aes()`</span> dentro do <span class="in">`geom_point()`</span>:</span>
<span id="cb61-225"><a href="#cb61-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-228"><a href="#cb61-228" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-229"><a href="#cb61-229" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-230"><a href="#cb61-230" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb61-231"><a href="#cb61-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-232"><a href="#cb61-232" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dadosRNT100) <span class="sc">+</span> </span>
<span id="cb61-233"><a href="#cb61-233" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN))</span>
<span id="cb61-234"><a href="#cb61-234" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-235"><a href="#cb61-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-236"><a href="#cb61-236" aria-hidden="true" tabindex="-1"></a><span class="fu">### Customização do gráfico de dispersão {#sec-custom}</span></span>
<span id="cb61-237"><a href="#cb61-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-238"><a href="#cb61-238" aria-hidden="true" tabindex="-1"></a>A geometria <span class="in">`geom_point()`</span> múltiplas opções de customização, através de seus argumentos:</span>
<span id="cb61-239"><a href="#cb61-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-240"><a href="#cb61-240" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**color**: a cor do traço, o contorno do círculo</span>
<span id="cb61-241"><a href="#cb61-241" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**stroke**: a largura do traço no ponto</span>
<span id="cb61-242"><a href="#cb61-242" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**fill**: cor da parte interna do ponto</span>
<span id="cb61-243"><a href="#cb61-243" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**shape**: forma do marcador (@fig-shape)</span>
<span id="cb61-244"><a href="#cb61-244" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**alpha**: transparência do ponto, varia de 0 a 1, 0 é totalmente transparente; 1 = opaco.</span>
<span id="cb61-245"><a href="#cb61-245" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**size**: tamanho do ponto</span>
<span id="cb61-246"><a href="#cb61-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-249"><a href="#cb61-249" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-250"><a href="#cb61-250" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-shape</span></span>
<span id="cb61-251"><a href="#cb61-251" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb61-252"><a href="#cb61-252" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "50%"</span></span>
<span id="cb61-253"><a href="#cb61-253" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-254"><a href="#cb61-254" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.cap: "Formato dos pontos disponíveis no R"</span></span>
<span id="cb61-255"><a href="#cb61-255" aria-hidden="true" tabindex="-1"></a> knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"https://i.imgur.com/2irU1vJ.png"</span>)</span>
<span id="cb61-256"><a href="#cb61-256" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-257"><a href="#cb61-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-258"><a href="#cb61-258" aria-hidden="true" tabindex="-1"></a>Para definir um tamanho uniforme para todos os pontos do gráfico, basta especificar um valor numérico no argumento <span class="in">`size`</span> da função <span class="in">`geom_point()`</span>, como por exemplo <span class="in">`size = 1.5`</span> (padrão). Para melhor visualização, será escolhido <span class="in">`size = 3`</span> ou <span class="in">`4`</span>. O mesmo princípio se aplica à cor. No argumento <span class="in">`color`</span> (vai colorir o contorno dos pontos), colocar, por exemplo, <span class="in">`color = “gray20”`</span> ou, se o formato (<span class="in">`shape`</span>), no argumento <span class="in">`fill`</span> para a cor de preenchimento do ponto. A escolha das cores depende do gosto pessoal, na @sec-coresr, serão mostrados alguns princípios que auxiliam esse processo. Para alterar o formato dos pontos, usar o argumento <span class="in">`shape`</span>, conforme as opções na figura @fig-shape. Somente os formatos 21 a 25 permitem preenchimento. No exemplo, será usado <span class="in">`shape = 21.`</span> Nesse caso, é possível adicionar o argumento para definir a cor interna do ponto, ou seja, uma cor fixa (fill = "tomato") ou uma variável categórica, como <span class="in">`sexo`</span>. Ao utilizar uma variável como <span class="in">`fill = sexo`</span>, o <span class="in">`ggplot2`</span> preencherá os pontos com cores diferentes automaticamente, de acordo com os níveis dessa variável.</span>
<span id="cb61-259"><a href="#cb61-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-262"><a href="#cb61-262" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-263"><a href="#cb61-263" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-264"><a href="#cb61-264" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-scatter3</span></span>
<span id="cb61-265"><a href="#cb61-265" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-266"><a href="#cb61-266" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-267"><a href="#cb61-267" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.cap: "Gráfico de dispersão colorido"</span></span>
<span id="cb61-268"><a href="#cb61-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-269"><a href="#cb61-269" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dadosRNT100,</span>
<span id="cb61-270"><a href="#cb61-270" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN)) <span class="sc">+</span></span>
<span id="cb61-271"><a href="#cb61-271" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"gray20"</span>,</span>
<span id="cb61-272"><a href="#cb61-272" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span><span class="st">"tomato"</span>,</span>
<span id="cb61-273"><a href="#cb61-273" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="dv">1</span>,</span>
<span id="cb61-274"><a href="#cb61-274" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, </span>
<span id="cb61-275"><a href="#cb61-275" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb61-276"><a href="#cb61-276" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span><span class="dv">1</span>)</span>
<span id="cb61-277"><a href="#cb61-277" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-278"><a href="#cb61-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-279"><a href="#cb61-279" aria-hidden="true" tabindex="-1"></a><span class="fu">### Lidando com a sobreposição dos pontos e os rótulos {#sec-jitter}</span></span>
<span id="cb61-280"><a href="#cb61-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-281"><a href="#cb61-281" aria-hidden="true" tabindex="-1"></a>Na @fig-scatter3 a modificação realizada melhorou o aspecto do gráfico. Entretanto, os pontos estão se sobrepondo, porque o comprimento dos recém-nascidos está registrado como uma variável numérica discreta e existem vários com o mesmo comprimento. Nesse caso, a solução para evitar a sobreposição, é provocar um pequeno deslocamento aleatório dos pontos, tornando o gráfico mais legível. Isto é feito, embutindo o *jitter* (espalhamento) com um argumento dentro do `geom_point()`, o `position = position_jitter (width = 0.2, height = 0)`. O argumento `width` controla o deslocamento horizontal (eixo *x*); `height` controla o deslocamento vertical (eixo *y*). No exemplo (@fig-scatter4), os pontos serão espalhados horizontalmente, mantendo a posição vertical. Será usado o argumento `width = 0.2` que espalha os pontos de forma leve, sem alterar o eixo *y*.</span>
<span id="cb61-282"><a href="#cb61-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-283"><a href="#cb61-283" aria-hidden="true" tabindex="-1"></a>Nesta modificação, será colocada mais uma camada para trabalhar com os rótulos dos eixos x e y., usando as funções <span class="in">`ylab()`</span> e <span class="in">`xlab()`</span>.</span>
<span id="cb61-284"><a href="#cb61-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-287"><a href="#cb61-287" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-288"><a href="#cb61-288" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-289"><a href="#cb61-289" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-scatter4</span></span>
<span id="cb61-290"><a href="#cb61-290" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-291"><a href="#cb61-291" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-292"><a href="#cb61-292" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.cap: "Gráfico de dispersão com jitter"</span></span>
<span id="cb61-293"><a href="#cb61-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-294"><a href="#cb61-294" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dadosRNT100, </span>
<span id="cb61-295"><a href="#cb61-295" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN, <span class="at">fill =</span> sexo)) <span class="sc">+</span></span>
<span id="cb61-296"><a href="#cb61-296" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="dv">0</span>),</span>
<span id="cb61-297"><a href="#cb61-297" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"gray20"</span>,</span>
<span id="cb61-298"><a href="#cb61-298" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span><span class="st">"tomato2"</span>,</span>
<span id="cb61-299"><a href="#cb61-299" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>,</span>
<span id="cb61-300"><a href="#cb61-300" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="dv">1</span>,</span>
<span id="cb61-301"><a href="#cb61-301" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb61-302"><a href="#cb61-302" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb61-303"><a href="#cb61-303" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Peso do Recém-nascido (g)"</span>) <span class="sc">+</span></span>
<span id="cb61-304"><a href="#cb61-304" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Comprimento do Recém-nascido (cm)"</span>) </span>
<span id="cb61-305"><a href="#cb61-305" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-306"><a href="#cb61-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-307"><a href="#cb61-307" aria-hidden="true" tabindex="-1"></a><span class="fu">### Mudando o tema</span></span>
<span id="cb61-308"><a href="#cb61-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-309"><a href="#cb61-309" aria-hidden="true" tabindex="-1"></a>A @fig-scatter4 já é um gráfico bem aceitável, praticamente sem defeitos, apesar de o autor implicar muito com o fundo cinza – <span class="in">`theme_gray()`</span>. Essa cor acinzentada padrão do <span class="in">`ggplot2`</span> pode ser alterada pela definição de outro tema integrado, entre muitos, como <span class="in">`theme_classic()`</span> que é um tema de aparência clássica, com linhas dos eixos *x* e *y* e sem linhas de grade, semelhante ao da @fig-scatter1, criado com a função nativa <span class="in">`plot()`</span>. Outro tema interessante é o <span class="in">`theme_bw()`</span> que usa um fundo branco e linhas finas de grade cinza.</span>
<span id="cb61-310"><a href="#cb61-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-311"><a href="#cb61-311" aria-hidden="true" tabindex="-1"></a>Para ver outras possibilidades acesse <span class="co">[</span><span class="ot">Completes themes - ggplt2</span><span class="co">](https://ggplot2.tidyverse.org/reference/ggtheme.html)</span>. Foi adicionado o argumento <span class="in">`base_size = 13`</span>, para modificar o tamaho das letras.</span>
<span id="cb61-312"><a href="#cb61-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-313"><a href="#cb61-313" aria-hidden="true" tabindex="-1"></a>O gráfico da @fig-scatter4 com a adição do <span class="in">`theme_classic()`</span> e aumento dp tamanho das letras, pode ser observado na @fig-scatter5.</span>
<span id="cb61-314"><a href="#cb61-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-317"><a href="#cb61-317" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-318"><a href="#cb61-318" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-319"><a href="#cb61-319" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-scatter5</span></span>
<span id="cb61-320"><a href="#cb61-320" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-321"><a href="#cb61-321" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-322"><a href="#cb61-322" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.cap: "Gráfico de dispersão com jitter e theme_bw()"</span></span>
<span id="cb61-323"><a href="#cb61-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-324"><a href="#cb61-324" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dadosRNT100,</span>
<span id="cb61-325"><a href="#cb61-325" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN)) <span class="sc">+</span></span>
<span id="cb61-326"><a href="#cb61-326" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="dv">0</span>),</span>
<span id="cb61-327"><a href="#cb61-327" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"gray20"</span>,</span>
<span id="cb61-328"><a href="#cb61-328" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span><span class="st">"steelblue"</span>,</span>
<span id="cb61-329"><a href="#cb61-329" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, </span>
<span id="cb61-330"><a href="#cb61-330" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="dv">1</span>,</span>
<span id="cb61-331"><a href="#cb61-331" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb61-332"><a href="#cb61-332" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb61-333"><a href="#cb61-333" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Peso do Recém-nascido (g)"</span>) <span class="sc">+</span></span>
<span id="cb61-334"><a href="#cb61-334" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Comprimento do Recém-nascido (cm)"</span>)<span class="sc">+</span></span>
<span id="cb61-335"><a href="#cb61-335" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span>
<span id="cb61-336"><a href="#cb61-336" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-337"><a href="#cb61-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-338"><a href="#cb61-338" aria-hidden="true" tabindex="-1"></a><span class="fu">### Mudando as cores {#sec-coresr}</span></span>
<span id="cb61-339"><a href="#cb61-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-340"><a href="#cb61-340" aria-hidden="true" tabindex="-1"></a>Na @sec-custom foi introduzido o uso de cores no R. Agora, apesar deste tema praticamente não ter limites, serão mostrados alguns princípios do manuseio das cores no <span class="in">`ggplot2.`</span> É possível visualizar as cores para usar no <span class="in">`ggplot2`</span> de uma maneira fácil, acessando, por exemplo, <span class="co">[</span><span class="ot">An overview of color names in R</span><span class="co">](https://r-graph-gallery.com/42-colors-names.html)</span> ou um guia completo <span class="co">[</span><span class="ot">Colors (ggplot2)</span><span class="co">]</span>(http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/).\</span>
<span id="cb61-341"><a href="#cb61-341" aria-hidden="true" tabindex="-1"></a>A escolha das cores pode ser feita especificando o seu nome em inglês. Essa escolha é pessoal. O R possui 657 cores integradas que permitem uma gama ampla de opções. Pode-se chamar uma cor pelo nome e a função <span class="in">`colors()`</span> exibe todos elas. Uma outra maneira de especificar as cores, é usar o sistema RGB ou hexadecimal. O código hexadecimal da cor branca é <span class="in">`#FFFFFF`</span>F, da “gray58” é <span class="in">`#949494`</span>, da “yellow4” é <span class="in">`#999900`</span>, etc. Opcionalmente, a cor pode ser transparente, usando o formato “#RRGGBBAA”. <span class="in">`Alpha`</span> refere-se à transparência de um <span class="in">`geom_`</span>. Os valores de <span class="in">`alpha`</span> variam de 0 a 1, com valores mais baixos correspondendo a cores mais transparentes. O argumento <span class="in">`alpha`</span> também pode ser modificado por meio da estética de <span class="in">`color`</span> ou <span class="in">`fill`</span> se qualquer uma das estéticas fornecer valores de cor usando uma especificação RGB.</span>
<span id="cb61-342"><a href="#cb61-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-343"><a href="#cb61-343" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Mapeando Cores com aes()</span></span>
<span id="cb61-344"><a href="#cb61-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-345"><a href="#cb61-345" aria-hidden="true" tabindex="-1"></a>A forma mais comum de usar cores é mapeando uma variável para a estética <span class="in">`color`</span> ou <span class="in">`fill`</span> dentro da função <span class="in">`aes()`</span>. Quando se faz isso, o <span class="in">`ggplot2`</span> atribui cores automaticamente, criando uma legenda. Esta legenda pode ser modificada de posição com a função theme(legend.position = "bottom"), que colocará a legenda na parte inferior do gráfico<span class="ot">[^08-graficos-4]</span>. No caso deste gráfico, o título da legenda pode ser removido, porque ele é óbvio. Para isso, basta usar a função labs() que manauseia os títulos, usando <span class="in">`color`</span> ou <span class="in">`fill`</span>, dependendo se for a cor do contorno ou do preenchimento do ponto.</span>
<span id="cb61-346"><a href="#cb61-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-347"><a href="#cb61-347" aria-hidden="true" tabindex="-1"></a><span class="ot">[^08-graficos-4]: </span>A legenda também pode ser colocada em outras partes do gráfico: "top" (superior), "left" (esquerda), "rigth" (direita) e ser removida ("none").</span>
<span id="cb61-348"><a href="#cb61-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-349"><a href="#cb61-349" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**color**: Usado para o contorno de formas, como a borda dos pontos ( ou como será visto adiante, as linhas de um gráfico de linha, ou a borda de um boxplot, de um gráfico de barra).</span>
<span id="cb61-350"><a href="#cb61-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-351"><a href="#cb61-351" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**fill**: Usado para preencher formas, como pontos (<span class="in">`shape`</span> 21 a 25) ou como as barras de um histograma ou as caixas de um boxplot (ver adiante).</span>
<span id="cb61-352"><a href="#cb61-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-353"><a href="#cb61-353" aria-hidden="true" tabindex="-1"></a>Inicialmente, serão manipuladas as cores do gráfico da @fig-scatter5, utilizando uma variável categórica, <span class="in">`fill = sexo`</span>, dentro da função <span class="in">`aes()`</span>.</span>
<span id="cb61-354"><a href="#cb61-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-357"><a href="#cb61-357" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-358"><a href="#cb61-358" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-359"><a href="#cb61-359" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-scatter6</span></span>
<span id="cb61-360"><a href="#cb61-360" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-361"><a href="#cb61-361" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-362"><a href="#cb61-362" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.cap: "Gráfico de dispersão com cores de acordo com o sexo"</span></span>
<span id="cb61-363"><a href="#cb61-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-364"><a href="#cb61-364" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dadosRNT100, </span>
<span id="cb61-365"><a href="#cb61-365" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN, <span class="at">fill =</span> sexo)) <span class="sc">+</span></span>
<span id="cb61-366"><a href="#cb61-366" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="dv">0</span>),</span>
<span id="cb61-367"><a href="#cb61-367" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>,</span>
<span id="cb61-368"><a href="#cb61-368" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="dv">1</span>,</span>
<span id="cb61-369"><a href="#cb61-369" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">4</span>,</span>
<span id="cb61-370"><a href="#cb61-370" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb61-371"><a href="#cb61-371" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">""</span>,</span>
<span id="cb61-372"><a href="#cb61-372" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Comprimento do Recém-nascido (cm)"</span>,</span>
<span id="cb61-373"><a href="#cb61-373" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Peso do Recém-nascido (g)"</span>,</span>
<span id="cb61-374"><a href="#cb61-374" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb61-375"><a href="#cb61-375" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb61-376"><a href="#cb61-376" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb61-377"><a href="#cb61-377" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-378"><a href="#cb61-378" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-379"><a href="#cb61-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-380"><a href="#cb61-380" aria-hidden="true" tabindex="-1"></a>Neste caso, a variável categórica <span class="in">`sexo`</span> foi mapeada para a estética fill. O <span class="in">`ggplot2`</span> atribuiu uma cor diferente para cada <span class="in">`sexo`</span> e criou uma legenda automaticamente (@fig-scatter6). No exemplo da @fig-scatter5, foi mostrado que quando a cor for única, o mapeamento da mesma se dá dentro do <span class="in">`geom_point()`</span>.</span>
<span id="cb61-381"><a href="#cb61-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-382"><a href="#cb61-382" aria-hidden="true" tabindex="-1"></a>::: callout-caution</span>
<span id="cb61-383"><a href="#cb61-383" aria-hidden="true" tabindex="-1"></a><span class="fu">## Atenção!</span></span>
<span id="cb61-384"><a href="#cb61-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-385"><a href="#cb61-385" aria-hidden="true" tabindex="-1"></a>Se estiver usando <span class="in">`shape`</span> que **não aceita preenchimento** (como 16 ou 19), então deve-se usar <span class="in">`color = sexo`</span> e <span class="in">`scale_color_manual().`</span></span>
<span id="cb61-386"><a href="#cb61-386" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb61-387"><a href="#cb61-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-388"><a href="#cb61-388" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb61-389"><a href="#cb61-389" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exercício</span></span>
<span id="cb61-390"><a href="#cb61-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-391"><a href="#cb61-391" aria-hidden="true" tabindex="-1"></a>O que acontece se a cor determinada por uma variável categórica (<span class="in">`fill = sexo`</span> ou <span class="in">`color= sexo`</span>) for colocada fora do <span class="in">`aes()`</span>?</span>
<span id="cb61-392"><a href="#cb61-392" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb61-393"><a href="#cb61-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-394"><a href="#cb61-394" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Resposta</span><span class="co">]</span>{.underline}<span class="ot">[^08-graficos-5]</span></span>
<span id="cb61-395"><a href="#cb61-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-396"><a href="#cb61-396" aria-hidden="true" tabindex="-1"></a><span class="ot">[^08-graficos-5]: </span>Não acontece nada! O&nbsp;*R*&nbsp;ignora o código e retorna um gráfico com as sua cor padrão, a preta.</span>
<span id="cb61-397"><a href="#cb61-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-398"><a href="#cb61-398" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Paletas de Cores</span></span>
<span id="cb61-399"><a href="#cb61-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-400"><a href="#cb61-400" aria-hidden="true" tabindex="-1"></a>Para ter controle total sobre as cores, deve-se usar funções de escala (<span class="in">`scale`</span>). Existem diferentes funções de escala para variáveis categóricas e numéricas. Na @fig-scatter6, o <span class="in">`ggplot2`</span> definiu as cores automaticamente. Agora, as cores serão personalizadas, usando a função <span class="in">`scale_color_manual()`</span> (@fig-scatter7).</span>
<span id="cb61-401"><a href="#cb61-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-404"><a href="#cb61-404" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-405"><a href="#cb61-405" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-406"><a href="#cb61-406" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-scatter7</span></span>
<span id="cb61-407"><a href="#cb61-407" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-408"><a href="#cb61-408" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-409"><a href="#cb61-409" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.cap: "Gráfico de dispersão com cores personalizadas de acordo com o sexo"</span></span>
<span id="cb61-410"><a href="#cb61-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-411"><a href="#cb61-411" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, </span>
<span id="cb61-412"><a href="#cb61-412" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN, <span class="at">fill =</span> sexo)) <span class="sc">+</span></span>
<span id="cb61-413"><a href="#cb61-413" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="dv">0</span>),</span>
<span id="cb61-414"><a href="#cb61-414" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, </span>
<span id="cb61-415"><a href="#cb61-415" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"gray20"</span>, </span>
<span id="cb61-416"><a href="#cb61-416" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">4</span>, </span>
<span id="cb61-417"><a href="#cb61-417" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb61-418"><a href="#cb61-418" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="at">Masculino =</span> <span class="st">"cyan"</span>,</span>
<span id="cb61-419"><a href="#cb61-419" aria-hidden="true" tabindex="-1"></a>                               <span class="at">Feminino =</span> <span class="st">"pink3"</span>)) <span class="sc">+</span></span>
<span id="cb61-420"><a href="#cb61-420" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">""</span>,</span>
<span id="cb61-421"><a href="#cb61-421" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Comprimento do Recém-nascido (cm)"</span>,</span>
<span id="cb61-422"><a href="#cb61-422" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Peso do Recém-nascido (g)"</span>,</span>
<span id="cb61-423"><a href="#cb61-423" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb61-424"><a href="#cb61-424" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb61-425"><a href="#cb61-425" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb61-426"><a href="#cb61-426" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-427"><a href="#cb61-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-428"><a href="#cb61-428" aria-hidden="true" tabindex="-1"></a>Observar que, na @fig-scatter6, os pontos que representam os meninos estavam cor rosa e as meninas com cor azul. Na figura @fig-scatter7, isto foi modificado **manualmente**. Para realizar o mesmo processo, é muito comum usar pacotes de **paletas de cores**.</span>
<span id="cb61-429"><a href="#cb61-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-430"><a href="#cb61-430" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Pacote ggsci</span></span>
<span id="cb61-431"><a href="#cb61-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-432"><a href="#cb61-432" aria-hidden="true" tabindex="-1"></a>O <span class="in">`ggsci`</span> é um pacote que oferece uma coleção de paletas de alta qualidade inspiradas em cores usadas em revistas científicas, bibliotecas de visualização de dados, filmes de ficção científica e programas de TV. As paletas de cores no <span class="in">`ggsci`</span> estão disponíveis como escalas <span class="in">`ggplot2`</span>, Para todas usa-se as seguintes funções:</span>
<span id="cb61-433"><a href="#cb61-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-434"><a href="#cb61-434" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`scale_color_nomedapaleta()`</span> e</span>
<span id="cb61-435"><a href="#cb61-435" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`scale_fill_nomedapaleta ()`</span>.</span>
<span id="cb61-436"><a href="#cb61-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-437"><a href="#cb61-437" aria-hidden="true" tabindex="-1"></a>Por exemplo, para a paleta do *Lancet*, usa-se para o preenchimento: s<span class="in">`cale_fill_lancet()`</span> . O pacote <span class="in">`ggsci`</span> deve ser instalado e carregado para usar estas paletas.\</span>
<span id="cb61-438"><a href="#cb61-438" aria-hidden="true" tabindex="-1"></a>Para visualizar as opções do pacote <span class="in">`ggsci`</span> acessar <span class="co">[</span><span class="ot">Scientific Journal and Sci-Fi Themed Color Palettes for ggplot2</span><span class="co">](https://cran.r-project.org/web/packages/ggsci/vignettes/ggsci.html)</span>.</span>
<span id="cb61-439"><a href="#cb61-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-440"><a href="#cb61-440" aria-hidden="true" tabindex="-1"></a>Como exemplo, será usado o código que gerou o gráfico da @fig-scatter7 com alterações, usando a paleta do periódico *Lancet*.</span>
<span id="cb61-441"><a href="#cb61-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-444"><a href="#cb61-444" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-445"><a href="#cb61-445" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-446"><a href="#cb61-446" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-scatter8</span></span>
<span id="cb61-447"><a href="#cb61-447" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-448"><a href="#cb61-448" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-449"><a href="#cb61-449" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.cap: "Gráfico de dispersão com cores personalizadas usando o ggsci"</span></span>
<span id="cb61-450"><a href="#cb61-450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-451"><a href="#cb61-451" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsci)</span>
<span id="cb61-452"><a href="#cb61-452" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, </span>
<span id="cb61-453"><a href="#cb61-453" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN, <span class="at">fill =</span> sexo)) <span class="sc">+</span></span>
<span id="cb61-454"><a href="#cb61-454" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="dv">0</span>),</span>
<span id="cb61-455"><a href="#cb61-455" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, </span>
<span id="cb61-456"><a href="#cb61-456" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"gray20"</span>, </span>
<span id="cb61-457"><a href="#cb61-457" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">4</span>, </span>
<span id="cb61-458"><a href="#cb61-458" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb61-459"><a href="#cb61-459" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_lancet</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb61-460"><a href="#cb61-460" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">""</span>,</span>
<span id="cb61-461"><a href="#cb61-461" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Comprimento do Recém-nascido (cm)"</span>,</span>
<span id="cb61-462"><a href="#cb61-462" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Peso do Recém-nascido (g)"</span>,</span>
<span id="cb61-463"><a href="#cb61-463" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb61-464"><a href="#cb61-464" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb61-465"><a href="#cb61-465" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb61-466"><a href="#cb61-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-467"><a href="#cb61-467" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-468"><a href="#cb61-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-469"><a href="#cb61-469" aria-hidden="true" tabindex="-1"></a>As cores usadas são agora as da paleta do *Lancet* (@fig-scatter8). Como eles são muito vivas e para que aparecesse que o ponto foi preenchido, foi utilizada uma transparência de alpha = 0.6. A paleta do *Lancet* pode ser visualizada com a função <span class="in">`show_col(pal_lancet())`</span>(@fig-lancet)</span>
<span id="cb61-470"><a href="#cb61-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-473"><a href="#cb61-473" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-474"><a href="#cb61-474" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-475"><a href="#cb61-475" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-lancet</span></span>
<span id="cb61-476"><a href="#cb61-476" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-477"><a href="#cb61-477" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.cap: 'Paleta do Lancet do pacote ggsci'</span></span>
<span id="cb61-478"><a href="#cb61-478" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "60%"</span></span>
<span id="cb61-479"><a href="#cb61-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-480"><a href="#cb61-480" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsci)</span>
<span id="cb61-481"><a href="#cb61-481" aria-hidden="true" tabindex="-1"></a><span class="fu">show_col</span>(<span class="fu">pal_lancet</span>())</span>
<span id="cb61-482"><a href="#cb61-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-483"><a href="#cb61-483" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-484"><a href="#cb61-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-485"><a href="#cb61-485" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb61-486"><a href="#cb61-486" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exercício</span></span>
<span id="cb61-487"><a href="#cb61-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-488"><a href="#cb61-488" aria-hidden="true" tabindex="-1"></a>Visualizar outras paletas do pacote <span class="in">`ggsci`</span>, usando a função <span class="in">`show_col()`</span> do pacote scales. Por exemplo:</span>
<span id="cb61-489"><a href="#cb61-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-490"><a href="#cb61-490" aria-hidden="true" tabindex="-1"></a>show_col(pal_jama())</span>
<span id="cb61-491"><a href="#cb61-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-492"><a href="#cb61-492" aria-hidden="true" tabindex="-1"></a>show_col(pal_bmj())</span>
<span id="cb61-493"><a href="#cb61-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-494"><a href="#cb61-494" aria-hidden="true" tabindex="-1"></a>show_col(pal_aaas())</span>
<span id="cb61-495"><a href="#cb61-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-496"><a href="#cb61-496" aria-hidden="true" tabindex="-1"></a>show_col(pal_simpsons())</span>
<span id="cb61-497"><a href="#cb61-497" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb61-498"><a href="#cb61-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-499"><a href="#cb61-499" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Pacote RColorBrewer</span></span>
<span id="cb61-500"><a href="#cb61-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-501"><a href="#cb61-501" aria-hidden="true" tabindex="-1"></a>Existem outros pacotes, como o <span class="in">`RColorBrewer`</span>, que oferecem paletas visualmente agradáveis e podem facilmente ser exploradas. Por alguns, é considerado uma ferramenta indispensável para gerenciar cores com R <span class="co">[</span><span class="ot">@holtz2025colorbrewer</span><span class="co">]</span>. Para visualizar (@fig-colorbrewer) as paletas do pacote <span class="in">`RColorBrewer`</span>.</span>
<span id="cb61-502"><a href="#cb61-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-505"><a href="#cb61-505" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-506"><a href="#cb61-506" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-507"><a href="#cb61-507" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.cap: 'Paleta do RColorBrewer'</span></span>
<span id="cb61-508"><a href="#cb61-508" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-colorbrewer</span></span>
<span id="cb61-509"><a href="#cb61-509" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-510"><a href="#cb61-510" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "90%"</span></span>
<span id="cb61-511"><a href="#cb61-511" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-512"><a href="#cb61-512" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-513"><a href="#cb61-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-514"><a href="#cb61-514" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb61-515"><a href="#cb61-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-516"><a href="#cb61-516" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>))            <span class="co"># modifica o tamanho das margens</span></span>
<span id="cb61-517"><a href="#cb61-517" aria-hidden="true" tabindex="-1"></a><span class="fu">display.brewer.all</span>()</span>
<span id="cb61-518"><a href="#cb61-518" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="fl">5.1</span>, <span class="fl">4.1</span>, <span class="fl">4.1</span>, <span class="fl">2.1</span>))    <span class="co"># retorna ao tamanho original das margens</span></span>
<span id="cb61-519"><a href="#cb61-519" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-520"><a href="#cb61-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-521"><a href="#cb61-521" aria-hidden="true" tabindex="-1"></a>Como exemplo, será repetido o gráfico da @fig-scatter8 com uma paleta de cores do RColorBrewer, <span class="in">`Pastel2`</span>.</span>
<span id="cb61-522"><a href="#cb61-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-525"><a href="#cb61-525" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-526"><a href="#cb61-526" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-527"><a href="#cb61-527" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-scatter9</span></span>
<span id="cb61-528"><a href="#cb61-528" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-529"><a href="#cb61-529" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-530"><a href="#cb61-530" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.cap: "Gráfico de dispersão com cores personalizadas usando o RColorBrewer"</span></span>
<span id="cb61-531"><a href="#cb61-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-532"><a href="#cb61-532" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, </span>
<span id="cb61-533"><a href="#cb61-533" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN, <span class="at">fill =</span> sexo)) <span class="sc">+</span></span>
<span id="cb61-534"><a href="#cb61-534" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="dv">0</span>),</span>
<span id="cb61-535"><a href="#cb61-535" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, </span>
<span id="cb61-536"><a href="#cb61-536" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"gray20"</span>, </span>
<span id="cb61-537"><a href="#cb61-537" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">4</span>, </span>
<span id="cb61-538"><a href="#cb61-538" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb61-539"><a href="#cb61-539" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel2"</span>) <span class="sc">+</span></span>
<span id="cb61-540"><a href="#cb61-540" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">""</span>,</span>
<span id="cb61-541"><a href="#cb61-541" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Comprimento do Recém-nascido (cm)"</span>,</span>
<span id="cb61-542"><a href="#cb61-542" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Peso do Recém-nascido (g)"</span>,</span>
<span id="cb61-543"><a href="#cb61-543" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb61-544"><a href="#cb61-544" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb61-545"><a href="#cb61-545" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb61-546"><a href="#cb61-546" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-547"><a href="#cb61-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-548"><a href="#cb61-548" aria-hidden="true" tabindex="-1"></a><span class="fu">##### Paleta paletteer</span></span>
<span id="cb61-549"><a href="#cb61-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-550"><a href="#cb61-550" aria-hidden="true" tabindex="-1"></a>O pacote <span class="in">`paletteer`</span> no R reúne um grande número de paletas de cores de diversos pacotes do R dedicados a cores. Fornece uma interface simples e consistente para acessar essas paletas, facilitando o trabalho. Oferece mais de 2000 paletas de cores de vários pacotes do R, como <span class="in">`ggthemes`</span>, <span class="in">`wesanderson`</span>, <span class="in">`lisa`</span>, <span class="in">`scico`</span>, entre outros. Tudo acessível por uma interface simples e poderosa, facilitando a criação de visualizações bonitas e informativas <span class="co">[</span><span class="ot">@hvitfeldt2024paletteer</span><span class="co">]</span>.\</span>
<span id="cb61-551"><a href="#cb61-551" aria-hidden="true" tabindex="-1"></a>Todas as paletas podem ser acessadas a partir das três funções <span class="in">`paletteer_c()`</span>, <span class="in">`paletteer_d()`</span> e <span class="in">`paletteer_dynamic()`</span> usando a sintaxe: <span class="in">`nome_do_pacote::nome_da_paleta`</span> <span class="ot">[^08-graficos-6]</span>.</span>
<span id="cb61-552"><a href="#cb61-552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-553"><a href="#cb61-553" aria-hidden="true" tabindex="-1"></a><span class="ot">[^08-graficos-6]: </span>A função <span class="in">`paletteer_c()`</span> é usada para variáveis contínuas; a <span class="in">`paletteer_d()`</span> para variáveis categóricas e a <span class="in">`paletteer_dinamic()`</span> é pouco usada, mas serve para paletas que mudam conforme o número de categorias.</span>
<span id="cb61-554"><a href="#cb61-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-555"><a href="#cb61-555" aria-hidden="true" tabindex="-1"></a>Paletas discretas são paletas com um número fixo de cores. Elas são úteis para visualizar dados categóricos. Por exemplo, uma paleta que vai do vermelho ao laranja, do verde ao preto é uma paleta discreta.</span>
<span id="cb61-556"><a href="#cb61-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-557"><a href="#cb61-557" aria-hidden="true" tabindex="-1"></a>Exemplo com a paleta <span class="in">`nbapalettes::supersonics_holiday`</span>, mapeando os pontos em um tamanho maior (<span class="in">`size = 7`</span>) para chamar atenção das cores.</span>
<span id="cb61-558"><a href="#cb61-558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-561"><a href="#cb61-561" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-562"><a href="#cb61-562" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-563"><a href="#cb61-563" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-scatter10</span></span>
<span id="cb61-564"><a href="#cb61-564" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-565"><a href="#cb61-565" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-566"><a href="#cb61-566" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Gráfico de dispersão com cores personalizadas usando o paletteer"</span></span>
<span id="cb61-567"><a href="#cb61-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-568"><a href="#cb61-568" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(paletteer)</span>
<span id="cb61-569"><a href="#cb61-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-570"><a href="#cb61-570" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, </span>
<span id="cb61-571"><a href="#cb61-571" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN, <span class="at">fill =</span> sexo)) <span class="sc">+</span></span>
<span id="cb61-572"><a href="#cb61-572" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="dv">0</span>),</span>
<span id="cb61-573"><a href="#cb61-573" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, </span>
<span id="cb61-574"><a href="#cb61-574" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"gray20"</span>, </span>
<span id="cb61-575"><a href="#cb61-575" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">6</span>, </span>
<span id="cb61-576"><a href="#cb61-576" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb61-577"><a href="#cb61-577" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_paletteer_d</span>(<span class="st">"nbapalettes::supersonics_holiday"</span>) <span class="sc">+</span></span>
<span id="cb61-578"><a href="#cb61-578" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">""</span>,</span>
<span id="cb61-579"><a href="#cb61-579" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Comprimento do Recém-nascido (cm)"</span>,</span>
<span id="cb61-580"><a href="#cb61-580" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Peso do Recém-nascido (g)"</span>,</span>
<span id="cb61-581"><a href="#cb61-581" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb61-582"><a href="#cb61-582" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb61-583"><a href="#cb61-583" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) </span>
<span id="cb61-584"><a href="#cb61-584" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-585"><a href="#cb61-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-586"><a href="#cb61-586" aria-hidden="true" tabindex="-1"></a>Para uma visualização rápida de algumas paletas com o <span class="in">`paleteteer`</span>, pode-se digitar em um script do *RStudio* ou do *Positron* o seguinte comando:</span>
<span id="cb61-587"><a href="#cb61-587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-590"><a href="#cb61-590" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-591"><a href="#cb61-591" aria-hidden="true" tabindex="-1"></a>paletteer<span class="sc">::</span><span class="fu">paletteer_d</span>(<span class="st">"lisa::FridaKahlo"</span>)</span>
<span id="cb61-592"><a href="#cb61-592" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-593"><a href="#cb61-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-596"><a href="#cb61-596" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-597"><a href="#cb61-597" aria-hidden="true" tabindex="-1"></a>paletteer<span class="sc">::</span><span class="fu">paletteer_d</span>(<span class="st">"nbapalettes::supersonics_holiday"</span>)</span>
<span id="cb61-598"><a href="#cb61-598" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-599"><a href="#cb61-599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-600"><a href="#cb61-600" aria-hidden="true" tabindex="-1"></a>No console, aparecerão as cores com os códigos hexadecimais. Se as cores não estiverem visíveis como aqui, então acesse o website <span class="co">[</span><span class="ot">HTML Coloe Codes</span><span class="co">](https://html-color-codes.info/)</span>, onde facilente é feita essa conversão.</span>
<span id="cb61-601"><a href="#cb61-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-602"><a href="#cb61-602" aria-hidden="true" tabindex="-1"></a>Isto é apenas o caminho, existem uma enorme quantidade de paletas (mais de 2500 paletas!) e o <span class="in">`paletteer`</span> é uma espécie de facilitador para se ter acesso a elas. Escolher as cores para um gráfico é uma tarefa desafiadora e demorada, o que geralmente leva à insatisfação.Em um dos seus sites educacionais <span class="co">[</span><span class="ot">Yan Holtz</span><span class="co">](https://www.yan-holtz.com/)</span> disponibiliza um <span class="co">[</span><span class="ot">localizador de paletas de cores</span><span class="co">](https://r-graph-gallery.com/color-palette-finder)</span> que torna este trabalho mais palatável.</span>
<span id="cb61-603"><a href="#cb61-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-604"><a href="#cb61-604" aria-hidden="true" tabindex="-1"></a><span class="fu">### Facetamento {#sec-facet}</span></span>
<span id="cb61-605"><a href="#cb61-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-606"><a href="#cb61-606" aria-hidden="true" tabindex="-1"></a>Na @sec-coresr, foi mostrado como comparar grupos, através da cor, usando as estéticas <span class="in">`fill`</span> ou <span class="in">`color`</span> <span class="ot">[^08-graficos-7]</span>. Outra técnica para diferenciar grupos em um gráfico é o **facetamento**. O facetamento cria gráficos dividindo os dados em subconjuntos e exibindo o mesmo gráfico para cada subconjunto (@fig-scatter11) . Para facetar um gráfico, basta adicionar uma especificação de facetamento com a função <span class="in">`facet_wrap()`</span>, que recebe o nome de uma variável categórica precedido pelo sinal gráfico <span class="in">`til (~)`</span>.</span>
<span id="cb61-607"><a href="#cb61-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-608"><a href="#cb61-608" aria-hidden="true" tabindex="-1"></a><span class="ot">[^08-graficos-7]: </span>Além da cor, os grupos em um gráfico também podem ser diferenciados por meio das estéticas **shape** e **size**. Para isso, substituir o mapeamento <span class="in">`fill = sexo`</span> por <span class="in">`shape = sexo`</span> ou <span class="in">`size = sexo`</span>.</span>
<span id="cb61-609"><a href="#cb61-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-610"><a href="#cb61-610" aria-hidden="true" tabindex="-1"></a>Como exemplo prático, será aproveitado o código que gerou a @fig-scatter10 com pequenas alterações <span class="ot">[^08-graficos-8]</span> e aplicação do <span class="in">`facet_wrap()`</span>.</span>
<span id="cb61-611"><a href="#cb61-611" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-612"><a href="#cb61-612" aria-hidden="true" tabindex="-1"></a><span class="ot">[^08-graficos-8]: </span>Além da função específica para o facetamento, a cor agora é determinada com preenchimento dos pontos ( <span class="in">`fill=”tomato”`</span>) colocado dentro do <span class="in">`geom_point()`</span> e houve uma diminuição do tamanho dos pontos (<span class="in">`size = 4`</span>) .</span>
<span id="cb61-613"><a href="#cb61-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-616"><a href="#cb61-616" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-617"><a href="#cb61-617" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-618"><a href="#cb61-618" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-scatter11</span></span>
<span id="cb61-619"><a href="#cb61-619" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-620"><a href="#cb61-620" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-621"><a href="#cb61-621" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Gráfico de dispersão com facetamento por categoria"</span></span>
<span id="cb61-622"><a href="#cb61-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-623"><a href="#cb61-623" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, </span>
<span id="cb61-624"><a href="#cb61-624" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN)) <span class="sc">+</span></span>
<span id="cb61-625"><a href="#cb61-625" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="dv">0</span>),</span>
<span id="cb61-626"><a href="#cb61-626" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>,</span>
<span id="cb61-627"><a href="#cb61-627" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> <span class="st">"tomato"</span>,</span>
<span id="cb61-628"><a href="#cb61-628" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"gray20"</span>, </span>
<span id="cb61-629"><a href="#cb61-629" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">4</span>, </span>
<span id="cb61-630"><a href="#cb61-630" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb61-631"><a href="#cb61-631" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Comprimento do Recém-nascido (cm)"</span>, </span>
<span id="cb61-632"><a href="#cb61-632" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Peso do Recém-nascido (g)"</span>) <span class="sc">+</span></span>
<span id="cb61-633"><a href="#cb61-633" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb61-634"><a href="#cb61-634" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>sexo)</span>
<span id="cb61-635"><a href="#cb61-635" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-636"><a href="#cb61-636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-637"><a href="#cb61-637" aria-hidden="true" tabindex="-1"></a>O facetamento (@fig-scatter11) permite verificar que a relação entre o comprimento e o peso dos recém-nascidos é nitidamente linear e semelhante entre os sexos.</span>
<span id="cb61-638"><a href="#cb61-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-639"><a href="#cb61-639" aria-hidden="true" tabindex="-1"></a><span class="fu">### Reta de Regressão</span></span>
<span id="cb61-640"><a href="#cb61-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-641"><a href="#cb61-641" aria-hidden="true" tabindex="-1"></a>A função <span class="in">`geom_smooth()`</span> é uma forma geométrica do <span class="in">`ggplot2`</span> usada para visualizar tendências ou padrões entre duas variáveis numéricas. Ele adiciona uma linha suavizada ao gráfico, que ajuda a entender a relação entre os dados , especialmente quando há muitos pontos ou quando a relação não é linear. O <span class="in">`geom_smooth()`</span> ajusta uma curva aos dados, usando métodos estatísticos. A regressão linear usa <span class="in">`method = “lm”`</span> <span class="ot">[^08-graficos-9]</span>. Por padrão, exibe o intervalo de confiança (veja @sec-estimacao), que mostra a incerteza da estimativa da reta. Esta técnica ajuda a identificar padrões que não podem ser visíveis apenas com os pontos brutos.</span>
<span id="cb61-642"><a href="#cb61-642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-643"><a href="#cb61-643" aria-hidden="true" tabindex="-1"></a><span class="ot">[^08-graficos-9]: </span>Outros métodos: <span class="in">`“loess”`</span>, <span class="in">`“glm”`</span>, <span class="in">`“gam”`</span>. Para mais informações, consulte a ajuda <span class="in">`?loess`</span>, <span class="in">`?gam`</span> ou <span class="in">`?glm`</span> ou <span class="in">`NULL`</span>, onde a escolha é automática: usa <span class="in">`“loess”`</span> para <span class="sc">\&lt;</span> 1000 pontos e <span class="in">`“gam”`</span> para <span class="sc">\&gt;</span> 1000.</span>
<span id="cb61-644"><a href="#cb61-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-645"><a href="#cb61-645" aria-hidden="true" tabindex="-1"></a>O código da figura @fig-scatter8 será tomado como base sem a divisão por sexo <span class="ot">[^08-graficos-10]</span>, com modificações, para gerar a reta de regressão.</span>
<span id="cb61-646"><a href="#cb61-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-647"><a href="#cb61-647" aria-hidden="true" tabindex="-1"></a><span class="ot">[^08-graficos-10]: </span>A @fig-scatter11 mostrou que a correlação não parece diferir entre os sexos.</span>
<span id="cb61-648"><a href="#cb61-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-651"><a href="#cb61-651" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-652"><a href="#cb61-652" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-653"><a href="#cb61-653" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-scatter12</span></span>
<span id="cb61-654"><a href="#cb61-654" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-655"><a href="#cb61-655" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-656"><a href="#cb61-656" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Gráfico de dispersão com reta de regressão"</span></span>
<span id="cb61-657"><a href="#cb61-657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-658"><a href="#cb61-658" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsci)</span>
<span id="cb61-659"><a href="#cb61-659" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, </span>
<span id="cb61-660"><a href="#cb61-660" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN)) <span class="sc">+</span></span>
<span id="cb61-661"><a href="#cb61-661" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="dv">0</span>),</span>
<span id="cb61-662"><a href="#cb61-662" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>,</span>
<span id="cb61-663"><a href="#cb61-663" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> <span class="st">"tomato"</span>,</span>
<span id="cb61-664"><a href="#cb61-664" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"gray20"</span>, </span>
<span id="cb61-665"><a href="#cb61-665" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">4</span>, </span>
<span id="cb61-666"><a href="#cb61-666" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb61-667"><a href="#cb61-667" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, </span>
<span id="cb61-668"><a href="#cb61-668" aria-hidden="true" tabindex="-1"></a>              <span class="at">se =</span><span class="cn">TRUE</span>,</span>
<span id="cb61-669"><a href="#cb61-669" aria-hidden="true" tabindex="-1"></a>              <span class="at">color=</span> <span class="st">"darkred"</span>) <span class="sc">+</span></span>
<span id="cb61-670"><a href="#cb61-670" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_lancet</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb61-671"><a href="#cb61-671" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Comprimento do Recém-nascido (cm)"</span>) <span class="sc">+</span></span>
<span id="cb61-672"><a href="#cb61-672" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Peso do Recém-nascido (g)"</span>) <span class="sc">+</span></span>
<span id="cb61-673"><a href="#cb61-673" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span>
<span id="cb61-674"><a href="#cb61-674" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-675"><a href="#cb61-675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-676"><a href="#cb61-676" aria-hidden="true" tabindex="-1"></a>O gráfico da @fig-scatter12, mostra um ajuste dos pontos a uma reta, com inclinação ascendente, ou seja uma correlação positiva, à medida que o comprimento do recém-nascido aumenta, aumenta o seu peso ao nascer. Pela forte inclinação da reta. pressupoe-se que esta correlação é alta.\</span>
<span id="cb61-677"><a href="#cb61-677" aria-hidden="true" tabindex="-1"></a>A distância dos pontos à reta é o erro ou resíduo. A melhor reta ajustada é aquela em que a soma dos quadrados da distância de cada ponto (soma dos quadrados residual) em relação à reta é minimizada (veja também @sec-rls).</span>
<span id="cb61-678"><a href="#cb61-678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-679"><a href="#cb61-679" aria-hidden="true" tabindex="-1"></a><span class="fu">## Histograma {#sec-hist}</span></span>
<span id="cb61-680"><a href="#cb61-680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-681"><a href="#cb61-681" aria-hidden="true" tabindex="-1"></a>O **histograma** é uma ferramenta gráfica que fornece informações sobre o formato da distribuição e dispersão dos dados, permitindo verificar se existe ou não simetria. É usado para dados contínuos.</span>
<span id="cb61-682"><a href="#cb61-682" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-683"><a href="#cb61-683" aria-hidden="true" tabindex="-1"></a>No histograma, as frequências observadas são representadas por intervalos de classes de ocorrência que estão no eixo *x* e a altura das barras, representando a frequência de cada intervalo, no eixo *y*. A área de cada barra é proporcional à porcentagem de observações de cada intervalo. O `geom_histogram()` é a geometria para a construção de um histograma. Aqui, há necessidade apenas do eixo *x*, pois existe uma única variável. A execução do comando retorna a distribuição dessa variável.</span>
<span id="cb61-684"><a href="#cb61-684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-685"><a href="#cb61-685" aria-hidden="true" tabindex="-1"></a>Os dados para plotar um histograma, serão provenientes do dataframe <span class="in">`dados`</span> (@sec-dados8), utilizando um filtro para as gestações a termo, designado como <span class="in">`dadosRNT`</span>.</span>
<span id="cb61-686"><a href="#cb61-686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-689"><a href="#cb61-689" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-690"><a href="#cb61-690" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb61-691"><a href="#cb61-691" aria-hidden="true" tabindex="-1"></a>dadosRNT <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span> </span>
<span id="cb61-692"><a href="#cb61-692" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ig <span class="sc">&gt;=</span> <span class="dv">37</span> <span class="sc">&amp;</span> ig <span class="sc">&lt;</span> <span class="dv">42</span>) </span>
<span id="cb61-693"><a href="#cb61-693" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-694"><a href="#cb61-694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-695"><a href="#cb61-695" aria-hidden="true" tabindex="-1"></a>Será construído um histograma simples da variável <span class="in">`pesoRN`</span> (peso dos recém-nascidos a termo), usando os eguinte código:</span>
<span id="cb61-696"><a href="#cb61-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-699"><a href="#cb61-699" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-700"><a href="#cb61-700" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-701"><a href="#cb61-701" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-hist1</span></span>
<span id="cb61-702"><a href="#cb61-702" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-703"><a href="#cb61-703" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-704"><a href="#cb61-704" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Histograma simples"</span></span>
<span id="cb61-705"><a href="#cb61-705" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-706"><a href="#cb61-706" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-707"><a href="#cb61-707" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-708"><a href="#cb61-708" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT, <span class="fu">aes</span>(<span class="at">x=</span>pesoRN)) <span class="sc">+</span> </span>
<span id="cb61-709"><a href="#cb61-709" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()<span class="sc">+</span></span>
<span id="cb61-710"><a href="#cb61-710" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">" Peso dos Recém-Nascidos (g)"</span>, </span>
<span id="cb61-711"><a href="#cb61-711" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequência"</span>)  <span class="sc">+</span></span>
<span id="cb61-712"><a href="#cb61-712" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span>
<span id="cb61-713"><a href="#cb61-713" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-714"><a href="#cb61-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-715"><a href="#cb61-715" aria-hidden="true" tabindex="-1"></a>A aparência do histograma da @fig-hist1 permite ter uma idéia da distribuição e simetria dos dados, mas não está com um aspecto agradável, amigável. Mesmo que ele expresse corretamente a sua mensagem, essa mensagem pode ser prejudicada por uma má aparência.\</span>
<span id="cb61-716"><a href="#cb61-716" aria-hidden="true" tabindex="-1"></a>O histograma recebe uma variável numérica (no caso, o peso dos recém-nascidos) e a divide em vários “compartimentos”, os intervalos, representados pelas barras. A escolha do tamanho (amplitude) do intervalo é de extrema importância para a aparência do histograma.\</span>
<span id="cb61-717"><a href="#cb61-717" aria-hidden="true" tabindex="-1"></a>O <span class="in">`geom_histogram()`</span> tem um argumento, denominado <span class="in">`binwidth`</span> que permite alterar a amplitude do intervalo. O <span class="in">`binwidth`</span> é um intervalo e sua unidade é igual a da variável que se está “histogramando”. No exemplo, foi usado o peso do recém-nascido (g). Se o objetivo são intervalos de 200 em 200 gramas, o <span class="in">`binwidth = 200`</span>. Uma outra maneira, é usar bins que agrupa em intervalos de mesmo tamanho. Por exemplo <span class="in">`bins = 15`</span>, o <span class="in">`geom_histogram()`</span> dividirá em 15 intervalos iguais, gerando um histograma semelhante ao da @fig-hist2. Junto com a alteração dos intervalos, vamos modificar a cor de preenchimento (<span class="in">`fill`</span>) e bordas (<span class="in">`color`</span>) das barras (@fig-hist2 ).</span>
<span id="cb61-718"><a href="#cb61-718" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-721"><a href="#cb61-721" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-722"><a href="#cb61-722" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-723"><a href="#cb61-723" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-hist2</span></span>
<span id="cb61-724"><a href="#cb61-724" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-725"><a href="#cb61-725" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-726"><a href="#cb61-726" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Histograma simples modificado"</span></span>
<span id="cb61-727"><a href="#cb61-727" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-728"><a href="#cb61-728" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-729"><a href="#cb61-729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-730"><a href="#cb61-730" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT, <span class="fu">aes</span>(<span class="at">x=</span>pesoRN)) <span class="sc">+</span> </span>
<span id="cb61-731"><a href="#cb61-731" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">200</span>,</span>
<span id="cb61-732"><a href="#cb61-732" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fill =</span> <span class="st">"chartreuse"</span>,</span>
<span id="cb61-733"><a href="#cb61-733" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">"darkgreen"</span>)<span class="sc">+</span></span>
<span id="cb61-734"><a href="#cb61-734" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Peso dos Recém-Nascidos (g)"</span>, </span>
<span id="cb61-735"><a href="#cb61-735" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequência"</span>)  <span class="sc">+</span></span>
<span id="cb61-736"><a href="#cb61-736" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span>
<span id="cb61-737"><a href="#cb61-737" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-738"><a href="#cb61-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-739"><a href="#cb61-739" aria-hidden="true" tabindex="-1"></a>Com frequência se observa um histograma com curva normal sobreposta (@fig-hist3) para facilitar a comparação dos dados com a distribuição normal. Isso pode ser conseguido com um código que usa função <span class="in">`stat_function()`</span> para a construção da curva normal, baseada nos dados (média e desvio padrão da variável <span class="in">`pesoRN`</span>) e a função <span class="in">`after_stat(density)`</span>, colocada na estética do histograma, no eixo *y*, para substituir a frequência pela densidade de probabilidade (veja @sec-distprob). O restante do código somente estabelece que a linha da curva será tracejada (<span class="in">`linetype = “dashed”`</span>), de cor vermelha (<span class="in">`color = “red”`</span>) e com tamanho 1 (<span class="in">`linewidth = 1`</span>).</span>
<span id="cb61-740"><a href="#cb61-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-743"><a href="#cb61-743" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-744"><a href="#cb61-744" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-745"><a href="#cb61-745" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-hist3</span></span>
<span id="cb61-746"><a href="#cb61-746" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-747"><a href="#cb61-747" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-748"><a href="#cb61-748" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Histograma com curva normal sobreposta"</span></span>
<span id="cb61-749"><a href="#cb61-749" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-750"><a href="#cb61-750" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-751"><a href="#cb61-751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-752"><a href="#cb61-752" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb61-753"><a href="#cb61-753" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb61-754"><a href="#cb61-754" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-755"><a href="#cb61-755" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT) <span class="sc">+</span> </span>
<span id="cb61-756"><a href="#cb61-756" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> pesoRN, </span>
<span id="cb61-757"><a href="#cb61-757" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> <span class="fu">after_stat</span>(density)),</span>
<span id="cb61-758"><a href="#cb61-758" aria-hidden="true" tabindex="-1"></a>                 <span class="at">binwidth =</span> <span class="dv">200</span>,</span>
<span id="cb61-759"><a href="#cb61-759" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fill =</span> <span class="st">"chartreuse"</span>,</span>
<span id="cb61-760"><a href="#cb61-760" aria-hidden="true" tabindex="-1"></a>                 <span class="at">colour =</span> <span class="st">"darkgreen"</span>) <span class="sc">+</span></span>
<span id="cb61-761"><a href="#cb61-761" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_function</span>(<span class="at">fun =</span> dnorm, </span>
<span id="cb61-762"><a href="#cb61-762" aria-hidden="true" tabindex="-1"></a>                <span class="at">args =</span> <span class="fu">list</span>(<span class="at">mean =</span> <span class="fu">mean</span>(dadosRNT<span class="sc">$</span>pesoRN),</span>
<span id="cb61-763"><a href="#cb61-763" aria-hidden="true" tabindex="-1"></a>                            <span class="at">sd =</span> <span class="fu">sd</span>(dadosRNT<span class="sc">$</span>pesoRN)),</span>
<span id="cb61-764"><a href="#cb61-764" aria-hidden="true" tabindex="-1"></a>                <span class="at">linetype =</span> <span class="st">"dashed"</span>,</span>
<span id="cb61-765"><a href="#cb61-765" aria-hidden="true" tabindex="-1"></a>                <span class="at">linewidth =</span> <span class="dv">1</span>,</span>
<span id="cb61-766"><a href="#cb61-766" aria-hidden="true" tabindex="-1"></a>                <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb61-767"><a href="#cb61-767" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Peso do Recém-Nascido (g)"</span>, </span>
<span id="cb61-768"><a href="#cb61-768" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Densidade de Probabilidade"</span>)  <span class="sc">+</span></span>
<span id="cb61-769"><a href="#cb61-769" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span>
<span id="cb61-770"><a href="#cb61-770" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-771"><a href="#cb61-771" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-772"><a href="#cb61-772" aria-hidden="true" tabindex="-1"></a>Na @fig-hist3, se observa que os pesos dos recém-nascidos se ajustam razoavelmente à curva normal.</span>
<span id="cb61-773"><a href="#cb61-773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-774"><a href="#cb61-774" aria-hidden="true" tabindex="-1"></a><span class="fu">## Boxplot {#sec-bxp}</span></span>
<span id="cb61-775"><a href="#cb61-775" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-776"><a href="#cb61-776" aria-hidden="true" tabindex="-1"></a>O boxplot é uma representação gráfica de um resumo eficaz, de fácil compreensão, de uma ou mais varáveis numéricas. Fornece uma análise visual da posição, dispersão, simetria, caudas e valores discrepantes (outliers) do conjunto de dados (@fig-boxplot).</span>
<span id="cb61-777"><a href="#cb61-777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-778"><a href="#cb61-778" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Posição** – Em relação à posição dos dados, observa-se a linha central do retângulo (a mediana ou segundo quartil).</span>
<span id="cb61-779"><a href="#cb61-779" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-780"><a href="#cb61-780" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Dispersão** – A dispersão dos dados pode ser representada pelo intervalo interquartil (IIQ), tamanho da caixa, que é a diferença entre o terceiro quartil (3ºQ) e o primeiro quartil (1ºQ), ou ainda pela amplitude que é calculada da seguinte maneira: valor máximo – valor mínimo. Embora a amplitude seja de fácil entendimento, o intervalo interquartil é uma estatística mais robusta para medir variabilidade uma vez que não sofre influência de outliers.</span>
<span id="cb61-781"><a href="#cb61-781" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-782"><a href="#cb61-782" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Simetria** – Um conjunto de dados que tem uma distribuição simétrica, terá a linha da mediana no centro do retângulo. Quando a linha da mediana está próxima ao primeiro quartil, os dados são assimétricos positivos e quando a posição da linha da mediana é próxima ao terceiro quartil, os dados são assimétricos negativos. Vale lembrar que a mediana é a medida de tendência central mais indicada quando os dados possuem distribuição assimétrica, uma vez que a média aritmética é influenciada pelos valores extremos.\</span>
<span id="cb61-783"><a href="#cb61-783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-784"><a href="#cb61-784" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Caudas** – As linhas que vão do retângulo até aos outliers podem fornecer o comprimento das caudas da distribuição.\</span>
<span id="cb61-785"><a href="#cb61-785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-786"><a href="#cb61-786" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Valores atípicos** (*Outliers*) – Os valores atípicos indicam possíveis valores discrepantes. No boxplot, as observações são consideradas atípicas quando estão abaixo ou acima dos limites superior e inferior. O limite de detecção de valores atípicos (outliers) é construído utilizando o intervalo interquartil, dado pela distância entre o primeiro e o terceiro quartil. Sendo assim, os limites inferior e superior de detecção de outlier são dados por:</span>
<span id="cb61-787"><a href="#cb61-787" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-788"><a href="#cb61-788" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>o Limite Inferior: 1ºQ – (1,5 <span class="sc">\*</span> IIQ);</span>
<span id="cb61-789"><a href="#cb61-789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-790"><a href="#cb61-790" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>o Limite Superior: 3ºQ + (1,5 <span class="sc">\*</span> IIQ). Tanto o limite superior como o inferior são representados por (º).</span>
<span id="cb61-791"><a href="#cb61-791" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-792"><a href="#cb61-792" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>os Valores extremos: são valores que estão acima ou abaixo de 3 vezes o IIQ e são representados por (<span class="sc">\*</span>).</span>
<span id="cb61-793"><a href="#cb61-793" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-796"><a href="#cb61-796" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-797"><a href="#cb61-797" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb61-798"><a href="#cb61-798" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-boxplot</span></span>
<span id="cb61-799"><a href="#cb61-799" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-800"><a href="#cb61-800" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "70%"</span></span>
<span id="cb61-801"><a href="#cb61-801" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Anatomia de um Boxplot"</span></span>
<span id="cb61-802"><a href="#cb61-802" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-803"><a href="#cb61-803" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"https://i.imgur.com/Dh2UszX.png"</span>)</span>
<span id="cb61-804"><a href="#cb61-804" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-805"><a href="#cb61-805" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-806"><a href="#cb61-806" aria-hidden="true" tabindex="-1"></a>Os boxplots são construídos com o <span class="in">`geom_boxplot()`</span>. Deve-se especificar uma variável quantitativa para o eixo *y* e uma variável qualitativa para o eixo x (grupo). Se não houver, variável *x* e tem-se apenas um vetor de valores numéricos, então, ignora-se a variável *x*.\</span>
<span id="cb61-807"><a href="#cb61-807" aria-hidden="true" tabindex="-1"></a>Para o exemplo de construção de um boxplot, será usada a variável <span class="in">`pesoRN`</span> do conjunto de dados <span class="in">`dadosRNT00`</span> carregados na @sec-grammar.</span>
<span id="cb61-808"><a href="#cb61-808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-811"><a href="#cb61-811" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-812"><a href="#cb61-812" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-813"><a href="#cb61-813" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-bxp1</span></span>
<span id="cb61-814"><a href="#cb61-814" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-815"><a href="#cb61-815" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-816"><a href="#cb61-816" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Boxplot simples"</span></span>
<span id="cb61-817"><a href="#cb61-817" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-818"><a href="#cb61-818" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-819"><a href="#cb61-819" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-820"><a href="#cb61-820" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, </span>
<span id="cb61-821"><a href="#cb61-821" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> pesoRN)) <span class="sc">+</span></span>
<span id="cb61-822"><a href="#cb61-822" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill =</span> <span class="st">"skyblue"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb61-823"><a href="#cb61-823" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span> (<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Peso do Recém-nascido (g)"</span>) <span class="sc">+</span></span>
<span id="cb61-824"><a href="#cb61-824" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span>
<span id="cb61-825"><a href="#cb61-825" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-826"><a href="#cb61-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-827"><a href="#cb61-827" aria-hidden="true" tabindex="-1"></a>O <span class="in">`geom_boxplot()`</span> vazio gera um gráfico sem cores. Colocando o preenchimento <span class="in">`fill = “skyblue”`</span>,tem-se um boxplot de cor azul céu (@fig-bxp1).</span>
<span id="cb61-828"><a href="#cb61-828" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-829"><a href="#cb61-829" aria-hidden="true" tabindex="-1"></a>Na aparência do boxplot , é clássico o seu formato com os “bigodes” terminando em “T”, como mostra a @fig-boxplot, e não um traço simples. Para modificar isso, pode-se criar uma nova camada de barra de erro, usando a função <span class="in">`geom_errorbar()`</span>, antes de <span class="in">`geom_boxblot()`</span>. Assim, como o boxplot passa ser a camada mais superficial, ele impede que se visualize a barra de erro na caixa (@fig-bxp2), desde que ele seja opaco (remover ou zerar o argumento <span class="in">`alpha`</span>). A função <span class="in">`geom_errorbar()`</span> normalmente é usada para barras de erro, no entanto, aqui ela está sendo utilizada com <span class="in">`stat = "boxplot"`</span> <span class="ot">[^08-graficos-11]</span>, o que significa que os cálculos de estatística do boxplot serão aplicados à barra de erro. O argumento <span class="in">`width = 0.1`</span> ajusta a largura das barras de erro, tornando-as mais estreitas.</span>
<span id="cb61-830"><a href="#cb61-830" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-831"><a href="#cb61-831" aria-hidden="true" tabindex="-1"></a><span class="ot">[^08-graficos-11]: </span>O padrão é <span class="in">`stat = "identity"`</span>, o que significa que os valores das barras de erro devem ser fornecidos diretamente no conjunto de dados, sem cálculos adicionais.</span>
<span id="cb61-832"><a href="#cb61-832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-835"><a href="#cb61-835" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-836"><a href="#cb61-836" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-837"><a href="#cb61-837" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-bxp2</span></span>
<span id="cb61-838"><a href="#cb61-838" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-839"><a href="#cb61-839" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-840"><a href="#cb61-840" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Boxplot simples com bigodes em T"</span></span>
<span id="cb61-841"><a href="#cb61-841" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-842"><a href="#cb61-842" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-843"><a href="#cb61-843" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-844"><a href="#cb61-844" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, </span>
<span id="cb61-845"><a href="#cb61-845" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> pesoRN)) <span class="sc">+</span></span>
<span id="cb61-846"><a href="#cb61-846" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="at">stat =</span> <span class="st">"boxplot"</span>, <span class="at">width =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb61-847"><a href="#cb61-847" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill =</span> <span class="st">"skyblue"</span>) <span class="sc">+</span></span>
<span id="cb61-848"><a href="#cb61-848" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span> (<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Peso do Recém-nascido (g)"</span>) <span class="sc">+</span></span>
<span id="cb61-849"><a href="#cb61-849" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span>
<span id="cb61-850"><a href="#cb61-850" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-851"><a href="#cb61-851" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-852"><a href="#cb61-852" aria-hidden="true" tabindex="-1"></a><span class="fu">### Múltiplos boxplots</span></span>
<span id="cb61-853"><a href="#cb61-853" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-854"><a href="#cb61-854" aria-hidden="true" tabindex="-1"></a>Os boxplots são bastante úteis quando se compara dois grupos, tornando-se uma ferramenta conveniente para compreender rapidamente as diferenças entre esses grupos. Ao usar os boxplots para comparar grupos, deve-se ter cuidado, pois os resumos podem levar à perda de informação que pode induzir erros de interpretação. Considere os boxplots da @fig-bxp3, comparando o comprimentos de recém-nascidos a termo masculinos e femininos, a mediana dos meninos é mais alta do a das meninas. As meninas apresentam a mediana fora do centro das caixas, indicando um certo grau de assimetria. Mesmo sendo possível obter informações importantes sobre os dados, usando um boxplot, não se pode discernir a distribuição subjacente dos pontos de dados individuais dentro de cada grupo ou o número total de observações.\</span>
<span id="cb61-855"><a href="#cb61-855" aria-hidden="true" tabindex="-1"></a>As cores dos boxplots serão definidas manualmente dentro do <span class="in">`geom_boxplot()`</span>. Além disso, será adicionada a função <span class="in">`theme(legend.postion= "none)`</span> para remover a legenda, pois ela é redundante neste gráfico, uma vez que os sexos já estão mencionados no eixo *x*.</span>
<span id="cb61-856"><a href="#cb61-856" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-859"><a href="#cb61-859" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-860"><a href="#cb61-860" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-861"><a href="#cb61-861" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-bxp3</span></span>
<span id="cb61-862"><a href="#cb61-862" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-863"><a href="#cb61-863" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-864"><a href="#cb61-864" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Comparação de dois grupos com boxplots"</span></span>
<span id="cb61-865"><a href="#cb61-865" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-866"><a href="#cb61-866" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-867"><a href="#cb61-867" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-868"><a href="#cb61-868" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, <span class="fu">aes</span>(<span class="at">x =</span> sexo, <span class="at">y =</span> compRN)) <span class="sc">+</span></span>
<span id="cb61-869"><a href="#cb61-869" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="at">stat =</span> <span class="st">"boxplot"</span>, <span class="at">width =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb61-870"><a href="#cb61-870" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill=</span> <span class="fu">c</span>(<span class="st">"goldenrod2"</span>, <span class="st">"orangered3"</span>)) <span class="sc">+</span></span>
<span id="cb61-871"><a href="#cb61-871" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Comprimento dos Recém-Nascidos (cm)"</span>) <span class="sc">+</span></span>
<span id="cb61-872"><a href="#cb61-872" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.postion=</span> <span class="st">"none"</span>) <span class="sc">+</span>  </span>
<span id="cb61-873"><a href="#cb61-873" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span>
<span id="cb61-874"><a href="#cb61-874" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-875"><a href="#cb61-875" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-876"><a href="#cb61-876" aria-hidden="true" tabindex="-1"></a>Se necessários mais informações, é possível adicionar *jitter*<span class="ot">[^08-graficos-12]</span> no boxplot da (@fig-bxp4) para torná-lo mais esclarecedor e visualizar melhor a distribuição dos dados.</span>
<span id="cb61-877"><a href="#cb61-877" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-878"><a href="#cb61-878" aria-hidden="true" tabindex="-1"></a><span class="ot">[^08-graficos-12]: </span>Prestar atenção para o fato de que o *jitter* é aleatório, por isso em cada execução do código os pontos se distribuem em posições diferentes.</span>
<span id="cb61-879"><a href="#cb61-879" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-882"><a href="#cb61-882" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-883"><a href="#cb61-883" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-884"><a href="#cb61-884" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-bxp4</span></span>
<span id="cb61-885"><a href="#cb61-885" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-886"><a href="#cb61-886" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-887"><a href="#cb61-887" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Boxplots com jitter"</span></span>
<span id="cb61-888"><a href="#cb61-888" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-889"><a href="#cb61-889" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-890"><a href="#cb61-890" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-891"><a href="#cb61-891" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, <span class="fu">aes</span>(<span class="at">x =</span> sexo, <span class="at">y =</span> compRN)) <span class="sc">+</span></span>
<span id="cb61-892"><a href="#cb61-892" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="at">stat =</span> <span class="st">"boxplot"</span>, <span class="at">width =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb61-893"><a href="#cb61-893" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill=</span> <span class="fu">c</span>(<span class="st">"goldenrod2"</span>, <span class="st">"orangered3"</span>)) <span class="sc">+</span></span>
<span id="cb61-894"><a href="#cb61-894" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">color=</span><span class="st">"grey30"</span>, <span class="at">size=</span><span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb61-895"><a href="#cb61-895" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Comprimento dos Recém-Nascidos (cm)"</span>) <span class="sc">+</span></span>
<span id="cb61-896"><a href="#cb61-896" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.postion=</span> <span class="st">"none"</span>) <span class="sc">+</span>  </span>
<span id="cb61-897"><a href="#cb61-897" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span>
<span id="cb61-898"><a href="#cb61-898" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-899"><a href="#cb61-899" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-900"><a href="#cb61-900" aria-hidden="true" tabindex="-1"></a><span class="fu">### Boxplots horizontais {#sec-bxphorizontal}</span></span>
<span id="cb61-901"><a href="#cb61-901" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-902"><a href="#cb61-902" aria-hidden="true" tabindex="-1"></a>Para criar boxplots horizontais, adiciona-se a função <span class="in">`coord_flip()`</span> à função <span class="in">`geom_boxplot()`</span> para inverter os eixos. Em um boxplot padrão, a variável categórica está no eixo *x* e a variável numérica no eixo *y*. Com `coord_flip()`, as variáveis são invertidas, colocando a variável categórica no eixo *y* e a numérica no eixo *x*, resultando no boxplot horizontal da @fig-bxp5.</span>
<span id="cb61-903"><a href="#cb61-903" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-906"><a href="#cb61-906" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-907"><a href="#cb61-907" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-908"><a href="#cb61-908" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-bxp5</span></span>
<span id="cb61-909"><a href="#cb61-909" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-910"><a href="#cb61-910" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-911"><a href="#cb61-911" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Boxplots horizontais"</span></span>
<span id="cb61-912"><a href="#cb61-912" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-913"><a href="#cb61-913" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-914"><a href="#cb61-914" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-915"><a href="#cb61-915" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb61-916"><a href="#cb61-916" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb61-917"><a href="#cb61-917" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-918"><a href="#cb61-918" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT100, <span class="fu">aes</span>(<span class="at">x =</span> sexo, <span class="at">y =</span> compRN)) <span class="sc">+</span></span>
<span id="cb61-919"><a href="#cb61-919" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="at">stat =</span> <span class="st">"boxplot"</span>, <span class="at">width =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb61-920"><a href="#cb61-920" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill=</span> <span class="fu">c</span>(<span class="st">"goldenrod2"</span>, <span class="st">"orangered3"</span>)) <span class="sc">+</span></span>
<span id="cb61-921"><a href="#cb61-921" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb61-922"><a href="#cb61-922" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Comprimento dos Recém-Nascidos (cm)"</span>) <span class="sc">+</span></span>
<span id="cb61-923"><a href="#cb61-923" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.postion=</span> <span class="st">"none"</span>) <span class="sc">+</span>  </span>
<span id="cb61-924"><a href="#cb61-924" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span>
<span id="cb61-925"><a href="#cb61-925" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-926"><a href="#cb61-926" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-927"><a href="#cb61-927" aria-hidden="true" tabindex="-1"></a><span class="fu">## Gráfico de violino {#sec-violin}</span></span>
<span id="cb61-928"><a href="#cb61-928" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-929"><a href="#cb61-929" aria-hidden="true" tabindex="-1"></a>Os gráficos de violino permitem visualizar a distribuição de uma variável numérica para um ou vários grupos. No <span class="in">`ggplot2`</span>, são construídos com o <span class="in">`geom_violin()`</span> e, com frequência, substituem os boxplots, principalmente, quando se tem uma amostra muito grande e usar o *jitter* no boxplot pode não ser eficaz, pois os pontos podem se sobrepor e tornar a figura inelegível.</span>
<span id="cb61-930"><a href="#cb61-930" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-931"><a href="#cb61-931" aria-hidden="true" tabindex="-1"></a>Cada “violino” representa uma variável de agrupamento. A forma representa a estimativa de densidade de probabilidade da variável: quanto mais pontos de dados em um intervalo específico, mais largo será o violino para esse intervalo. É muito parecido com um boxplot, mas permite uma compreensão mais profunda da distribuição.</span>
<span id="cb61-932"><a href="#cb61-932" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-933"><a href="#cb61-933" aria-hidden="true" tabindex="-1"></a>O gráfico de violino é uma técnica poderosa de visualização de dados, pois permite comparar a classificação de vários grupos e sua distribuição. São particularmente adequados quando a quantidade de dados é grande e é impossível mostrar observações individuais. Para conjuntos de dados pequenos, um boxplot com jitter é provavelmente uma opção melhor, pois realmente mostra todas as informações.</span>
<span id="cb61-934"><a href="#cb61-934" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-935"><a href="#cb61-935" aria-hidden="true" tabindex="-1"></a>Para o exemplo prático, será usada uma amostra proveniente do conjunto de dados <span class="in">`dados`</span> (veja @sec-dados8), com filtrado para as gestações a termo, <span class="in">`dadosRNT`</span>. Serão utilizadas as variáveis <span class="in">`pesoRN`</span> e <span class="in">`categFumo`</span>, tabagismo entre as gestantes, de acordo com a intensidade (não fumante, fumante leve. fumante moderada, fumante pesada) . O objetivo é observar visualmente o impacto do tabagismo sobre os pesos dos recém-nascidos .</span>
<span id="cb61-936"><a href="#cb61-936" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-937"><a href="#cb61-937" aria-hidden="true" tabindex="-1"></a>Para construir o gráfico de violino, serão usados os argumentos <span class="in">`trim = FALSE`</span>, para não aparar as caudas, e <span class="in">`draw_quantiles = c(0.25, 0.5, 0.75)`</span>, para traçar os quartis (@fig-violino1). As cores das categoria foram definidas pelo <span class="in">`ggplot2`</span>.\</span>
<span id="cb61-938"><a href="#cb61-938" aria-hidden="true" tabindex="-1"></a>Reiterando, função <span class="in">`theme(legend.position = "none")`</span> será colocada para evitar que a legenda das categorias apareça, uma vez que ela é explicita no gráfico.</span>
<span id="cb61-939"><a href="#cb61-939" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-942"><a href="#cb61-942" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-943"><a href="#cb61-943" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-944"><a href="#cb61-944" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-violino1</span></span>
<span id="cb61-945"><a href="#cb61-945" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-946"><a href="#cb61-946" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-947"><a href="#cb61-947" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Gráfico de violino com os quartis"</span></span>
<span id="cb61-948"><a href="#cb61-948" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-949"><a href="#cb61-949" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-950"><a href="#cb61-950" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-951"><a href="#cb61-951" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT, <span class="fu">aes</span>(<span class="at">x=</span>categFumo, <span class="at">y=</span>pesoRN,         </span>
<span id="cb61-952"><a href="#cb61-952" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill=</span>categFumo)) <span class="sc">+</span> </span>
<span id="cb61-953"><a href="#cb61-953" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">trim =</span> <span class="cn">FALSE</span>,</span>
<span id="cb61-954"><a href="#cb61-954" aria-hidden="true" tabindex="-1"></a>              <span class="at">draw_quantiles =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>)) <span class="sc">+</span></span>
<span id="cb61-955"><a href="#cb61-955" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tabagismo Materno"</span>, </span>
<span id="cb61-956"><a href="#cb61-956" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Peso do Recém-Nascido (g)"</span>)  <span class="sc">+</span></span>
<span id="cb61-957"><a href="#cb61-957" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb61-958"><a href="#cb61-958" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb61-959"><a href="#cb61-959" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-960"><a href="#cb61-960" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-961"><a href="#cb61-961" aria-hidden="true" tabindex="-1"></a>Uma alteração interessante que pode ser feita no gráfico de violino, é colocar um boxplot, dentro do mesmo (@fig-violino2), faz o efeito do argumento <span class="in">`draw_quantiles()`</span>, usado na @fig-violino1. Facilita a interpretação e, na opinião do autor, é mais bonito e elegante. O argumento <span class="in">`width = 0.5`</span>, na função <span class="in">`geom_boxplot()`</span>, estabelece a largura do boxplot, evitando que o boxplot se estenda para fora do "violino".</span>
<span id="cb61-962"><a href="#cb61-962" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-965"><a href="#cb61-965" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-966"><a href="#cb61-966" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-967"><a href="#cb61-967" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-violino2</span></span>
<span id="cb61-968"><a href="#cb61-968" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-969"><a href="#cb61-969" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-970"><a href="#cb61-970" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Gráfico de violino com boxplots"</span></span>
<span id="cb61-971"><a href="#cb61-971" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-972"><a href="#cb61-972" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-973"><a href="#cb61-973" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-974"><a href="#cb61-974" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dadosRNT, <span class="fu">aes</span>(<span class="at">x=</span>categFumo, <span class="at">y=</span>pesoRN, <span class="at">fill=</span>categFumo)) <span class="sc">+</span> </span>
<span id="cb61-975"><a href="#cb61-975" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">trim =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb61-976"><a href="#cb61-976" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb61-977"><a href="#cb61-977" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tabagismo Materno"</span>, </span>
<span id="cb61-978"><a href="#cb61-978" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Peso do Recém-Nascido (g)"</span>)  <span class="sc">+</span></span>
<span id="cb61-979"><a href="#cb61-979" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb61-980"><a href="#cb61-980" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb61-981"><a href="#cb61-981" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-982"><a href="#cb61-982" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-983"><a href="#cb61-983" aria-hidden="true" tabindex="-1"></a>A observação da @fig-violino2 mostra uma tendência do peso do recém-nascido diminuir à medida que intensidade do fumo aumenta. O gráfico sugere que esta tendência não é sugnificativa, pois as caixas se sobrepõem.</span>
<span id="cb61-984"><a href="#cb61-984" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-985"><a href="#cb61-985" aria-hidden="true" tabindex="-1"></a>Para obter uma versão horizontal da @fig-violino1, chama-se a função <span class="in">`coord_flip()`</span> <span class="ot">[^08-graficos-13]</span>que permite inverter os eixos *x* e *y* e, assim, tornar a interpretação mais intuitiva, mais amigável (?).</span>
<span id="cb61-986"><a href="#cb61-986" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-987"><a href="#cb61-987" aria-hidden="true" tabindex="-1"></a><span class="ot">[^08-graficos-13]: </span>Consulte a construção da @fig-bxp5</span>
<span id="cb61-988"><a href="#cb61-988" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-989"><a href="#cb61-989" aria-hidden="true" tabindex="-1"></a>Para <span class="co">[</span><span class="ot">interpretar um gráfico de violino</span><span class="co">]</span>{.underline}, observar o seguinte:</span>
<span id="cb61-990"><a href="#cb61-990" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-991"><a href="#cb61-991" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Forma do violino, observando a largura em diferentes pontos para entender onde os dados se concentram.</span>
<span id="cb61-992"><a href="#cb61-992" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-993"><a href="#cb61-993" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>A linha mediana e a caixa do boxplot associado indicam a mediana e o intervalo interquartil, respectivamente.</span>
<span id="cb61-994"><a href="#cb61-994" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-995"><a href="#cb61-995" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Se o violino é simétrico em torno da mediana, a distribuição dos dados é aproximadamente simétrica.</span>
<span id="cb61-996"><a href="#cb61-996" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-997"><a href="#cb61-997" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Se a parte superior do violino é mais larga, os dados podem ser assimétricos, inclinados para valores maiores.</span>
<span id="cb61-998"><a href="#cb61-998" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-999"><a href="#cb61-999" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Em múltiplas categorias, pode-se comparar rapidamente as distribuições. Diferentes formas e larguras entre as categorias fornecem uma visão clara das variações entre elas.</span>
<span id="cb61-1000"><a href="#cb61-1000" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1001"><a href="#cb61-1001" aria-hidden="true" tabindex="-1"></a><span class="fu">## Gráfico de barras</span></span>
<span id="cb61-1002"><a href="#cb61-1002" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1003"><a href="#cb61-1003" aria-hidden="true" tabindex="-1"></a>O gráfico de barras é uma análogo do histograma, onde as barras, ao contrário deste, são separadas. Os gráficos de barra exibem a distribuição (frequências) de uma variável categórica através de barras verticais ou horizontais, ou sobrepostas. A função <span class="in">`geom_bar()`</span> permite delinear o gráfico de barras da @fig-bar1.</span>
<span id="cb61-1004"><a href="#cb61-1004" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1005"><a href="#cb61-1005" aria-hidden="true" tabindex="-1"></a>Para os exemplos práticos, será usada uma amostra proveniente do conjunto de dados dados (@sec-dados8), manipulando as mesmas variáveis: <span class="in">`categFumo`</span> , tabagismo materno, e <span class="in">`categIdade`</span> , idade materna categorizada. Em outros exemplos de grágicos barras, serão usadas as variáveis <span class="in">`fumo`</span> (fumante e não fumante), <span class="in">`para`</span> (número de filhos anteriores) e <span class="in">`sexo`</span> do recém-nascido.</span>
<span id="cb61-1006"><a href="#cb61-1006" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1007"><a href="#cb61-1007" aria-hidden="true" tabindex="-1"></a>O gráfico de barras inicial servirá para para visualizar a prevalência (@sec-prevalencia) de fumo na gestação categorizada pela intensidade do fumo.</span>
<span id="cb61-1008"><a href="#cb61-1008" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1011"><a href="#cb61-1011" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-1012"><a href="#cb61-1012" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-1013"><a href="#cb61-1013" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-bar1</span></span>
<span id="cb61-1014"><a href="#cb61-1014" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-1015"><a href="#cb61-1015" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-1016"><a href="#cb61-1016" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Gráfico de barras padrão do ggplot2"</span></span>
<span id="cb61-1017"><a href="#cb61-1017" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-1018"><a href="#cb61-1018" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-1019"><a href="#cb61-1019" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1020"><a href="#cb61-1020" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados) <span class="sc">+</span> </span>
<span id="cb61-1021"><a href="#cb61-1021" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> categFumo, </span>
<span id="cb61-1022"><a href="#cb61-1022" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> <span class="fu">after_stat</span>(count<span class="sc">/</span><span class="fu">sum</span>(count))))<span class="sc">+</span> </span>
<span id="cb61-1023"><a href="#cb61-1023" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tabagismo Materno"</span>, </span>
<span id="cb61-1024"><a href="#cb61-1024" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Proporção por categoria"</span>)  <span class="sc">+</span></span>
<span id="cb61-1025"><a href="#cb61-1025" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span>
<span id="cb61-1026"><a href="#cb61-1026" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-1027"><a href="#cb61-1027" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1028"><a href="#cb61-1028" aria-hidden="true" tabindex="-1"></a>As cores de preenchimento das barras podem ser alteradas, de acordo com a variável categórica. As cores serão estabelecidas de acordo com o padrão do ggplot2 (@fig-bar2). O gráfico retornará uma legenda, mostrando o que representa cada cor. Ela é desnecessária porque fica explicito, no eixo *x*, o que cada barra representa. Portanto, é uma boa conduta remover a legenda com a função <span class="in">`theme (legend.position = "none")`</span>, como já visto em outras ocasiões (boxplots e gráfico de violino):</span>
<span id="cb61-1029"><a href="#cb61-1029" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1032"><a href="#cb61-1032" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-1033"><a href="#cb61-1033" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-1034"><a href="#cb61-1034" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-bar2</span></span>
<span id="cb61-1035"><a href="#cb61-1035" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-1036"><a href="#cb61-1036" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-1037"><a href="#cb61-1037" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: " Gráfico de barras com as cores das barras estabelecidas pelo ggplot2"</span></span>
<span id="cb61-1038"><a href="#cb61-1038" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-1039"><a href="#cb61-1039" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-1040"><a href="#cb61-1040" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1041"><a href="#cb61-1041" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados) <span class="sc">+</span> </span>
<span id="cb61-1042"><a href="#cb61-1042" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> categFumo, </span>
<span id="cb61-1043"><a href="#cb61-1043" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> <span class="fu">after_stat</span>(count<span class="sc">/</span><span class="fu">sum</span>(count)),</span>
<span id="cb61-1044"><a href="#cb61-1044" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> categFumo))<span class="sc">+</span> </span>
<span id="cb61-1045"><a href="#cb61-1045" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tabagismo Materno"</span>, </span>
<span id="cb61-1046"><a href="#cb61-1046" aria-hidden="true" tabindex="-1"></a>                      <span class="at">y =</span> <span class="st">"Proporção por categoria"</span>)  <span class="sc">+</span></span>
<span id="cb61-1047"><a href="#cb61-1047" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb61-1048"><a href="#cb61-1048" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb61-1049"><a href="#cb61-1049" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-1050"><a href="#cb61-1050" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1051"><a href="#cb61-1051" aria-hidden="true" tabindex="-1"></a>As cores padrão do ggplot2 podem ser alteradas, como foi visto na @sec-coresr, escolhendo manualmente, ou usando uma paleta, como as apresentadas pelo pacote <span class="in">`ggsci`</span>, <span class="in">`RColorBrewer`</span> ou <span class="in">`paletteer`</span>. No exemplo, será usada a paleta do periódico *New England Journal of Medicine* (NEJM), @fig-bar3.</span>
<span id="cb61-1052"><a href="#cb61-1052" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1055"><a href="#cb61-1055" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-1056"><a href="#cb61-1056" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-1057"><a href="#cb61-1057" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-bar3</span></span>
<span id="cb61-1058"><a href="#cb61-1058" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-1059"><a href="#cb61-1059" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-1060"><a href="#cb61-1060" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Gráfico de barras com cores da paleta NEJM"</span></span>
<span id="cb61-1061"><a href="#cb61-1061" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-1062"><a href="#cb61-1062" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-1063"><a href="#cb61-1063" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1064"><a href="#cb61-1064" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsci)</span>
<span id="cb61-1065"><a href="#cb61-1065" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1066"><a href="#cb61-1066" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados) <span class="sc">+</span> </span>
<span id="cb61-1067"><a href="#cb61-1067" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> categFumo, </span>
<span id="cb61-1068"><a href="#cb61-1068" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> <span class="fu">after_stat</span>(count<span class="sc">/</span><span class="fu">sum</span>(count)),</span>
<span id="cb61-1069"><a href="#cb61-1069" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> categFumo))<span class="sc">+</span> </span>
<span id="cb61-1070"><a href="#cb61-1070" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_nejm</span>() <span class="sc">+</span></span>
<span id="cb61-1071"><a href="#cb61-1071" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tabagismo Materno"</span>, </span>
<span id="cb61-1072"><a href="#cb61-1072" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Proporção por categoria"</span>)  <span class="sc">+</span></span>
<span id="cb61-1073"><a href="#cb61-1073" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb61-1074"><a href="#cb61-1074" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb61-1075"><a href="#cb61-1075" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-1076"><a href="#cb61-1076" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1077"><a href="#cb61-1077" aria-hidden="true" tabindex="-1"></a><span class="fu">### Proporção ou porcentagem</span></span>
<span id="cb61-1078"><a href="#cb61-1078" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1079"><a href="#cb61-1079" aria-hidden="true" tabindex="-1"></a>Na @fig-bar3, a unidade do eixo *y* encontra-se como uma proporção `y = after_stat(count/sum(count)`, ou seja, y = *frequência por categoria*/*total de observações*.\</span>
<span id="cb61-1080"><a href="#cb61-1080" aria-hidden="true" tabindex="-1"></a>É possível modificar para porcentagem (@fig-bar3a), empregando a função <span class="in">`percent_format()`</span> do <span class="in">`pacote scales`</span>. O código é praticamente igual, apenas acrescentar o argumento <span class="in">`labels = percent_format(accuracy = 0.1, decimal.mark = “,”)`</span> dentro da função <span class="in">`scale_y_continuous()`</span>.</span>
<span id="cb61-1081"><a href="#cb61-1081" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1084"><a href="#cb61-1084" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-1085"><a href="#cb61-1085" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-1086"><a href="#cb61-1086" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-bar3a</span></span>
<span id="cb61-1087"><a href="#cb61-1087" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-1088"><a href="#cb61-1088" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-1089"><a href="#cb61-1089" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Gráfico de barras com porcentagem no eixo y"</span></span>
<span id="cb61-1090"><a href="#cb61-1090" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-1091"><a href="#cb61-1091" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-1092"><a href="#cb61-1092" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1093"><a href="#cb61-1093" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsci)</span>
<span id="cb61-1094"><a href="#cb61-1094" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb61-1095"><a href="#cb61-1095" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1096"><a href="#cb61-1096" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados) <span class="sc">+</span> </span>
<span id="cb61-1097"><a href="#cb61-1097" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> categFumo, </span>
<span id="cb61-1098"><a href="#cb61-1098" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> <span class="fu">after_stat</span>(count<span class="sc">/</span><span class="fu">sum</span>(count)),</span>
<span id="cb61-1099"><a href="#cb61-1099" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> categFumo))<span class="sc">+</span> </span>
<span id="cb61-1100"><a href="#cb61-1100" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_nejm</span>() <span class="sc">+</span></span>
<span id="cb61-1101"><a href="#cb61-1101" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span> (<span class="at">labels =</span> <span class="fu">percent_format</span> (<span class="at">accuracy =</span> <span class="fl">0.1</span>,</span>
<span id="cb61-1102"><a href="#cb61-1102" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">decimal.mark =</span> <span class="st">","</span>)) <span class="sc">+</span></span>
<span id="cb61-1103"><a href="#cb61-1103" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tabagismo Materno"</span>, </span>
<span id="cb61-1104"><a href="#cb61-1104" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Porcentagem por categoria"</span>)  <span class="sc">+</span></span>
<span id="cb61-1105"><a href="#cb61-1105" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb61-1106"><a href="#cb61-1106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb61-1107"><a href="#cb61-1107" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-1108"><a href="#cb61-1108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1109"><a href="#cb61-1109" aria-hidden="true" tabindex="-1"></a><span class="fu">### Controle da largura da barra com width</span></span>
<span id="cb61-1110"><a href="#cb61-1110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1111"><a href="#cb61-1111" aria-hidden="true" tabindex="-1"></a>Para controlar a largura e o espaço entre as barras, num gráfico de barras no <span class="in">`ggplot2`</span>, usar o argumento <span class="in">`width`</span> dentro da função <span class="in">`geom_bar()`</span>, definindo um valor entre 0 e 1 (ou um valor fixo). Um valor de 1 representa a largura total, ou seja, não haverá espaço entre as barras, como no histograma.</span>
<span id="cb61-1112"><a href="#cb61-1112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1113"><a href="#cb61-1113" aria-hidden="true" tabindex="-1"></a>Como exemplo, será alterado a largura das barras do gráfico da figura @fig-bar3 . Se o objetivo é que as barras sejam mais estreitas e com mais espaço entre elas, deve-se definir um valor para <span class="in">`width`</span> inferior a 0.9 (padrão). Na @fig-bar3b, será usado <span class="in">`width = 0.5`</span>.</span>
<span id="cb61-1114"><a href="#cb61-1114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1117"><a href="#cb61-1117" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-1118"><a href="#cb61-1118" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-1119"><a href="#cb61-1119" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-bar3b</span></span>
<span id="cb61-1120"><a href="#cb61-1120" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-1121"><a href="#cb61-1121" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-1122"><a href="#cb61-1122" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Gráfico de barras com cores da paleta NEJM"</span></span>
<span id="cb61-1123"><a href="#cb61-1123" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-1124"><a href="#cb61-1124" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-1125"><a href="#cb61-1125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1126"><a href="#cb61-1126" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb61-1127"><a href="#cb61-1127" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb61-1128"><a href="#cb61-1128" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsci)</span>
<span id="cb61-1129"><a href="#cb61-1129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1130"><a href="#cb61-1130" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados) <span class="sc">+</span> </span>
<span id="cb61-1131"><a href="#cb61-1131" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> categFumo, </span>
<span id="cb61-1132"><a href="#cb61-1132" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> <span class="fu">after_stat</span>(count<span class="sc">/</span><span class="fu">sum</span>(count)),</span>
<span id="cb61-1133"><a href="#cb61-1133" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> categFumo),</span>
<span id="cb61-1134"><a href="#cb61-1134" aria-hidden="true" tabindex="-1"></a>           <span class="at">width =</span> <span class="fl">0.5</span>)<span class="sc">+</span> </span>
<span id="cb61-1135"><a href="#cb61-1135" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_nejm</span>() <span class="sc">+</span></span>
<span id="cb61-1136"><a href="#cb61-1136" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tabagismo Materno"</span>, </span>
<span id="cb61-1137"><a href="#cb61-1137" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Proporção por categoria"</span>)  <span class="sc">+</span></span>
<span id="cb61-1138"><a href="#cb61-1138" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb61-1139"><a href="#cb61-1139" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb61-1140"><a href="#cb61-1140" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-1141"><a href="#cb61-1141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1142"><a href="#cb61-1142" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb61-1143"><a href="#cb61-1143" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exercício</span></span>
<span id="cb61-1144"><a href="#cb61-1144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1145"><a href="#cb61-1145" aria-hidden="true" tabindex="-1"></a>Qual a diferença entre <span class="in">`geom_bar()`</span> e <span class="in">`geom_col()`</span>? Construir o mesmo gráfico de barras da @fig-bar3b, usando a <span class="in">`geom_col()`</span>.</span>
<span id="cb61-1146"><a href="#cb61-1146" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb61-1147"><a href="#cb61-1147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1148"><a href="#cb61-1148" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Resposta</span><span class="co">]</span>{.underline} <span class="ot">[^08-graficos-14]</span></span>
<span id="cb61-1149"><a href="#cb61-1149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1150"><a href="#cb61-1150" aria-hidden="true" tabindex="-1"></a><span class="ot">[^08-graficos-14]: </span>A <span class="in">`geom_bar()`</span> conta as ocorrências e usa a altura para representar essa contagem, enquanto <span class="in">`geom_col()`</span> usa a altura para representar o valor especificado na estética *y* . Ambas as funções aceitam o argumento `width`. Enquanto o `geom_bar()` com `after_start()` calcula os valores automaticamente, o `geom_col()` exige que se forneça os valores de *y* (as proporções) diretamente.</span>
<span id="cb61-1151"><a href="#cb61-1151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1152"><a href="#cb61-1152" aria-hidden="true" tabindex="-1"></a><span class="fu">### Gráfico de barras empilhadas</span></span>
<span id="cb61-1153"><a href="#cb61-1153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1154"><a href="#cb61-1154" aria-hidden="true" tabindex="-1"></a>O gráfico de barras empilhadas é ideal para visualizar a proporção de cada grupo dentro de uma categoria. A altura total da barra representa a contagem total para a variável no eixo *x*, e as cores dentro da barra mostram a distribuição da segunda variável.</span>
<span id="cb61-1155"><a href="#cb61-1155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1156"><a href="#cb61-1156" aria-hidden="true" tabindex="-1"></a>Para criá-lo, mapear a primeira variável para o **eixo x** e a segunda variável para a **estética fill**. A função <span class="in">`geom_bar()`</span> faz o empilhamento por padrão.</span>
<span id="cb61-1157"><a href="#cb61-1157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1158"><a href="#cb61-1158" aria-hidden="true" tabindex="-1"></a>Com os mesmos dados, usados até nos gráficos de barras (@sec-dados8), agora serão trabalhadas as variáveis <span class="in">`categIdade`</span> e <span class="in">`fumo`</span> com o objetivo de ver a proporção de tabagismo por faixa etária. Como aprimoramentos, se pretende colocar as porcentagens de fumantes em cada uma das faixas etária no topo das barras.</span>
<span id="cb61-1159"><a href="#cb61-1159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1160"><a href="#cb61-1160" aria-hidden="true" tabindex="-1"></a>Em primeiro lugar, calcular as *proporções* de fumante em cada uma das faixas etárias e a *posição vertical dos rótulos no eixo y*.</span>
<span id="cb61-1161"><a href="#cb61-1161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1164"><a href="#cb61-1164" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-1165"><a href="#cb61-1165" aria-hidden="true" tabindex="-1"></a>proporcoes_fumo <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span></span>
<span id="cb61-1166"><a href="#cb61-1166" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(categIdade, fumo) <span class="sc">%&gt;%</span></span>
<span id="cb61-1167"><a href="#cb61-1167" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb61-1168"><a href="#cb61-1168" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(categIdade) <span class="sc">%&gt;%</span></span>
<span id="cb61-1169"><a href="#cb61-1169" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">posicao_y =</span> <span class="fu">sum</span>(n) <span class="sc">-</span> (<span class="fl">0.5</span> <span class="sc">*</span> n),</span>
<span id="cb61-1170"><a href="#cb61-1170" aria-hidden="true" tabindex="-1"></a>         <span class="at">total_faixa =</span> <span class="fu">sum</span>(n),</span>
<span id="cb61-1171"><a href="#cb61-1171" aria-hidden="true" tabindex="-1"></a>         <span class="at">proporcao_fumo =</span> n <span class="sc">/</span> total_faixa) <span class="sc">%&gt;%</span> </span>
<span id="cb61-1172"><a href="#cb61-1172" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(fumo <span class="sc">==</span> <span class="st">"Fumante"</span>)</span>
<span id="cb61-1173"><a href="#cb61-1173" aria-hidden="true" tabindex="-1"></a>proporcoes_fumo</span>
<span id="cb61-1174"><a href="#cb61-1174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1175"><a href="#cb61-1175" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-1176"><a href="#cb61-1176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1177"><a href="#cb61-1177" aria-hidden="true" tabindex="-1"></a>Após realizado o cálculo das proporções de fumantes em cada faixa etária, constrói-se o gráfico. Para colocar as porcentagens no gráfico<span class="ot">[^08-graficos-15]</span>, será usada a <span class="in">`geometria geom_text()`</span>, informando essas porcentagens e a localização no eixo *x* e *y*, resultando na @fig-bar4.</span>
<span id="cb61-1178"><a href="#cb61-1178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1179"><a href="#cb61-1179" aria-hidden="true" tabindex="-1"></a><span class="ot">[^08-graficos-15]: </span>Este acréscimo das porcentagens dentro do gráfico é opcional. Para fazer o mesmo gráfico sem esta informação, não há necessidade dos cálculos das proporções e nem do <span class="in">`geom_text()`</span> que deve ser removido.</span>
<span id="cb61-1180"><a href="#cb61-1180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1183"><a href="#cb61-1183" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-1184"><a href="#cb61-1184" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-1185"><a href="#cb61-1185" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-bar4</span></span>
<span id="cb61-1186"><a href="#cb61-1186" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-1187"><a href="#cb61-1187" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-1188"><a href="#cb61-1188" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Gráfico de barras empilhadas"</span></span>
<span id="cb61-1189"><a href="#cb61-1189" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-1190"><a href="#cb61-1190" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-1191"><a href="#cb61-1191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1192"><a href="#cb61-1192" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> categIdade, <span class="at">fill =</span> fumo)) <span class="sc">+</span></span>
<span id="cb61-1193"><a href="#cb61-1193" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">color =</span><span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb61-1194"><a href="#cb61-1194" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"gray90"</span>,<span class="st">"skyblue"</span>)) <span class="sc">+</span></span>
<span id="cb61-1195"><a href="#cb61-1195" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Faixa Etária"</span>, </span>
<span id="cb61-1196"><a href="#cb61-1196" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequência"</span>,</span>
<span id="cb61-1197"><a href="#cb61-1197" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="cn">NULL</span>)  <span class="sc">+</span></span>
<span id="cb61-1198"><a href="#cb61-1198" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> proporcoes_fumo,</span>
<span id="cb61-1199"><a href="#cb61-1199" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">x =</span> categIdade,</span>
<span id="cb61-1200"><a href="#cb61-1200" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> posicao_y,</span>
<span id="cb61-1201"><a href="#cb61-1201" aria-hidden="true" tabindex="-1"></a>                <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">percent</span>(proporcao_fumo, <span class="at">accuracy =</span> <span class="fl">0.1</span>)),</span>
<span id="cb61-1202"><a href="#cb61-1202" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">4</span>,</span>
<span id="cb61-1203"><a href="#cb61-1203" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"black"</span> ) <span class="sc">+</span> </span>
<span id="cb61-1204"><a href="#cb61-1204" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span> (<span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.05</span>))) <span class="sc">+</span></span>
<span id="cb61-1205"><a href="#cb61-1205" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Faixa Etária"</span>,</span>
<span id="cb61-1206"><a href="#cb61-1206" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequência"</span>,</span>
<span id="cb61-1207"><a href="#cb61-1207" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb61-1208"><a href="#cb61-1208" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb61-1209"><a href="#cb61-1209" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span>
<span id="cb61-1210"><a href="#cb61-1210" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-1211"><a href="#cb61-1211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1212"><a href="#cb61-1212" aria-hidden="true" tabindex="-1"></a><span class="fu">### Gráfico de barras lado a lado</span></span>
<span id="cb61-1213"><a href="#cb61-1213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1214"><a href="#cb61-1214" aria-hidden="true" tabindex="-1"></a>O gráfico de barras lado a lado (ou agrupado) é útil para comparar diretamente a contagem de cada grupo entre as categorias. As barras de uma mesma categoria são dispostas lado a lado para facilitar a comparação visual. Para criá-lo, se faz de maneira semelhante das barras empilhadas. Mapear a primeira variável para o eixo *x* e a segunda para a estética <span class="in">`fill`</span> e adicionar o argumento <span class="in">`position = "dodge"`</span> dentro do <span class="in">`geom_bar()`</span>. Este argumento diz ao <span class="in">`ggplot2`</span> para não empilhar as barras, mas sim colocá-las lado a lado.\</span>
<span id="cb61-1215"><a href="#cb61-1215" aria-hidden="true" tabindex="-1"></a>O <span class="in">`geom_text ()`</span> usa <span class="in">`position_dodge()`</span> para replicar o comportamento das barras. O argumento <span class="in">`width = 0.9`</span> é o valor padrão para a largura das barras no <span class="in">`ggplot2`</span> e garante um alinhamento perfeito. O gráfico de barras lado a lado é, portanto construído assim:</span>
<span id="cb61-1216"><a href="#cb61-1216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1217"><a href="#cb61-1217" aria-hidden="true" tabindex="-1"></a>1)  Incialmente, calcula-se as proporções das categorias e a posição *y* dos rótulos:</span>
<span id="cb61-1218"><a href="#cb61-1218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1221"><a href="#cb61-1221" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-1222"><a href="#cb61-1222" aria-hidden="true" tabindex="-1"></a>prop_fumo <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span></span>
<span id="cb61-1223"><a href="#cb61-1223" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(categIdade, fumo) <span class="sc">%&gt;%</span></span>
<span id="cb61-1224"><a href="#cb61-1224" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb61-1225"><a href="#cb61-1225" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(categIdade) <span class="sc">%&gt;%</span></span>
<span id="cb61-1226"><a href="#cb61-1226" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb61-1227"><a href="#cb61-1227" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calcula a posição vertical do ponto médio de cada segmento</span></span>
<span id="cb61-1228"><a href="#cb61-1228" aria-hidden="true" tabindex="-1"></a>    <span class="at">posicao_y =</span> (n) <span class="sc">-</span> <span class="dv">18</span>,</span>
<span id="cb61-1229"><a href="#cb61-1229" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_faixa =</span> <span class="fu">sum</span>(n),</span>
<span id="cb61-1230"><a href="#cb61-1230" aria-hidden="true" tabindex="-1"></a>    <span class="at">proporcao_fumo =</span> n <span class="sc">/</span> total_faixa)</span>
<span id="cb61-1231"><a href="#cb61-1231" aria-hidden="true" tabindex="-1"></a>prop_fumo</span>
<span id="cb61-1232"><a href="#cb61-1232" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-1233"><a href="#cb61-1233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1234"><a href="#cb61-1234" aria-hidden="true" tabindex="-1"></a>2)  Com esses dados, constrói-se o gráfico:</span>
<span id="cb61-1235"><a href="#cb61-1235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1238"><a href="#cb61-1238" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-1239"><a href="#cb61-1239" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-1240"><a href="#cb61-1240" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-bar5</span></span>
<span id="cb61-1241"><a href="#cb61-1241" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-1242"><a href="#cb61-1242" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-1243"><a href="#cb61-1243" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Gráfico de barras lado a lado"</span></span>
<span id="cb61-1244"><a href="#cb61-1244" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-1245"><a href="#cb61-1245" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-1246"><a href="#cb61-1246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1247"><a href="#cb61-1247" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> categIdade, <span class="at">fill =</span> fumo)) <span class="sc">+</span></span>
<span id="cb61-1248"><a href="#cb61-1248" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>,</span>
<span id="cb61-1249"><a href="#cb61-1249" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span><span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb61-1250"><a href="#cb61-1250" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"gray90"</span>,<span class="st">"skyblue"</span>)) <span class="sc">+</span></span>
<span id="cb61-1251"><a href="#cb61-1251" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Faixa Etária"</span>, </span>
<span id="cb61-1252"><a href="#cb61-1252" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequência"</span>) <span class="sc">+</span></span>
<span id="cb61-1253"><a href="#cb61-1253" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> prop_fumo,</span>
<span id="cb61-1254"><a href="#cb61-1254" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">x =</span> categIdade,</span>
<span id="cb61-1255"><a href="#cb61-1255" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> posicao_y,</span>
<span id="cb61-1256"><a href="#cb61-1256" aria-hidden="true" tabindex="-1"></a>                <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">percent</span>(proporcao_fumo, <span class="at">accuracy =</span> <span class="fl">0.1</span>)),</span>
<span id="cb61-1257"><a href="#cb61-1257" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">3.5</span>,</span>
<span id="cb61-1258"><a href="#cb61-1258" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"black"</span> ,</span>
<span id="cb61-1259"><a href="#cb61-1259" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.9</span>)) <span class="sc">+</span> </span>
<span id="cb61-1260"><a href="#cb61-1260" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span> (<span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.10</span>))) <span class="sc">+</span></span>
<span id="cb61-1261"><a href="#cb61-1261" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Faixa Etária"</span>,</span>
<span id="cb61-1262"><a href="#cb61-1262" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequência"</span>,</span>
<span id="cb61-1263"><a href="#cb61-1263" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb61-1264"><a href="#cb61-1264" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb61-1265"><a href="#cb61-1265" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span>
<span id="cb61-1266"><a href="#cb61-1266" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-1267"><a href="#cb61-1267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1268"><a href="#cb61-1268" aria-hidden="true" tabindex="-1"></a>A @fig-bar5 mostra as porcentagens de fumantes em cada uma das categorias de uma forma bem clara.</span>
<span id="cb61-1269"><a href="#cb61-1269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1270"><a href="#cb61-1270" aria-hidden="true" tabindex="-1"></a><span class="fu">### Gráfico de barra para uma variável numérica discreta</span></span>
<span id="cb61-1271"><a href="#cb61-1271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1272"><a href="#cb61-1272" aria-hidden="true" tabindex="-1"></a>Uma variável numérica discreta é um tipo de variável que assume valores inteiros, resultantes de contagens, e que não podem assumir valores fracionários entre eles. A medição ocorre através da contagem das observações (@sec-tipovariavel). Para a representação gráfica, utiliza-se um gráfico de barras . O resultado é semelhante a um histograma com as barras separadas. Para o exemplo, serão usados os mesmos dados empregados na construção dos gráficos de barras empilhadas e lado a lado, provenientes do conjunto de dados <span class="in">`dadosMater.xlsx`</span>. Nesses dados, existe a variável para que representa o número de filhos que a gestante teve antes do atual. É uma variável numérica discreta que será mostrada visualmente por gráfico de barras simples (@fig-bar6).</span>
<span id="cb61-1273"><a href="#cb61-1273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1274"><a href="#cb61-1274" aria-hidden="true" tabindex="-1"></a>::: callout-important</span>
<span id="cb61-1275"><a href="#cb61-1275" aria-hidden="true" tabindex="-1"></a><span class="fu">## Importante</span></span>
<span id="cb61-1276"><a href="#cb61-1276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1277"><a href="#cb61-1277" aria-hidden="true" tabindex="-1"></a>Apesar da variável para ser uma variável numérica discreta, para a construção do gráfico ela foi **transformada em um fator** para informar ao <span class="in">`ggplot2`</span> que todos os rótulos do eixo *x* (nº de filhos anteriores) devem aparecer, inclusive o referente a 7 filhos anteriores, apesar de não existir na amostra.</span>
<span id="cb61-1278"><a href="#cb61-1278" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb61-1279"><a href="#cb61-1279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1282"><a href="#cb61-1282" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-1283"><a href="#cb61-1283" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-1284"><a href="#cb61-1284" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-bar6</span></span>
<span id="cb61-1285"><a href="#cb61-1285" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-1286"><a href="#cb61-1286" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-1287"><a href="#cb61-1287" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Gráfico de barras de uma variável discreta"</span></span>
<span id="cb61-1288"><a href="#cb61-1288" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-1289"><a href="#cb61-1289" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-1290"><a href="#cb61-1290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1291"><a href="#cb61-1291" aria-hidden="true" tabindex="-1"></a><span class="co"># Criar uma tabela com contagem completa, incluindo zeros</span></span>
<span id="cb61-1292"><a href="#cb61-1292" aria-hidden="true" tabindex="-1"></a>contagem <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">table</span>(<span class="fu">factor</span>(dados<span class="sc">$</span>para, <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">11</span>)))</span>
<span id="cb61-1293"><a href="#cb61-1293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1294"><a href="#cb61-1294" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular proporção de cada barra</span></span>
<span id="cb61-1295"><a href="#cb61-1295" aria-hidden="true" tabindex="-1"></a>contagem<span class="sc">$</span>prop <span class="ot">&lt;-</span> contagem<span class="sc">$</span>Freq <span class="sc">/</span> <span class="fu">sum</span>(contagem<span class="sc">$</span>Freq)</span>
<span id="cb61-1296"><a href="#cb61-1296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1297"><a href="#cb61-1297" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotar</span></span>
<span id="cb61-1298"><a href="#cb61-1298" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(contagem, <span class="fu">aes</span>(<span class="at">x =</span> Var1, <span class="at">y =</span> prop)) <span class="sc">+</span></span>
<span id="cb61-1299"><a href="#cb61-1299" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, </span>
<span id="cb61-1300"><a href="#cb61-1300" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> <span class="st">"tomato"</span>, <span class="at">color =</span> <span class="st">"gray30"</span>) <span class="sc">+</span></span>
<span id="cb61-1301"><a href="#cb61-1301" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> scales<span class="sc">::</span><span class="fu">percent</span>(prop, <span class="at">accuracy =</span> <span class="fl">0.1</span>),</span>
<span id="cb61-1302"><a href="#cb61-1302" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> prop <span class="sc">+</span> <span class="fl">0.01</span>), <span class="at">size =</span> <span class="fl">3.5</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb61-1303"><a href="#cb61-1303" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span> (<span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.05</span>))) <span class="sc">+</span></span>
<span id="cb61-1304"><a href="#cb61-1304" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Número de filhos anteriores ao atual"</span>, </span>
<span id="cb61-1305"><a href="#cb61-1305" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Proporção"</span>) <span class="sc">+</span></span>
<span id="cb61-1306"><a href="#cb61-1306" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span>
<span id="cb61-1307"><a href="#cb61-1307" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-1308"><a href="#cb61-1308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1309"><a href="#cb61-1309" aria-hidden="true" tabindex="-1"></a><span class="fu">### Gráfico de barra de erro</span></span>
<span id="cb61-1310"><a href="#cb61-1310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1311"><a href="#cb61-1311" aria-hidden="true" tabindex="-1"></a>Um gráfico de barra de erro é uma ferramenta visual que mostra a variabilidade de dados em um ponto específico. Ele consiste em pontos ou barras que representam as médias (ou outras estatísticas) de um conjunto de dados, com linhas verticais (ou horizontais) que indicam o intervalo de confiança, o desvio padrão ou o erro padrão da média. Essas linhas verticais são conhecidas como “barras de erro”. Usado para comparar as médias de diferentes grupos, mostrando a variabilidade dentro de cada grupo. É visto com frequência em pesquisas científicas e publicações para apresentar os resultados experimentais com suas respectivas variabilidades. As barras de erro dão uma ideia geral de quão precisa é uma medição. O cenário para a construção de um gráfico de barra de erro é o tabagismo na gestação e o peso dos recém-nascidos, onde as barras representarão a média do peso ao nascer (g) e as barras de erro com intervalo de confiança de 95% (veja @sec-estimacao), calculado usando média $\pm$ margem de erro, onde a margem de $erro = 1.96 × erro \ padrão$.</span>
<span id="cb61-1312"><a href="#cb61-1312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1313"><a href="#cb61-1313" aria-hidden="true" tabindex="-1"></a>1)  Resumo dos dados: Após carregar os dados necessários (<span class="in">`dadosRNT`</span>), se fará um resumo dos mesmos que informará as respectivas médias, desvios padrão e margens de erro por grupo.</span>
<span id="cb61-1314"><a href="#cb61-1314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1317"><a href="#cb61-1317" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-1318"><a href="#cb61-1318" aria-hidden="true" tabindex="-1"></a>  resumo <span class="ot">&lt;-</span> dadosRNT <span class="sc">%&gt;%</span> </span>
<span id="cb61-1319"><a href="#cb61-1319" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(sexo, fumo) <span class="sc">%&gt;%</span> </span>
<span id="cb61-1320"><a href="#cb61-1320" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb61-1321"><a href="#cb61-1321" aria-hidden="true" tabindex="-1"></a>              <span class="at">media =</span> <span class="fu">mean</span>(pesoRN, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb61-1322"><a href="#cb61-1322" aria-hidden="true" tabindex="-1"></a>              <span class="at">dp =</span> <span class="fu">sd</span>(pesoRN, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb61-1323"><a href="#cb61-1323" aria-hidden="true" tabindex="-1"></a>              <span class="at">me =</span> <span class="fl">1.96</span> <span class="sc">*</span> dp<span class="sc">/</span><span class="fu">sqrt</span>(n),</span>
<span id="cb61-1324"><a href="#cb61-1324" aria-hidden="true" tabindex="-1"></a>              <span class="at">min =</span><span class="fu">min</span>(pesoRN, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb61-1325"><a href="#cb61-1325" aria-hidden="true" tabindex="-1"></a>              <span class="at">max =</span><span class="fu">max</span>(pesoRN, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb61-1326"><a href="#cb61-1326" aria-hidden="true" tabindex="-1"></a>              <span class="at">.groups =</span> <span class="st">'drop'</span>)</span>
<span id="cb61-1327"><a href="#cb61-1327" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(resumo)</span>
<span id="cb61-1328"><a href="#cb61-1328" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-1329"><a href="#cb61-1329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1330"><a href="#cb61-1330" aria-hidden="true" tabindex="-1"></a>2)  Construção do gráfico (@fig-bar7) , conforme explicado abaixo:</span>
<span id="cb61-1331"><a href="#cb61-1331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1332"><a href="#cb61-1332" aria-hidden="true" tabindex="-1"></a><span class="in">    a\) O gráfico inicia com a colocação a variável `sexo` no eixo *x* e média da variável `pesoRN` no *y* e estabelecendo cores diferentes para o fator `sexo`;</span></span>
<span id="cb61-1333"><a href="#cb61-1333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1334"><a href="#cb61-1334" aria-hidden="true" tabindex="-1"></a><span class="in">    b\) `geom_bar(stat = “identity”` usa os valores reais da média para a altura das barras, `color = “black”` estabelece a cor preta para o contorno das barras e `position_dodge(0.9)` separa as barras lado a lado para cada grupo de `fumo`;</span></span>
<span id="cb61-1335"><a href="#cb61-1335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1336"><a href="#cb61-1336" aria-hidden="true" tabindex="-1"></a><span class="in">    c\) `geom_point (position = position_dodge(0.9)` adiciona um ponto sobre cada barra (pode ser útil para destacar a média). É opcional;</span></span>
<span id="cb61-1337"><a href="#cb61-1337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1338"><a href="#cb61-1338" aria-hidden="true" tabindex="-1"></a><span class="in">    d\) `geom_errorbar()` adiciona a barra de erro acima da média, com base na barra de erro `me`. Poderia ter sido usado o desvio padrão. O erro está opcionalmente colocado acima da barra, mas poderia ser acima e abaixo ;</span></span>
<span id="cb61-1339"><a href="#cb61-1339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1340"><a href="#cb61-1340" aria-hidden="true" tabindex="-1"></a><span class="in">    e\) `labs()` define os rótulos dos eixos e da legenda;</span></span>
<span id="cb61-1341"><a href="#cb61-1341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1342"><a href="#cb61-1342" aria-hidden="true" tabindex="-1"></a><span class="in">    f\) `coord_cartesian(ylim = c(0, 3500))` limita o eixo *y* de 0 a 3500, sem cortar dados fora desse intervalo. Entretanto, para reduzir a altura das barras, pode-se cortar dados, por exemplo começar em1000, 1500 ou, mesmo, 2000, uma vez que não existem recém-nascidos, nesta amostra, com menos de 2000 g e o foco é a média e o IC95%;</span></span>
<span id="cb61-1343"><a href="#cb61-1343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1344"><a href="#cb61-1344" aria-hidden="true" tabindex="-1"></a><span class="in">    g\) `scale_fill_manual(values = c("gray80"`, `"darkslategray1"))` estabelece as cores para os níveis de `fumo`;</span></span>
<span id="cb61-1345"><a href="#cb61-1345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1346"><a href="#cb61-1346" aria-hidden="true" tabindex="-1"></a><span class="in">    h\) `scale_y_continuous( breaks = seq(0, 3500, 500) , expand = expansion(add = c(0, 0.05)))` - a primeira parte define os rótulos do eixo *y* de 500 em 500, começando em 0 [^08-graficos-16], a segunda adiciona um pequeno espaço acima das barras para não cortar os rótulos (adiante será discutido sobre isso);</span></span>
<span id="cb61-1347"><a href="#cb61-1347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1348"><a href="#cb61-1348" aria-hidden="true" tabindex="-1"></a><span class="in">    i\) Por último colocou o tema clássico[^08-graficos-17] do `ggplot2` com fonte maior para melhorar a leitura.</span></span>
<span id="cb61-1349"><a href="#cb61-1349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1350"><a href="#cb61-1350" aria-hidden="true" tabindex="-1"></a><span class="ot">[^08-graficos-16]: </span>Modificar se no <span class="in">`coord_cartesian()`</span> o valor inicial for alterado, por exemplo, 1000, 1500 ou 2000.</span>
<span id="cb61-1351"><a href="#cb61-1351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1352"><a href="#cb61-1352" aria-hidden="true" tabindex="-1"></a><span class="ot">[^08-graficos-17]: </span>Pode ser qualquer tema, este fica bem por ser bem limpo, sem grades, apenas eixo *x* e *y*.</span>
<span id="cb61-1353"><a href="#cb61-1353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1356"><a href="#cb61-1356" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-1357"><a href="#cb61-1357" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-1358"><a href="#cb61-1358" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-bar7</span></span>
<span id="cb61-1359"><a href="#cb61-1359" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-1360"><a href="#cb61-1360" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-1361"><a href="#cb61-1361" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Gráfico de barras de erro"</span></span>
<span id="cb61-1362"><a href="#cb61-1362" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-1363"><a href="#cb61-1363" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-1364"><a href="#cb61-1364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1365"><a href="#cb61-1365" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(resumo, <span class="fu">aes</span>(<span class="at">x=</span>sexo, <span class="at">y=</span>media, <span class="at">fill=</span>fumo)) <span class="sc">+</span>      </span>
<span id="cb61-1366"><a href="#cb61-1366" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">"identity"</span>, <span class="at">color=</span><span class="st">"black"</span>, </span>
<span id="cb61-1367"><a href="#cb61-1367" aria-hidden="true" tabindex="-1"></a>           <span class="at">position=</span><span class="fu">position_dodge</span>(<span class="fl">0.9</span>)) <span class="sc">+</span></span>
<span id="cb61-1368"><a href="#cb61-1368" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="fl">0.9</span>)) <span class="sc">+</span></span>
<span id="cb61-1369"><a href="#cb61-1369" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> media, <span class="at">ymax =</span> media<span class="sc">+</span>me), <span class="at">width=</span><span class="fl">0.2</span>,</span>
<span id="cb61-1370"><a href="#cb61-1370" aria-hidden="true" tabindex="-1"></a>                <span class="at">position=</span><span class="fu">position_dodge</span>(.<span class="dv">9</span>)) <span class="sc">+</span></span>
<span id="cb61-1371"><a href="#cb61-1371" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">""</span>, </span>
<span id="cb61-1372"><a href="#cb61-1372" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Peso do Recém-Nascido(g)"</span>,</span>
<span id="cb61-1373"><a href="#cb61-1373" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb61-1374"><a href="#cb61-1374" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">1500</span>, <span class="dv">3500</span>)) <span class="sc">+</span></span>
<span id="cb61-1375"><a href="#cb61-1375" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"gray80"</span>, </span>
<span id="cb61-1376"><a href="#cb61-1376" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"darkslategray1"</span>)) <span class="sc">+</span></span>
<span id="cb61-1377"><a href="#cb61-1377" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span> (<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">1500</span>, <span class="dv">3500</span>, <span class="dv">500</span>),</span>
<span id="cb61-1378"><a href="#cb61-1378" aria-hidden="true" tabindex="-1"></a>                      <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.05</span>))) <span class="sc">+</span></span>
<span id="cb61-1379"><a href="#cb61-1379" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb61-1380"><a href="#cb61-1380" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span>
<span id="cb61-1381"><a href="#cb61-1381" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-1382"><a href="#cb61-1382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1383"><a href="#cb61-1383" aria-hidden="true" tabindex="-1"></a><span class="fu">## Manipulando outras partes dos gráficos</span></span>
<span id="cb61-1384"><a href="#cb61-1384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1385"><a href="#cb61-1385" aria-hidden="true" tabindex="-1"></a><span class="fu">### Mudando o nome dos eixos, o nome e a ordem dos rótulos</span></span>
<span id="cb61-1386"><a href="#cb61-1386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1387"><a href="#cb61-1387" aria-hidden="true" tabindex="-1"></a>Para modificar o nome dos eixos, utiliza-se, com frequência, as funções <span class="in">`xlab()`</span> e <span class="in">`ylab()`</span> como no gráfico da @fig-scatter4 . O mesmo trabalho de alteração dos rótulos pode ser feito com a função labs() como no gráfico da figura @fig-scatter10 .</span>
<span id="cb61-1388"><a href="#cb61-1388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1389"><a href="#cb61-1389" aria-hidden="true" tabindex="-1"></a>O nome e ordem dos rótulos podem ser modificados, usando a função <span class="in">`scale_x_discrete()`</span> com os argumentos <span class="in">`limits =`</span> que coloca os níveis na ordem desejada e <span class="in">`labels =`</span> que coloca os novos nomes<span class="ot">[^08-graficos-18]</span> na ordem estabelecida pelo argumento <span class="in">`limits =`</span>.</span>
<span id="cb61-1390"><a href="#cb61-1390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1391"><a href="#cb61-1391" aria-hidden="true" tabindex="-1"></a><span class="ot">[^08-graficos-18]: </span>Pode-se aproveitar aqui para trocar os nomes ou , simplesmente, corrigir acentuação que, às vezes, não foi colocada no dataframe.</span>
<span id="cb61-1392"><a href="#cb61-1392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1393"><a href="#cb61-1393" aria-hidden="true" tabindex="-1"></a>Observando, por exemplo, o gráfico da @fig-bar3, onde se usou a paleta do NEJM, verifica-se que os rótulos do eixo *x* estão como: <span class="in">`fumante_leve`</span>, <span class="in">`fumante_moderada`</span>, <span class="in">`fumante_pesada`</span> e <span class="in">`nao_fumante`</span>. Esses nomes não estão prontos para publicação e o ideal é que sejam modificados para <span class="in">`Leve`</span>, <span class="in">`Moderado`</span>, <span class="in">`Pesado`</span> e <span class="in">`Não`</span>, uma vez que o título do eixo x será modificado para <span class="in">`Tabagismo Materno`</span>. Aproveitando, pode-se modificar a ordem das categorias, colocando, por exemplo, as fumantes pesadas como primeira categoria na @fig-bar8, a seguir as fumantes moderadas, leves e não fumantes para ter uma lógico crescente da intensidade de tabagismo materno.</span>
<span id="cb61-1394"><a href="#cb61-1394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1395"><a href="#cb61-1395" aria-hidden="true" tabindex="-1"></a>1)  Cálculo das proporções de tabagismo em cada uma das categorias para adicionar ao gráfico, melhorando as informações</span>
<span id="cb61-1396"><a href="#cb61-1396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1399"><a href="#cb61-1399" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-1400"><a href="#cb61-1400" aria-hidden="true" tabindex="-1"></a>prop_fumo <span class="ot">&lt;-</span> dados <span class="sc">%&gt;%</span></span>
<span id="cb61-1401"><a href="#cb61-1401" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(categFumo) <span class="sc">%&gt;%</span></span>
<span id="cb61-1402"><a href="#cb61-1402" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb61-1403"><a href="#cb61-1403" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb61-1404"><a href="#cb61-1404" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calcula a posição vertical do ponto médio de cada segmento</span></span>
<span id="cb61-1405"><a href="#cb61-1405" aria-hidden="true" tabindex="-1"></a>    <span class="at">posicao_y =</span> (n) <span class="sc">+</span> <span class="dv">30</span>,</span>
<span id="cb61-1406"><a href="#cb61-1406" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_faixa =</span> <span class="fu">sum</span>(n),</span>
<span id="cb61-1407"><a href="#cb61-1407" aria-hidden="true" tabindex="-1"></a>    <span class="at">proporcao_fumo =</span> n <span class="sc">/</span> total_faixa)</span>
<span id="cb61-1408"><a href="#cb61-1408" aria-hidden="true" tabindex="-1"></a>prop_fumo</span>
<span id="cb61-1409"><a href="#cb61-1409" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-1410"><a href="#cb61-1410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1411"><a href="#cb61-1411" aria-hidden="true" tabindex="-1"></a>2)  Construção do gráfico que resultará na @fig-bar8.</span>
<span id="cb61-1412"><a href="#cb61-1412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1415"><a href="#cb61-1415" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-1416"><a href="#cb61-1416" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-1417"><a href="#cb61-1417" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-bar8</span></span>
<span id="cb61-1418"><a href="#cb61-1418" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-1419"><a href="#cb61-1419" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-1420"><a href="#cb61-1420" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Gráfico de barras modificado"</span></span>
<span id="cb61-1421"><a href="#cb61-1421" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-1422"><a href="#cb61-1422" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-1423"><a href="#cb61-1423" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-1424"><a href="#cb61-1424" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados, <span class="fu">aes</span>(<span class="at">x =</span> categFumo, <span class="at">fill =</span> categFumo)) <span class="sc">+</span> </span>
<span id="cb61-1425"><a href="#cb61-1425" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span><span class="st">"dodge"</span>, <span class="at">color =</span><span class="st">"black"</span>)<span class="sc">+</span> </span>
<span id="cb61-1426"><a href="#cb61-1426" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_nejm</span>() <span class="sc">+</span></span>
<span id="cb61-1427"><a href="#cb61-1427" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tabagismo Materno"</span>, </span>
<span id="cb61-1428"><a href="#cb61-1428" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frequência"</span>)  <span class="sc">+</span></span>
<span id="cb61-1429"><a href="#cb61-1429" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="st">"fumante_pesada"</span>, </span>
<span id="cb61-1430"><a href="#cb61-1430" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"fumante_moderada"</span>, </span>
<span id="cb61-1431"><a href="#cb61-1431" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"fumante_leve"</span>,</span>
<span id="cb61-1432"><a href="#cb61-1432" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"nao_fumante"</span>),</span>
<span id="cb61-1433"><a href="#cb61-1433" aria-hidden="true" tabindex="-1"></a>                   <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Pesado"</span>, </span>
<span id="cb61-1434"><a href="#cb61-1434" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Moderado"</span>, </span>
<span id="cb61-1435"><a href="#cb61-1435" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Leve"</span>,</span>
<span id="cb61-1436"><a href="#cb61-1436" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Não"</span>)) <span class="sc">+</span></span>
<span id="cb61-1437"><a href="#cb61-1437" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> prop_fumo,</span>
<span id="cb61-1438"><a href="#cb61-1438" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">x =</span> categFumo,</span>
<span id="cb61-1439"><a href="#cb61-1439" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> posicao_y,</span>
<span id="cb61-1440"><a href="#cb61-1440" aria-hidden="true" tabindex="-1"></a>                <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">percent</span>(proporcao_fumo, <span class="at">accuracy =</span> <span class="fl">0.1</span>)),</span>
<span id="cb61-1441"><a href="#cb61-1441" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">4</span>,</span>
<span id="cb61-1442"><a href="#cb61-1442" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"black"</span> ) <span class="sc">+</span></span>
<span id="cb61-1443"><a href="#cb61-1443" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size=</span><span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb61-1444"><a href="#cb61-1444" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb61-1445"><a href="#cb61-1445" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-1446"><a href="#cb61-1446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1447"><a href="#cb61-1447" aria-hidden="true" tabindex="-1"></a><span class="fu">### Título e subtítulo do gráfico</span></span>
<span id="cb61-1448"><a href="#cb61-1448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1449"><a href="#cb61-1449" aria-hidden="true" tabindex="-1"></a>Nem sempre necessários, o título, o subtítulo ou uma nota de rodapé podem ser adicionados ao gráfico através da função <span class="in">`labs()`</span>, usada anteriormente (por ex. na @fig-scatter10) para colocar rótulos nos eixos *x* e *y*. Além de argumentos para colocar título e subtítulo, a função <span class="in">`labs()`</span> tem argumento para nota de rodapé, <span class="in">`caption`</span>.</span>
<span id="cb61-1450"><a href="#cb61-1450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1451"><a href="#cb61-1451" aria-hidden="true" tabindex="-1"></a>Como exemplo, será plotado um gráfico com boxplots que ilustrem o impacto do tabagismo materno sobre o peso do recém-nascido. Os dados serão provenientes da amostra dadosRNT (@sec-violin).\</span>
<span id="cb61-1452"><a href="#cb61-1452" aria-hidden="true" tabindex="-1"></a>Serão usados todos os argumento da função <span class="in">`labs()`</span>, e se repetirá o que foi feito na construção do gráfico da @fig-bar8, alterando os nomes dos rótulos do eixo *x*. O código do gráfico da @fig-bxp6 vai ser atribuído a um objeto denominado <span class="in">`bxp`</span>:</span>
<span id="cb61-1453"><a href="#cb61-1453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1456"><a href="#cb61-1456" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-1457"><a href="#cb61-1457" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-1458"><a href="#cb61-1458" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-bxp6</span></span>
<span id="cb61-1459"><a href="#cb61-1459" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-1460"><a href="#cb61-1460" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-1461"><a href="#cb61-1461" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Boxplots do impacto do tabagismo materno no peso do recém-nascido"</span></span>
<span id="cb61-1462"><a href="#cb61-1462" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-1463"><a href="#cb61-1463" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-1464"><a href="#cb61-1464" aria-hidden="true" tabindex="-1"></a>bxp <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dadosRNT, <span class="fu">aes</span>(<span class="at">x =</span> categFumo, </span>
<span id="cb61-1465"><a href="#cb61-1465" aria-hidden="true" tabindex="-1"></a>                            <span class="at">y =</span> pesoRN,</span>
<span id="cb61-1466"><a href="#cb61-1466" aria-hidden="true" tabindex="-1"></a>                            <span class="at">fill =</span> categFumo)) <span class="sc">+</span></span>
<span id="cb61-1467"><a href="#cb61-1467" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_boxplot</span>(<span class="at">geom =</span> <span class="st">"errorbar"</span>, <span class="at">width =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb61-1468"><a href="#cb61-1468" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb61-1469"><a href="#cb61-1469" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel2"</span>)  <span class="sc">+</span></span>
<span id="cb61-1470"><a href="#cb61-1470" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> <span class="st">"mean"</span>, </span>
<span id="cb61-1471"><a href="#cb61-1471" aria-hidden="true" tabindex="-1"></a>                <span class="at">colour =</span> <span class="st">"red"</span>, </span>
<span id="cb61-1472"><a href="#cb61-1472" aria-hidden="true" tabindex="-1"></a>                <span class="at">size =</span> <span class="dv">3</span>, </span>
<span id="cb61-1473"><a href="#cb61-1473" aria-hidden="true" tabindex="-1"></a>                <span class="at">geom =</span> <span class="st">"point"</span>) <span class="sc">+</span></span>
<span id="cb61-1474"><a href="#cb61-1474" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Tabagismo Materno e Peso do Recém Nascido"</span>, </span>
<span id="cb61-1475"><a href="#cb61-1475" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Maternidade do Hospital Geral de Caxias do Sul, 2008"</span>,</span>
<span id="cb61-1476"><a href="#cb61-1476" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Tabagismo Materno"</span>,</span>
<span id="cb61-1477"><a href="#cb61-1477" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Peso dos Recém-Nascidos (g)"</span>,</span>
<span id="cb61-1478"><a href="#cb61-1478" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"O ponto vermelho é a média de cada grupo"</span>) <span class="sc">+</span></span>
<span id="cb61-1479"><a href="#cb61-1479" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="st">"nao_fumante"</span>, </span>
<span id="cb61-1480"><a href="#cb61-1480" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"fumante_leve"</span>, </span>
<span id="cb61-1481"><a href="#cb61-1481" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"fumante_moderada"</span>, </span>
<span id="cb61-1482"><a href="#cb61-1482" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"fumante_pesada"</span>),</span>
<span id="cb61-1483"><a href="#cb61-1483" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Não"</span>, <span class="st">"Leve"</span>, </span>
<span id="cb61-1484"><a href="#cb61-1484" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Moderado"</span>, <span class="st">"Pesado"</span>)) <span class="sc">+</span></span>
<span id="cb61-1485"><a href="#cb61-1485" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb61-1486"><a href="#cb61-1486" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb61-1487"><a href="#cb61-1487" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-1488"><a href="#cb61-1488" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(bxp)</span>
<span id="cb61-1489"><a href="#cb61-1489" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-1490"><a href="#cb61-1490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1491"><a href="#cb61-1491" aria-hidden="true" tabindex="-1"></a><span class="fu">### Modificação dos limites dos eixos</span></span>
<span id="cb61-1492"><a href="#cb61-1492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1493"><a href="#cb61-1493" aria-hidden="true" tabindex="-1"></a>O pacote <span class="in">`ggplot2`</span> possui uma família de funções <span class="in">`scale_`</span> para modificar as propriedades referentes às escalas do gráfico. Como é possível ter escalas de números, categorias, cores, datas, entre outras, é disponibilizada uma função específica para cada tipo de escala.</span>
<span id="cb61-1494"><a href="#cb61-1494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1495"><a href="#cb61-1495" aria-hidden="true" tabindex="-1"></a>Cada tipo fundamental é manipulado por uma das três funções construtoras de escala: <span class="in">`continuous_scale()`</span>, <span class="in">`discrete_scale()`</span> e <span class="in">`binned_scale()`</span>.</span>
<span id="cb61-1496"><a href="#cb61-1496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1497"><a href="#cb61-1497" aria-hidden="true" tabindex="-1"></a>No gráfico da @fig-bxp6, os pesos dos recém-nascidos estão dispostos em uma escala que varia a cada 1000 g. Para modificar esses limites, pode-se usar a função <span class="in">`scale_y_continuous()`</span> para ter intervalos de 500 g.</span>
<span id="cb61-1498"><a href="#cb61-1498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1499"><a href="#cb61-1499" aria-hidden="true" tabindex="-1"></a>O gráfico da @fig-bxp6 foi designado para um objeto denominado <span class="in">`bxp`</span>. Isto facilita o trabalho, pois não há necessidade de repetir todo o código que gerou o gráfico, apenas as modificações:</span>
<span id="cb61-1500"><a href="#cb61-1500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1503"><a href="#cb61-1503" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-1504"><a href="#cb61-1504" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-1505"><a href="#cb61-1505" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-bxp7</span></span>
<span id="cb61-1506"><a href="#cb61-1506" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-1507"><a href="#cb61-1507" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-1508"><a href="#cb61-1508" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Modificação dos limites do eixo y: 500 em 500"</span></span>
<span id="cb61-1509"><a href="#cb61-1509" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-1510"><a href="#cb61-1510" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-1511"><a href="#cb61-1511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1512"><a href="#cb61-1512" aria-hidden="true" tabindex="-1"></a>bxp <span class="sc">+</span></span>
<span id="cb61-1513"><a href="#cb61-1513" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>,</span>
<span id="cb61-1514"><a href="#cb61-1514" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb61-1515"><a href="#cb61-1515" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>,</span>
<span id="cb61-1516"><a href="#cb61-1516" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">face =</span> <span class="st">"bold"</span>,</span>
<span id="cb61-1517"><a href="#cb61-1517" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">color =</span> <span class="st">"darkgreen"</span>)) <span class="sc">+</span></span>
<span id="cb61-1518"><a href="#cb61-1518" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">1000</span>, <span class="dv">5000</span>, <span class="dv">500</span>))</span>
<span id="cb61-1519"><a href="#cb61-1519" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-1520"><a href="#cb61-1520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1521"><a href="#cb61-1521" aria-hidden="true" tabindex="-1"></a>Junto com a modificação dos limites dos eixo da @fig-bxp7, manipulou-se o título e subtítulo, usando a função <span class="in">`theme()`</span> e foi aumentado o tamanho da fonte, usou-se negrito e a cor do subtítulo passou a ser "darkgreen".</span>
<span id="cb61-1522"><a href="#cb61-1522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1523"><a href="#cb61-1523" aria-hidden="true" tabindex="-1"></a><span class="fu">### Modificação da expansão</span></span>
<span id="cb61-1524"><a href="#cb61-1524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1525"><a href="#cb61-1525" aria-hidden="true" tabindex="-1"></a>Voltando aos gráficos de barra, todos, com exceção do gráfico da @fig-bar7, tem algo que incomoda ao autor: abaixo do valor 0 (zero) existe uma expansão, ou seja um espaço abaixo do 0. Isto, visualmente, é desagradável.</span>
<span id="cb61-1526"><a href="#cb61-1526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1527"><a href="#cb61-1527" aria-hidden="true" tabindex="-1"></a>Para que as barras tenham início exatamente no 0 (zero), pode-se empregar a função <span class="in">`scale_y_continuous()`</span> com o argumento <span class="in">`expand = expansion (add = c(0,0.05))`</span>, significando que não se expande nada abaixo do 0 e se adiciona 5 unidades para cima, criando uma margem superior. Comparar a @fig-bar9 com a @fig-bar3. O rótulos do eixo *y* também foram corrigidos.</span>
<span id="cb61-1528"><a href="#cb61-1528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1531"><a href="#cb61-1531" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-1532"><a href="#cb61-1532" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-1533"><a href="#cb61-1533" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-bar9</span></span>
<span id="cb61-1534"><a href="#cb61-1534" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-1535"><a href="#cb61-1535" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-1536"><a href="#cb61-1536" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Gráfico de barras com remoção do espaço abaixo de 0 (zero)"</span></span>
<span id="cb61-1537"><a href="#cb61-1537" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-1538"><a href="#cb61-1538" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-1539"><a href="#cb61-1539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1540"><a href="#cb61-1540" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsci)</span>
<span id="cb61-1541"><a href="#cb61-1541" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb61-1542"><a href="#cb61-1542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1543"><a href="#cb61-1543" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> dados) <span class="sc">+</span> </span>
<span id="cb61-1544"><a href="#cb61-1544" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> categFumo, </span>
<span id="cb61-1545"><a href="#cb61-1545" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> <span class="fu">after_stat</span>(count<span class="sc">/</span><span class="fu">sum</span>(count)),</span>
<span id="cb61-1546"><a href="#cb61-1546" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> categFumo))<span class="sc">+</span> </span>
<span id="cb61-1547"><a href="#cb61-1547" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_nejm</span>() <span class="sc">+</span></span>
<span id="cb61-1548"><a href="#cb61-1548" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span> (<span class="at">labels =</span> <span class="fu">percent_format</span> (<span class="at">accuracy =</span> <span class="fl">0.1</span>,</span>
<span id="cb61-1549"><a href="#cb61-1549" aria-hidden="true" tabindex="-1"></a>                                               <span class="at">decimal.mark =</span> <span class="st">","</span>)) <span class="sc">+</span></span>
<span id="cb61-1550"><a href="#cb61-1550" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span> (<span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.05</span>))) <span class="sc">+</span></span>
<span id="cb61-1551"><a href="#cb61-1551" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="st">"nao_fumante"</span>, </span>
<span id="cb61-1552"><a href="#cb61-1552" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"fumante_leve"</span>, </span>
<span id="cb61-1553"><a href="#cb61-1553" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"fumante_moderada"</span>, </span>
<span id="cb61-1554"><a href="#cb61-1554" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"fumante_pesada"</span>),</span>
<span id="cb61-1555"><a href="#cb61-1555" aria-hidden="true" tabindex="-1"></a>                   <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Não"</span>, <span class="st">"Leve"</span>, </span>
<span id="cb61-1556"><a href="#cb61-1556" aria-hidden="true" tabindex="-1"></a>                              <span class="st">"Moderado"</span>, <span class="st">"Pesado"</span>)) <span class="sc">+</span></span>
<span id="cb61-1557"><a href="#cb61-1557" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tabagismo Materno"</span>, </span>
<span id="cb61-1558"><a href="#cb61-1558" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Proporção por categoria"</span>)  <span class="sc">+</span></span>
<span id="cb61-1559"><a href="#cb61-1559" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">13</span>) <span class="sc">+</span></span>
<span id="cb61-1560"><a href="#cb61-1560" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb61-1561"><a href="#cb61-1561" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-1562"><a href="#cb61-1562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1563"><a href="#cb61-1563" aria-hidden="true" tabindex="-1"></a><span class="fu">## Ajustando o layout e as margens no ggplot2</span></span>
<span id="cb61-1564"><a href="#cb61-1564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1565"><a href="#cb61-1565" aria-hidden="true" tabindex="-1"></a><span class="fu">### Modificação das margens com a função theme()</span></span>
<span id="cb61-1566"><a href="#cb61-1566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1567"><a href="#cb61-1567" aria-hidden="true" tabindex="-1"></a>Usando o gráfico da @fig-scatter5, repetido aqui e designando-o a um objeto com nome de gdsip:</span>
<span id="cb61-1568"><a href="#cb61-1568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1571"><a href="#cb61-1571" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-1572"><a href="#cb61-1572" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-1573"><a href="#cb61-1573" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-1574"><a href="#cb61-1574" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.cap: "Gráfico de dispersão" </span></span>
<span id="cb61-1575"><a href="#cb61-1575" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-1576"><a href="#cb61-1576" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-1577"><a href="#cb61-1577" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-1578"><a href="#cb61-1578" aria-hidden="true" tabindex="-1"></a>gdisp <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> dadosRNT100,</span>
<span id="cb61-1579"><a href="#cb61-1579" aria-hidden="true" tabindex="-1"></a>                <span class="fu">aes</span>(<span class="at">x =</span> compRN, <span class="at">y =</span> pesoRN)) <span class="sc">+</span></span>
<span id="cb61-1580"><a href="#cb61-1580" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="dv">0</span>),</span>
<span id="cb61-1581"><a href="#cb61-1581" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">"gray20"</span>,</span>
<span id="cb61-1582"><a href="#cb61-1582" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span><span class="st">"steelblue"</span>,</span>
<span id="cb61-1583"><a href="#cb61-1583" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, </span>
<span id="cb61-1584"><a href="#cb61-1584" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="dv">1</span>,</span>
<span id="cb61-1585"><a href="#cb61-1585" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb61-1586"><a href="#cb61-1586" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb61-1587"><a href="#cb61-1587" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Peso do Recém-nascido (g)"</span>) <span class="sc">+</span></span>
<span id="cb61-1588"><a href="#cb61-1588" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Comprimento do Recém-nascido (cm)"</span>)<span class="sc">+</span></span>
<span id="cb61-1589"><a href="#cb61-1589" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">13</span>)</span>
<span id="cb61-1590"><a href="#cb61-1590" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(gdisp)</span>
<span id="cb61-1591"><a href="#cb61-1591" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-1592"><a href="#cb61-1592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1593"><a href="#cb61-1593" aria-hidden="true" tabindex="-1"></a>O objeto <span class="in">`gdisp`</span> contém o gráfico de dispersão da @fig-scatter5 e pode ser modificado sem ter que digitar todos os comandos novamente. Será usado para exemplicar como promover um aumento das margens, partindo do padrão do tema usado:</span>
<span id="cb61-1594"><a href="#cb61-1594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1597"><a href="#cb61-1597" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-1598"><a href="#cb61-1598" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_classic</span>()<span class="sc">$</span>plot.margin</span>
<span id="cb61-1599"><a href="#cb61-1599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1600"><a href="#cb61-1600" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-1601"><a href="#cb61-1601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1602"><a href="#cb61-1602" aria-hidden="true" tabindex="-1"></a>Para aumentar as margens usa-se:</span>
<span id="cb61-1603"><a href="#cb61-1603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1606"><a href="#cb61-1606" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb61-1607"><a href="#cb61-1607" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb61-1608"><a href="#cb61-1608" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-scatter13</span></span>
<span id="cb61-1609"><a href="#cb61-1609" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb61-1610"><a href="#cb61-1610" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb61-1611"><a href="#cb61-1611" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Gráfico de dispersão com margem reduzida"</span></span>
<span id="cb61-1612"><a href="#cb61-1612" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb61-1613"><a href="#cb61-1613" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb61-1614"><a href="#cb61-1614" aria-hidden="true" tabindex="-1"></a>gdisp <span class="sc">+</span></span>
<span id="cb61-1615"><a href="#cb61-1615" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">80</span>, <span class="at">r =</span> <span class="dv">80</span>, <span class="at">b =</span> <span class="dv">80</span>, <span class="at">l =</span> <span class="dv">80</span>))</span>
<span id="cb61-1616"><a href="#cb61-1616" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-1617"><a href="#cb61-1617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1618"><a href="#cb61-1618" aria-hidden="true" tabindex="-1"></a>A função <span class="in">`margin()`</span> define as margens em pontos <span class="ot">[^08-graficos-19]</span>. Um ponto (pt) equivale a 1/72 de polegada, ou aproximadamente 0,35 milímetros. É a mesma unidade usada para definir tamanho de fonte. portanto, quando se observa um valor de 80, significa que o gráfico terá 80 pontos de margem no topo, à direita, à esquerda e na base. Isto dá aproximadamente 28 mm de espaço em cada lado. As letras <span class="in">`t`</span>, <span class="in">`r`</span>, <span class="in">`b`</span> e <span class="in">`l`</span> equivalem, respectivamente a <span class="in">`top`</span>, <span class="in">`right`</span>, <span class="in">`bottom`</span> e <span class="in">`left`</span>.</span>
<span id="cb61-1619"><a href="#cb61-1619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1620"><a href="#cb61-1620" aria-hidden="true" tabindex="-1"></a><span class="ot">[^08-graficos-19]: </span>A margem pode ser definida também em centímetros (cm), usando o mesmo comando, mas especificando que é em "cm". Por exemplo, para aumentar 2 cm em todos os lados: <span class="in">`theme(plot.margin = unit(c(2, 2, 2, 20, "cm")`</span></span>
<span id="cb61-1621"><a href="#cb61-1621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1622"><a href="#cb61-1622" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb61-1623"><a href="#cb61-1623" aria-hidden="true" tabindex="-1"></a><span class="fu">## Dica prática</span></span>
<span id="cb61-1624"><a href="#cb61-1624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-1625"><a href="#cb61-1625" aria-hidden="true" tabindex="-1"></a>Ao exportar gráficos para PDF ou PNG e quiser controlar o layout com precisão (por exemplo, para publicação), ajustar as margens com <span class="in">`margin()`</span> é essencial para evitar que elementos fiquem cortados ou apertados demais.</span>
<span id="cb61-1626"><a href="#cb61-1626" aria-hidden="true" tabindex="-1"></a>:::</span>
</code><button title="Copiar para a área de transferência" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>5&nbsp; Manipulando dados no R – Bioestatística Usando o R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./06-medidasResumidoras.html" rel="next">
<link href="./04-introducaoR.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-364982630eef5352dd1537128a8ed5cb.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Procurar"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="style.css">
</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./04-introducaoR.html">Parte II - Ambiente Computacional com R</a></li><li class="breadcrumb-item"><a href="./05-manipulandoDados.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Manipulando dados no R</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Procurar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Bioestatística Usando o R</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Procurar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prefácio</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte I - Fundamentos</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introdução</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-dados.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Natureza dos Dados</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-producaoDados.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Produção dos Dados</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte II - Ambiente Computacional com R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-introducaoR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Introdução ao uso do R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-manipulandoDados.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Manipulando dados no R</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte III - Estatística Descritiva</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-medidasResumidoras.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Medidas Resumidoras</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-tabelas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Tabelas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-graficos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Gráficos</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte IV - Probabilidades e Distribuições</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-probabilidades.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Introdução à Teoria das Probabilidades</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-assimetria.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Assimetria e Curtose</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-distAmostrais.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Distribuições Amostrais</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte V - Inferência Estatística</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-estimacao.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Estimação</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-testeHipoteses.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Teste de Hipóteses</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte VI - Testes Paramétricos</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-teste-t.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Comparação entre duas médias</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-anova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Análise de Variância</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-anovaRep.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Anova de Medidas Repetidas</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte VII - Relações entre Variáveis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-correlacao.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Correlação</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-regressao.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Regressão Linear Simples</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte VIII - Métodos Não Paramétricos</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./19-dadoscategoricos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Análise de Dados Categóricos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-testes-naoParametricos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Métodos não paramétricos</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte IX - Bioestatística Aplicada à Epidemiologia</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-testesDiag.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Determinação da validade e confiabilidade de testes diagnósticos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-medidasOcorrencia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Medidas de ocorrência de doença</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-sobrevida.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Análise de Sobrevida</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-reglogbin.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Regressão Logística Binária</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./glossario.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Glossário</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./referencias.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Referências</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Índice</h2>
   
  <ul>
  <li><a href="#sec-dataframes" id="toc-sec-dataframes" class="nav-link active" data-scroll-target="#sec-dataframes"><span class="header-section-number">5.1</span> Dataframes no R</a>
  <ul class="collapse">
  <li><a href="#acrescentando-variáveis-a-um-dataframe" id="toc-acrescentando-variáveis-a-um-dataframe" class="nav-link" data-scroll-target="#acrescentando-variáveis-a-um-dataframe"><span class="header-section-number">5.1.1</span> Acrescentando variáveis a um dataframe</a></li>
  <li><a href="#sec-transform" id="toc-sec-transform" class="nav-link" data-scroll-target="#sec-transform"><span class="header-section-number">5.1.2</span> Transformação de variáveis</a></li>
  <li><a href="#salvando-um-dataframe" id="toc-salvando-um-dataframe" class="nav-link" data-scroll-target="#salvando-um-dataframe"><span class="header-section-number">5.1.3</span> Salvando um dataframe</a></li>
  </ul></li>
  <li><a href="#importando-dados-de-outros-softwares" id="toc-importando-dados-de-outros-softwares" class="nav-link" data-scroll-target="#importando-dados-de-outros-softwares"><span class="header-section-number">5.2</span> Importando dados de outros <em>softwares</em></a>
  <ul class="collapse">
  <li><a href="#sec-csv" id="toc-sec-csv" class="nav-link" data-scroll-target="#sec-csv"><span class="header-section-number">5.2.1</span> Importando dados de um arquivo CSV</a></li>
  <li><a href="#sec-xlsx" id="toc-sec-xlsx" class="nav-link" data-scroll-target="#sec-xlsx"><span class="header-section-number">5.2.2</span> Importando um arquivo do Excel</a></li>
  <li><a href="#importando-arquivos-com-o-rstudio" id="toc-importando-arquivos-com-o-rstudio" class="nav-link" data-scroll-target="#importando-arquivos-com-o-rstudio"><span class="header-section-number">5.2.3</span> Importando arquivos com o RStudio</a></li>
  </ul></li>
  <li><a href="#sec-tibble" id="toc-sec-tibble" class="nav-link" data-scroll-target="#sec-tibble"><span class="header-section-number">5.3</span> Tibble</a></li>
  <li><a href="#sec-tidyverse" id="toc-sec-tidyverse" class="nav-link" data-scroll-target="#sec-tidyverse"><span class="header-section-number">5.4</span> Pacote tidyverse</a>
  <ul class="collapse">
  <li><a href="#principais-pacotes-do-tidyverse" id="toc-principais-pacotes-do-tidyverse" class="nav-link" data-scroll-target="#principais-pacotes-do-tidyverse"><span class="header-section-number">5.4.1</span> Principais Pacotes do tidyverse</a></li>
  <li><a href="#sec-printidyverse" id="toc-sec-printidyverse" class="nav-link" data-scroll-target="#sec-printidyverse"><span class="header-section-number">5.4.2</span> Princípios do tidyverse</a></li>
  </ul></li>
  <li><a href="#sec-dplyr" id="toc-sec-dplyr" class="nav-link" data-scroll-target="#sec-dplyr"><span class="header-section-number">5.5</span> Pacote dplyr</a></li>
  <li><a href="#sec-dadosMater" id="toc-sec-dadosMater" class="nav-link" data-scroll-target="#sec-dadosMater"><span class="header-section-number">5.6</span> Dataframe <code>dadosMater.xlsx</code></a>
  <ul class="collapse">
  <li><a href="#leitura-dos-dados" id="toc-leitura-dos-dados" class="nav-link" data-scroll-target="#leitura-dos-dados"><span class="header-section-number">5.6.1</span> Leitura dos dados</a></li>
  <li><a href="#selecionando-colunas" id="toc-selecionando-colunas" class="nav-link" data-scroll-target="#selecionando-colunas"><span class="header-section-number">5.6.2</span> Selecionando colunas</a></li>
  <li><a href="#modificando-e-criando-novas-colunas" id="toc-modificando-e-criando-novas-colunas" class="nav-link" data-scroll-target="#modificando-e-criando-novas-colunas"><span class="header-section-number">5.6.3</span> Modificando e criando novas colunas</a></li>
  <li><a href="#filtrando-linhas" id="toc-filtrando-linhas" class="nav-link" data-scroll-target="#filtrando-linhas"><span class="header-section-number">5.6.4</span> Filtrando linhas</a></li>
  <li><a href="#sumarizando-uma-coluna" id="toc-sumarizando-uma-coluna" class="nav-link" data-scroll-target="#sumarizando-uma-coluna"><span class="header-section-number">5.6.5</span> Sumarizando uma coluna</a></li>
  <li><a href="#selecionando-linhas-específicas" id="toc-selecionando-linhas-específicas" class="nav-link" data-scroll-target="#selecionando-linhas-específicas"><span class="header-section-number">5.6.6</span> Selecionando linhas específicas</a></li>
  <li><a href="#ordenando-uma-coluna" id="toc-ordenando-uma-coluna" class="nav-link" data-scroll-target="#ordenando-uma-coluna"><span class="header-section-number">5.6.7</span> Ordenando uma coluna</a></li>
  <li><a href="#função-count" id="toc-função-count" class="nav-link" data-scroll-target="#função-count"><span class="header-section-number">5.6.8</span> Função <code>count()</code></a></li>
  </ul></li>
  <li><a href="#pacote-forcats" id="toc-pacote-forcats" class="nav-link" data-scroll-target="#pacote-forcats"><span class="header-section-number">5.7</span> Pacote forcats()</a></li>
  <li><a href="#manipulação-de-datas" id="toc-manipulação-de-datas" class="nav-link" data-scroll-target="#manipulação-de-datas"><span class="header-section-number">5.8</span> Manipulação de datas</a>
  <ul class="collapse">
  <li><a href="#convertendo-strings-ou-caractere-para-data" id="toc-convertendo-strings-ou-caractere-para-data" class="nav-link" data-scroll-target="#convertendo-strings-ou-caractere-para-data"><span class="header-section-number">5.8.1</span> Convertendo <em>strings</em> ou caractere para data</a></li>
  <li><a href="#juntando-componentes-de-datas" id="toc-juntando-componentes-de-datas" class="nav-link" data-scroll-target="#juntando-componentes-de-datas"><span class="header-section-number">5.8.2</span> Juntando componentes de datas</a></li>
  <li><a href="#extraindo-componentes-de-datas" id="toc-extraindo-componentes-de-datas" class="nav-link" data-scroll-target="#extraindo-componentes-de-datas"><span class="header-section-number">5.8.3</span> Extraindo componentes de datas</a></li>
  <li><a href="#operações-com-datas" id="toc-operações-com-datas" class="nav-link" data-scroll-target="#operações-com-datas"><span class="header-section-number">5.8.4</span> Operações com datas</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./04-introducaoR.html">Parte II - Ambiente Computacional com R</a></li><li class="breadcrumb-item"><a href="./05-manipulandoDados.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Manipulando dados no R</span></a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Manipulando dados no R</span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Código</button></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="sec-dataframes" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="sec-dataframes"><span class="header-section-number">5.1</span> Dataframes no R</h2>
<p>DataFrames são objetos de dados genéricos em formato tabular, onde os dados são organizados de maneira lógica em linha-e-coluna semelhante ao de uma planilha do Excel. O dataframe é uma estrutura bidimensional. Os DataFrames podem ser formados com objetos criados previamente, desde que tenham o mesmo comprimento <span class="citation" data-cites="zuur2009beginner">(<a href="referencias.html#ref-zuur2009beginner" role="doc-biblioref">1</a>)</span>.</p>
<p>Uma das formas de criar um DataFrame no R é a partir de um conjunto de vetores como, por exemplo, este relacionados a 15 nascimentos em uma determinada maternidade:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>id <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>pesoRN <span class="ot">&lt;-</span> <span class="fu">c</span> (<span class="dv">3340</span>,<span class="dv">3345</span>,<span class="dv">3750</span>,<span class="dv">3650</span>,<span class="dv">3220</span>,<span class="dv">4070</span>,<span class="dv">3380</span>,<span class="dv">3970</span>,<span class="dv">3060</span>,<span class="dv">3180</span>,  </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>             <span class="dv">2865</span>,<span class="dv">2815</span>,<span class="dv">3245</span>,<span class="dv">2051</span>,<span class="dv">2630</span>)  </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>compRN <span class="ot">&lt;-</span> <span class="fu">c</span> (<span class="dv">50</span>,<span class="dv">48</span>,<span class="dv">52</span>,<span class="dv">48</span>,<span class="dv">50</span>,<span class="dv">51</span>,<span class="dv">50</span>,<span class="dv">51</span>,<span class="dv">47</span>,<span class="dv">47</span>,<span class="dv">47</span>,<span class="dv">49</span>,<span class="dv">51</span>,<span class="dv">50</span>,<span class="dv">44</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>sexo <span class="ot">&lt;-</span> <span class="fu">c</span> (<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>tipoParto <span class="ot">&lt;-</span> <span class="fu">c</span> (<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>idadeMae <span class="ot">&lt;-</span> <span class="fu">c</span> (<span class="dv">40</span>,<span class="dv">19</span>,<span class="dv">26</span>,<span class="dv">19</span>,<span class="dv">32</span>,<span class="dv">24</span>,<span class="dv">27</span>,<span class="dv">20</span>,<span class="dv">21</span>,<span class="dv">19</span>,<span class="dv">23</span>,<span class="dv">36</span>,<span class="dv">21</span>,<span class="dv">23</span>,<span class="dv">23</span>) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Este grupo de vetores (variáveis) isolados fica difícil de manusear. Portanto, seria útil reuni-los em um só objeto. Pode-se fazer isso, usando a função <code>data.frame()</code>, do R base. Este DataFrame será atribuído a um novo objeto de nome <code>dadosNeonatos</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>dadosNeonatos <span class="ot">&lt;-</span> <span class="fu">data.frame</span> (id,</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>                             pesoRN, </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>                             compRN, </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>                             sexo, </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>                             tipoParto, </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>                             idadeMae)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Verificando a classe deste novo objeto, tem-se:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span> (dadosNeonatos)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
</div>
<p>Para observar a modificação realizada, pode-se usar a função <code>str()</code> do R base, digitando no <em>R Script</em>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dadosNeonatos)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   15 obs. of  6 variables:
 $ id       : num  1 2 3 4 5 6 7 8 9 10 ...
 $ pesoRN   : num  3340 3345 3750 3650 3220 ...
 $ compRN   : num  50 48 52 48 50 51 50 51 47 47 ...
 $ sexo     : num  2 2 2 1 1 1 2 1 1 1 ...
 $ tipoParto: num  1 1 2 1 2 2 1 2 1 1 ...
 $ idadeMae : num  40 19 26 19 32 24 27 20 21 19 ...</code></pre>
</div>
</div>
<p>Na saida da função, verifica-se que o dataframe contém 15 linhas e 6 colunas.</p>
<section id="acrescentando-variáveis-a-um-dataframe" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="acrescentando-variáveis-a-um-dataframe"><span class="header-section-number">5.1.1</span> Acrescentando variáveis a um dataframe</h3>
<p>Será adicionada ao dataframe uma nova variável chamada <code>utiNeo</code>, que indica se cada recém-nascido foi encaminhado ou não para a UTI neonatal logo após o nascimento. Essa variável será construída a partir de um vetor contendo a situação de cada um dos 15 recém-nascidos, e será incorporada como uma nova coluna no dataframe. A sintaxe utilizada para essa operação segue o padrão , resultando em: <code>nome-do-dataframe$nome-da-variável</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>dadosNeonatos<span class="sc">$</span>utiNeo <span class="ot">&lt;-</span> <span class="fu">c</span> (<span class="st">"não"</span>,<span class="st">"não"</span>,<span class="st">"não"</span>,<span class="st">"não"</span>,<span class="st">"sim"</span>,<span class="st">"não"</span>,<span class="st">"sim"</span>,<span class="st">"não"</span>,<span class="st">"não"</span>,<span class="st">"não"</span>,<span class="st">"não"</span>,<span class="st">"sim"</span>,<span class="st">"não"</span>,<span class="st">"não"</span>,<span class="st">"não"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Com isso, ´utiNeo<code>passa a fazer parte do conjunto de dados, permitindo análises específicas sobre a necessidade de cuidados intensivos neonatais. A função</code>str()`, pode ser usada, novamente, para observar a transformação:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dadosNeonatos)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   15 obs. of  7 variables:
 $ id       : num  1 2 3 4 5 6 7 8 9 10 ...
 $ pesoRN   : num  3340 3345 3750 3650 3220 ...
 $ compRN   : num  50 48 52 48 50 51 50 51 47 47 ...
 $ sexo     : num  2 2 2 1 1 1 2 1 1 1 ...
 $ tipoParto: num  1 1 2 1 2 2 1 2 1 1 ...
 $ idadeMae : num  40 19 26 19 32 24 27 20 21 19 ...
 $ utiNeo   : chr  "não" "não" "não" "não" ...</code></pre>
</div>
</div>
</section>
<section id="sec-transform" class="level3" data-number="5.1.2">
<h3 data-number="5.1.2" class="anchored" data-anchor-id="sec-transform"><span class="header-section-number">5.1.2</span> Transformação de variáveis</h3>
<p>Observa-se que todas as variáveis estão como variáveis numéricas (<code>num</code>), exceto a variável ´utiNeo<code>questá como caractere (</code>chr<code>). Isto não está correto, pois as variáveis</code>sexo<code>,</code>tipoParto<code>são variáveis categóricas, bem como a  a variável</code>utiNeo<code>, adicionada posteriormente. Elas necessitam ser transformadas para fatores, usando a função</code>factor()`. Os principais argumentos dessa função são:</p>
<ul>
<li><strong>x</strong> <span class="math inline">\(\to\)</span> vetor numérico</li>
<li><strong>levels</strong> <span class="math inline">\(\to\)</span> vetor opcional dos valores que <em>x</em> pode assumir</li>
<li><strong>labels</strong> <span class="math inline">\(\to\)</span> vetor de caracteres dos rótulos para os níveis, na mesma ordem</li>
<li><strong>ordered</strong> <span class="math inline">\(\to\)</span> vetor lógico (TRUE ou FALSE). Se TRUE, os níveis dos fatores são assumidos como ordenados</li>
</ul>
<p>No exemplo, as variáveis não têm uma ordem lógica, então, o argumento <code>ordered</code> não é necessário.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>dadosNeonatos<span class="sc">$</span>tipoParto <span class="ot">&lt;-</span> <span class="fu">factor</span>(dadosNeonatos<span class="sc">$</span>tipoParto, </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"normal"</span>,<span class="st">"cesareo"</span>))</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>dadosNeonatos<span class="sc">$</span>sexo <span class="ot">&lt;-</span> <span class="fu">factor</span> (dadosNeonatos<span class="sc">$</span>sexo, </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>                               <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>                               <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"M"</span>,<span class="st">"F"</span>)) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A variável <code>utiNeo</code> já foi inserida como <code>string</code> (texto) e pertence a classe <code>character</code>, então, basta usar a <code>as.factor()</code> sem necessidade de alterar os rótulos (<code>labels</code>) nos níveis (<code>levels</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>dadosNeonatos<span class="sc">$</span>utiNeo <span class="ot">&lt;-</span> <span class="fu">as.factor</span> (dadosNeonatos<span class="sc">$</span>utiNeo)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Após a transformação, executa-se, novamente, a função <code>str()</code> para ver como ficou a estrutura do dataframe:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dadosNeonatos)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   15 obs. of  7 variables:
 $ id       : num  1 2 3 4 5 6 7 8 9 10 ...
 $ pesoRN   : num  3340 3345 3750 3650 3220 ...
 $ compRN   : num  50 48 52 48 50 51 50 51 47 47 ...
 $ sexo     : Factor w/ 2 levels "M","F": 2 2 2 1 1 1 2 1 1 1 ...
 $ tipoParto: Factor w/ 2 levels "normal","cesareo": 1 1 2 1 2 2 1 2 1 1 ...
 $ idadeMae : num  40 19 26 19 32 24 27 20 21 19 ...
 $ utiNeo   : Factor w/ 2 levels "não","sim": 1 1 1 1 2 1 2 1 1 1 ...</code></pre>
</div>
</div>
<p>Agora, as três varáveis passaram a ser fatores e as outras mantiveram-se numéricas.</p>
</section>
<section id="salvando-um-dataframe" class="level3" data-number="5.1.3">
<h3 data-number="5.1.3" class="anchored" data-anchor-id="salvando-um-dataframe"><span class="header-section-number">5.1.3</span> Salvando um dataframe</h3>
<p>O dataframe, criado e modificado anteriormente, pode ser salvo para uso posterior no diretório de trabalho.</p>
<p>A função <code>save()</code> realiza esta ação, usando como argumentos o dataframe a ser salvo e o nome do arquivo (<code>file =</code>) entre aspas. Por convenção, esta função salva com a extensão <code>.RData</code> que deve ser digitada, pois o R não a adiciona automaticamente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(dadosNeonatos, <span class="at">file =</span> <span class="st">"dadosNeonatos.RData"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Este comando colocará o arquivo no diretório de trabalho em uso. Portanto, se o objetivo é salvar em outro local, deve ser informado qual o novo diretório.</p>
<p>Para carregar o objeto salvo anteriormente com o comando <code>save()</code>, usa-se a função <code>load()</code>. Se o arquivo a ser lido não estiver no diretório de trabalho da sessão, há necessidade de especificar o caminho até o arquivo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"dadosNeonatos.RData"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>É possível salvar em outro tipo de extensão como Excel (<code>.xlsx</code>), Valores Separados por Vírgula (<code>.csv</code>), etc. O procedimento é o mesmo, mudando a função. Para salvar em uma extensão <code>.xlsx</code>,utiliza-se a função <code>write_xlsx ()</code> do pacote <code>writexl</code> <span class="citation" data-cites="ooms2022writexl">(<a href="referencias.html#ref-ooms2022writexl" role="doc-biblioref">2</a>)</span>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>writexl<span class="sc">::</span><span class="fu">write_xlsx</span>(dadosNeonatos, <span class="st">"dados/dadosNeonatos.xlsx"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Para salvar com a extensão <code>.csv</code>, usar a função <code>write.csv()</code> ou <code>write.csv2()</code> que faz parte do pacote <code>utils</code>, incluido no R base. A primeira função, usa <code>"."</code> para a separação dos decimais e <code>","</code> para separar as variáveis; a segunda função usa <code>","</code> para os decimais e <code>";"</code> para separar as variáveis, convenção do Excel para algumas localidades, como o Brasil <span class="citation" data-cites="write2022csv">(<a href="referencias.html#ref-write2022csv" role="doc-biblioref">3</a>)</span>. Portanto, uma maneira de salvar o arquivo é:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv2</span> (dadosNeonatos, <span class="st">"dados/dadosNeonatos.csv"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="importando-dados-de-outros-softwares" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="importando-dados-de-outros-softwares"><span class="header-section-number">5.2</span> Importando dados de outros <em>softwares</em></h2>
<p>É possível inserir dados diretamente no <em>R Script</em>, como mostrado na <a href="#sec-dataframes" class="quarto-xref"><span>Seção 5.1</span></a>. Entretanto, se o conjunto de dados for muito extenso, torna-se complicado. Desta forma, é melhor construir o dataframe em outro software, como o Excel, SPSS, etc. e, após, quando necessário, importar os dados para o R.</p>
<section id="sec-csv" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="sec-csv"><span class="header-section-number">5.2.1</span> Importando dados de um arquivo CSV</h3>
<p>O formato CSV significa <em>Comma Separated Values</em>, ou seja, é um arquivo de valores separados por vírgula. Esse formato de armazenamento é simples e agrupa informações de arquivos de texto em planilhas. É possível gerar um arquivo <code>.csv</code>, a partir de uma planilha do <em>Excel</em>, usando o menu <code>salvar como</code> e escolher <code>CSV</code>.</p>
<p>As funções <code>read.csv()</code> e <code>read.csv2()</code>, incluídas no R base, podem ser utilizadas para importar arquivos CSV. Existe uma pequena diferença entre elas. Dois argumentos dessas funções têm padrão diferentes em cada uma. São eles: <code>sep</code> (separador de colunas) e <code>dec</code> (separador de decimais). Na <code>read.csv()</code>, o padrão é <code>sep = ”,”</code> e <code>dec = ”.”</code> e em <code>read.csv2()</code> o padrão é <code>sep = “;”</code> e <code>dec = ”,”</code>. Portanto, quando se importa um arquivo <code>.csv</code>, é importante saber qual a sua estrutura. Verificar se os decimais estão separados por <em>ponto</em> ou por <em>vírgula</em> e se as colunas (variáveis), por <em>vírgula</em> ou <em>ponto e vírgula</em>. Para ver isso, basta abrir o arquivo em um bloco de notas (por exemplo, <em>Bloco de Notas do Windows</em>, <em>Notepad ++</em>).</p>
<p>Quando se usa o <code>read.csv()</code> há necessidade de informar o separador e o decimal, pois senão ele usará o padrão inglês e o arquivo não será lido. Já com <code>read.csv2()</code>, que usa o padrão brasileiro, não há necessidade de informar qual o separador de colunas e nem o separador dos decimais.</p>
<p>Além disso, é necessário saber em que diretório do computador está o arquivo para informar ao comando. Recomenda-se colocar o arquivo na pasta do diretório de trabalho, pois assim basta apenas colocar o nome do arquivo na função de leitura dos dados. Caso contrário, tem-se que se usar todo o caminho (<em>path</em>).</p>
<p>Como exemplo, será importado o arquivo <code>dadosNeonatos.csv</code> que se encontra no diretório de trabalho do autor, salvo anteriormente. Para obter o arquivo, siga os passos da <a href="#sec-dataframes" class="quarto-xref"><span>Seção 5.1</span></a> ou clique <a href="https://github.com/petronioliveira/Arquivos/blob/main/dadosNeonatos.csv"><strong>aqui</strong></a> e salve em seu diretório de trabalho.</p>
<p>A estrutura deste arquivo mostra que as colunas estão separadas por ponto-e-virgula e, portanto, a leitura dos dados será feita com a função <code>read.csv2()</code> e, como o arquivo está no diretório de trabalho, não há necessidade de informar o diretório completo. Os dados serão colocados em um objeto de nome <code>neonatos</code> <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>neonatos <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">"dados/dadosNeonatos.csv"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Use a função <code>str()</code> para visualizar o conjunto de dados:<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(neonatos)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   15 obs. of  8 variables:
 $ X        : int  1 2 3 4 5 6 7 8 9 10 ...
 $ id       : int  1 2 3 4 5 6 7 8 9 10 ...
 $ pesoRN   : int  3340 3345 3750 3650 3220 4070 3380 3970 3060 3180 ...
 $ compRN   : int  50 48 52 48 50 51 50 51 47 47 ...
 $ sexo     : chr  "F" "F" "F" "M" ...
 $ tipoParto: chr  "normal" "normal" "cesareo" "normal" ...
 $ idadeMae : int  40 19 26 19 32 24 27 20 21 19 ...
 $ utiNeo   : chr  "não" "não" "não" "não" ...</code></pre>
</div>
</div>
<p>Como se observa na saída do comando, as variáveis foram importadas em classes que vão necessitar transformações para serem usadas. Isto deve ser feito como foi visto na <a href="#sec-transform" class="quarto-xref"><span>Seção 5.1.2</span></a>.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Atenção
</div>
</div>
<div class="callout-body-container callout-body">
<p>Toda vez que se importa um dataset, deve-se verificar atentamente a sua estrutura antes de dar seguimento as análises</p>
</div>
</div>
<p>Recentemente, foi desenvolvido o pacote <code>readr</code>, incluído no conjunto de pacotes <code>tidyverse</code> <span class="citation" data-cites="wickham2019tidyverse">(<a href="referencias.html#ref-wickham2019tidyverse" role="doc-biblioref">4</a>)</span>, para lidar rapidamente com a leitura de grandes arquivos. O pacote fornece substituições para funções como <code>read.csv()</code>. As funções <code>read_csv()</code> e <code>read_csv2()</code> oferecidas pelo <code>readr</code> são análogas às do R base. Entretanto, são muito mais rápidas e fornecem mais recursos, como um método compacto para especificar tipos de coluna. Além disso, produzem <code>tibbles</code> (ver adiante, <a href="#sec-tibble" class="quarto-xref"><span>Seção 5.3</span></a>) que são mais reproduzíveis, pois as funções básicas do R herdam alguns comportamentos do sistema operacional e das variáveis de ambiente, portanto, o código de importação que funciona no seu computador pode não funcionar no de outra pessoa. Para usar a função é necessário instalar e ativar o pacote <code>readr</code>. A função <code>read_csv2()</code> será utilizada para criar um outro objeto de nome <code>recemNascidos</code>, mas o conjunto de dados a ser ativado é o mesmo (<code>dadosNeonatos</code>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">library</span>(readr)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a> recemNascidos <span class="ot">&lt;-</span> <span class="fu">read_csv2</span>(<span class="st">"dados/dadosNeonatos.csv"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Quando você executa <code>read_csv2()</code>, ele imprime uma especificação de coluna que fornece o nome e o tipo de cada coluna.</p>
<p>Novamente, a função <code>str()</code> mostrará a estrutura do arquivo, incluindo mais detalhes <a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(recemNascidos)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>spc_tbl_ [15 × 8] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
 $ ...1     : num [1:15] 1 2 3 4 5 6 7 8 9 10 ...
 $ id       : num [1:15] 1 2 3 4 5 6 7 8 9 10 ...
 $ pesoRN   : num [1:15] 3340 3345 3750 3650 3220 ...
 $ compRN   : num [1:15] 50 48 52 48 50 51 50 51 47 47 ...
 $ sexo     : chr [1:15] "F" "F" "F" "M" ...
 $ tipoParto: chr [1:15] "normal" "normal" "cesareo" "normal" ...
 $ idadeMae : num [1:15] 40 19 26 19 32 24 27 20 21 19 ...
 $ utiNeo   : chr [1:15] "não" "não" "não" "não" ...
 - attr(*, "spec")=
  .. cols(
  ..   ...1 = col_double(),
  ..   id = col_double(),
  ..   pesoRN = col_double(),
  ..   compRN = col_double(),
  ..   sexo = col_character(),
  ..   tipoParto = col_character(),
  ..   idadeMae = col_double(),
  ..   utiNeo = col_character()
  .. )
 - attr(*, "problems")=&lt;externalptr&gt; </code></pre>
</div>
</div>
</section>
<section id="sec-xlsx" class="level3" data-number="5.2.2">
<h3 data-number="5.2.2" class="anchored" data-anchor-id="sec-xlsx"><span class="header-section-number">5.2.2</span> Importando um arquivo do Excel</h3>
<p>O pacote <code>readxl</code>, pertencente ao conjunto de pacotes do <code>tidyverse</code>, facilita a obtenção de dados do Excel para o R, através da função <code>read_excel()</code>. esta função tem o argumento <code>sheet =</code> , que deve ser usado indicando o número ou o nome da planilha, colocado entre aspas. Este argumento é importante se houver mais de uma planilha, caso contrário, ele é opcional. Para saber os outros argumentos da função, colque o cursor dentro da função e aperte a tecla <code>Tab</code> (<a href="#fig-sheet" class="quarto-xref">Figura&nbsp;<span>5.1</span></a>). Isto abrirá um menu com os argumentos:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-sheet" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-sheet-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="https://i.imgur.com/5qY7z0C.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-sheet-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;5.1: Argumentos da função para importar arquivos .xlsx
</figcaption>
</figure>
</div>
</div>
</div>
<p>Será feita a leitura dos mesmos dados, usados na leitura de dados <code>csv</code>, apenas o arquivo agora está no formato <code>.xlsx</code>. Para obter o arquivo, siga os mesmos passos, usados anteriormente. Clique <a href="https://github.com/petronioliveira/Arquivos/blob/main/dadosNeonatos.xlsx"><strong>aqui</strong></a> e salve em seu diretório de trabalho.</p>
<p>Os dados serão atribuídos a um objeto com outro nome (<code>recemNatos</code>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>recemNatos <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"dados/dadosNeonatos.xlsx"</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(recemNatos)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [15 × 7] (S3: tbl_df/tbl/data.frame)
 $ id       : num [1:15] 1 2 3 4 5 6 7 8 9 10 ...
 $ pesoRN   : num [1:15] 3340 3345 3750 3650 3220 ...
 $ compRN   : num [1:15] 50 48 52 48 50 51 50 51 47 47 ...
 $ sexo     : chr [1:15] "F" "F" "F" "M" ...
 $ tipoParto: chr [1:15] "normal" "normal" "cesareo" "normal" ...
 $ idadeMae : num [1:15] 40 19 26 19 32 24 27 20 21 19 ...
 $ utiNeo   : chr [1:15] "não" "não" "não" "não" ...</code></pre>
</div>
</div>
<p>Como se vê ao analisar a estrutura, deve-se proceder transformações nas variáveis, como visto na <a href="#sec-transform" class="quarto-xref"><span>Seção 5.1.2</span></a>.</p>
<p>Na <a href="#fig-sheet" class="quarto-xref">Figura&nbsp;<span>5.1</span></a>, o duplo dois pontos (<code>::</code>) precedido do nome do pacote, no caso <code>readxl</code>, especifica a procedência da função usada. Nesta situação, não há necessidade de usar a função <code>library()</code> para carregar o pacote já instalado em um diretório (biblioteca) previamente.</p>
</section>
<section id="importando-arquivos-com-o-rstudio" class="level3" data-number="5.2.3">
<h3 data-number="5.2.3" class="anchored" data-anchor-id="importando-arquivos-com-o-rstudio"><span class="header-section-number">5.2.3</span> Importando arquivos com o RStudio</h3>
<p>O <code>RStudio</code> permite importar arquivos sem a necessidade de digitar comandos, que, para alguns podem ser tediosos.</p>
<p>Na tela inicial do <code>RStudio</code>, à direita, na parte superior, clique na aba <em>Environment</em> e em <code>Import Dataset</code>. Esta ação abre um menu que permite importar arquivos .csv, Excel, SPSS, etc.</p>
<p>Por exemplo, para importar o arquivo <code>dadosNeonatos.xlsx</code>, clicar em <code>From Excel...</code> Abre uma janela com uma caixa de diálogo. Clicar no botão <code>Browse...</code>, localizado em cima à direita, para buscar o arquivo <code>dadosNeonatos.xlsx</code>. Assim que o arquivo for aberto, ele mostra uma <em>preview</em> do arquivo e, em baixo, à direita mostra uma <em>preview</em> do código (<a href="#fig-import" class="quarto-xref">Figura&nbsp;<span>5.2</span></a>)), igual ao digitado anteriormente, que cria um objeto denominado <code>dadosNeonatos</code>, nome do objeto escolhido pelo R, mas pode ser modificado na janela, à esquerda, <code>Import Option</code> em <code>Name</code>, onde pode-se digitar qualquer nome. Após encerrar as escolhas, clicar em <code>Import</code>. É um caminho diferente para fazer o mesmo. Este é um dos fascínios do R!</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-import" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-import-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="https://i.imgur.com/xjEpK6A.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-import-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;5.2: Importando arquivos do excel com o RStudio
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="sec-tibble" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="sec-tibble"><span class="header-section-number">5.3</span> Tibble</h2>
<p>A maneira mais comum de armazenar dados no R é usar <code>data.frames</code> ou <code>tibble</code>.</p>
<p><em>Tibble</em> é um novo tipo de dataframe. É como se fosse um dataframe mais moderno. Ele mantém muitos recursos importantes do data frame original, mas remove muitos dos recursos desatualizados.</p>
<p>A maioria dos pacotes do R usa dataframes tradicionais, entretanto é possível transformá-los para <code>tibble</code>, usando a função <code>as_tibble()</code>, incluída no pacote <code>tidyr</code> <span class="citation" data-cites="wickham2022tidyr">(<a href="referencias.html#ref-wickham2022tidyr" role="doc-biblioref">5</a>)</span>. O único propósito deste pacote é simplificar o processo de criação dados arrumados organizados (<code>tidy data</code>). A transformação de um dataframe tradicional em um <code>tibble</code>, é um procedimento rescomendável, em função da maior flexibilidade destes.</p>
<p>Como exemplo deste procedimento, será usado o dataframes criado na <a href="#sec-dataframes" class="quarto-xref"><span>Seção 5.1</span></a>: <code>dadosNeonatos</code>.</p>
<p>Este é um conjunto de dados da classe <code>data.frame</code>, contendo 15 observações de 7 variáveis (colunas), pode convetrtido a um <code>tibble</code>, usando a função <code>as.tibble()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as_tibble</span>(dadosNeonatos)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 7
      id pesoRN compRN sexo  tipoParto idadeMae utiNeo
   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;        &lt;dbl&gt; &lt;fct&gt; 
 1     1   3340     50 F     normal          40 não   
 2     2   3345     48 F     normal          19 não   
 3     3   3750     52 F     cesareo         26 não   
 4     4   3650     48 M     normal          19 não   
 5     5   3220     50 M     cesareo         32 sim   
 6     6   4070     51 M     cesareo         24 não   
 7     7   3380     50 F     normal          27 sim   
 8     8   3970     51 M     cesareo         20 não   
 9     9   3060     47 M     normal          21 não   
10    10   3180     47 M     normal          19 não   
11    11   2865     47 F     normal          23 não   
12    12   2815     49 F     cesareo         36 sim   
13    13   3245     51 M     normal          21 não   
14    14   2051     50 M     normal          23 não   
15    15   2630     44 F     normal          23 não   </code></pre>
</div>
</div>
<p>Por padrão, quando o dataset é muito longo, apenas as primeiras dez linhas são mostradas. Aqui, aparece o toda a estrutura dos dados. São apresentadas a dimensão da tabela e as classes de cada coluna. Verifica-se que não houve grandes mudanças, apenas o conjunto de dados está estruturalmente mais organizado, mais flexível.</p>
</section>
<section id="sec-tidyverse" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="sec-tidyverse"><span class="header-section-number">5.4</span> Pacote tidyverse</h2>
<p>A denominada ciência de dados é difícil de definir, pois a definição depende da formação específica de cada cientista de dados. Entretanto, é possível mostrar como a ciência de dados pode ser realizada na prática, constituindo aquilo que se costuma chamar de <em>Ciclo da Ciência de Dados</em> (<a href="#fig-ciclo" class="quarto-xref">Figura&nbsp;<span>5.3</span></a>).<br>
Primeiramente, os dados brutos são coletados de diversas maneiras (veja <a href="03-producaoDados.html" class="quarto-xref"><span>Capítulo 3</span></a>). Após, são armazenados, por exemplo, em Excel, e, em seguida, são arrumados para reduzir problemas de padronização, conceituais e erros ou exclusão de variáveis e casos que não fazem parte do objetivo estabelecido no projeto de pesquisa. Isto constituirá a base de dados analítica.<br>
A base de dados analítica é então transformada, refinada, para produzir medidas resumidoras, tabela e gráficos. Quando necessário, são produzidos modelos estatíticos. O resultado final deve ser comunicado através dos meios de divulgação científica (relatórios, periódicos, livros, jornadas, congressos, GitHub, etc.).</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-ciclo" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ciclo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="https://i.imgur.com/UYe9AIO.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ciclo-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;5.3: Ciclo da Ciência de Dados
</figcaption>
</figure>
</div>
</div>
</div>
<p>O pacote <code>tidyverse</code> é uma coleção de pacotes para a linguagem de programação R, pensada e desenvolvida para facilitar e otimizar o fluxo de trabalho em ciência de dados <span class="citation" data-cites="wickham2019tidyverse">(<a href="referencias.html#ref-wickham2019tidyverse" role="doc-biblioref">4</a>)</span>.<br>
Em vez de ser um pacote único, ele é um “meta-pacote”, o que significa que, ao instalá-lo, você instala vários pacotes menores que trabalham em conjunto.</p>
<p>A filosofia principal por trás do <code>tidyverse</code> é a de dados “tidy” (arrumados ou organizados) <span class="citation" data-cites="wickham2014tidy">(<a href="referencias.html#ref-wickham2014tidy" role="doc-biblioref">6</a>)</span>, onde:</p>
<ul>
<li><p>Cada variável está em uma coluna.</p></li>
<li><p>Cada observação está em uma linha.</p></li>
<li><p>Cada valor está em uma célula.</p></li>
</ul>
<p>Seguindo essa lógica, as funções e pacotes do <code>tidyverse</code> são projetados para facilitar a manipulação dos dados dentro do Ciclo da Ciência de Dados (@fig-ciclo), tornando a manipulação, a análise e a visualização de dados mais consistentes e intuitivas.</p>
<section id="principais-pacotes-do-tidyverse" class="level3" data-number="5.4.1">
<h3 data-number="5.4.1" class="anchored" data-anchor-id="principais-pacotes-do-tidyverse"><span class="header-section-number">5.4.1</span> Principais Pacotes do tidyverse</h3>
<p>O <code>tidyverse</code> simplifica tarefas complexas, oferecendo ferramentas específicas para cada etapa do Ciclo de Ciências de Dados. Alguns dos pacotes mais importantes são:</p>
<ul>
<li><p><strong>dplyr</strong>: Para manipulação de dados. Contém funções essenciais para filtrar linhas, selecionar colunas, criar novas variáveis, e resumir dados.</p></li>
<li><p><strong>ggplot2</strong>: Para visualização de dados. É um dos pacotes mais populares do R para criar gráficos esteticamente agradáveis e informativos.</p></li>
<li><p><strong>tidyr</strong>: Para organizar os dados. Ele transforma dados “bagunçados” (que não seguem o formato tidy) em um formato mais limpo e organizado.</p></li>
<li><p><strong>readr</strong>: Para importar dados. Permite ler arquivos de texto (como CSVs) de forma rápida e robusta.</p></li>
<li><p><strong>tibble</strong>: Uma versão aprimorada do data.frame do R base. O <code>tibble</code> é mais fácil de usar e interage melhor com os pacotes do <code>tidyverse</code>.</p></li>
<li><p><strong>stringr</strong>: Para manipular strings (textos). Simplifica as tarefas de trabalhar com dados de texto.</p></li>
<li><p><strong>forcats</strong>: Para lidar com fatores (variáveis categóricas).</p></li>
</ul>
</section>
<section id="sec-printidyverse" class="level3" data-number="5.4.2">
<h3 data-number="5.4.2" class="anchored" data-anchor-id="sec-printidyverse"><span class="header-section-number">5.4.2</span> Princípios do tidyverse</h3>
<p>O <code>tidyverse</code> causou quase uma revolução na comunidade do R. Aguns chegam a dizer que existe uma linguagem R antes e depois do <code>tidyverse</code>. Pode parecer exagero, mas o certo é que o uso dos princípios do <code>tidyverse</code> foi abraçado pela maioria dos usuários de R e, em função disso, foram criados uma grande quantidade de pacotes que conversam entre si, facilitando o manuseio dos dados.</p>
<p>Os princípios fundamentais são:</p>
<ol type="1">
<li><p>Reutilizar estruturas de dados existentes.</p></li>
<li><p>Organizar funções simples usando o <code>pipe</code>.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>. Esse operador, introduzido por Stefan Milton Bache no pacote <code>magrittr</code> <span class="citation" data-cites="bache2022magritt">(<a href="referencias.html#ref-bache2022magritt" role="doc-biblioref">7</a>)</span>, permite encadear múltiplas operações em uma sequência clara e legível, de forma que a saída de uma função se torna a entrada da próxima. Isso torna o código mais fácil de ler e entender, eliminando a necessidade de criar muitas variáveis intermediárias. O <code>pipe</code> pode ser acionado digitando <code>%&gt;%</code> ou usando o atalho <code>ctrl + shift + M</code>. <a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p></li>
<li><p>Usar uma sintaxe consistente: As funções dos pacotes tidyverse seguem uma lógica de nomeação e de argumentos parecida, facilitando a memorização e o uso.</p></li>
<li><p>Projetado com foco nos seres humanos, priorizando a eficiência do programador.</p></li>
</ol>
<p>Quando o <code>tidyverse</code> é carregado, todos os pacotes embutidos nele, serão carregados.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ purrr     1.1.0
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.2     ✔ tibble    3.3.0
✔ lubridate 1.9.4     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled" title="Conflito de funções ao carregar tidyverse">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Conflito de funções ao carregar tidyverse
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ao carregar o pacote <code>tidyverse</code> ou qualquer outro, podem surgir mensagens de conflito indicando que funções previamente disponíveis foram sobrescritas por versões de mesmo nome.</p>
<p>No exemplo apresentado, as funções <code>filter()</code> e <code>lag()</code> do pacote <code>stats</code> foram substituídas pelas versões do pacote <code>dplyr</code>.</p>
<p>Para utilizar as funções originais do pacote <code>stats</code> após esse carregamento, é necessário especificar o namespace diretamente:<br>
<code>stats::filter()</code> e <code>stats::lag()</code>.</p>
</div>
</div>
</section>
</section>
<section id="sec-dplyr" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="sec-dplyr"><span class="header-section-number">5.5</span> Pacote dplyr</h2>
<p>Um dos pacotes de maior utilidade abarcado pelo <code>tidyverse</code> é o <code>dplyr</code>. Ele permite realizar transformação dos dados de uma forma simples e eficiente. O uso dos verbos <code>dplyr</code>, aliado ao operador <code>pipe</code>, tendem a tornar os scripts mais “enxutos” e elegantes <span class="citation" data-cites="wickham2015dplyr">(<a href="referencias.html#ref-wickham2015dplyr" role="doc-biblioref">8</a>)</span>.<br>
As principais funções do <code>dplyr</code> são:</p>
<ul>
<li><code>select()</code> - seleciona colunas<br>
</li>
<li><code>arrange()</code> - ordena uma variável em ordem crescente ou descrescente<br>
</li>
<li><code>filter()</code> - filtra linhas<br>
</li>
<li><code>mutate()</code> - cria/modifica colunas<br>
</li>
<li><code>group_by()</code> - agrupa por fatores<br>
</li>
<li><code>summarise()</code> - sumariza a base</li>
</ul>
<p>Todas as funções tem as mesmas características: o primeiro argumento é um tibble e o que será a ação da função nos outrso argumentos.</p>
<p>Neste capítulo e em muitos outros deste livro, será outilizado o dataframe <code>dadosMater.xlsx</code>.</p>
</section>
<section id="sec-dadosMater" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="sec-dadosMater"><span class="header-section-number">5.6</span> Dataframe <code>dadosMater.xlsx</code></h2>
<p>O arquivo <code>dadosMater.xlsx</code> é um dataframe constituído por dados de 1568 partos consecutivos do Hospital Geral de Caxias do Sul (HGCS) <a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> , durante um estudo sobre infecções congênitas <span class="citation" data-cites="madi2010prevalence">(<a href="referencias.html#ref-madi2010prevalence" role="doc-biblioref">9</a>)</span>. Para baixar esses dados, clique <a href="https://github.com/petronioliveira/Arquivos/blob/main/dadosMater.xlsx">aqui</a> e faça o <em>download</em> para o diretório de trabalho, para uso posterior.</p>
<section id="leitura-dos-dados" class="level3" data-number="5.6.1">
<h3 data-number="5.6.1" class="anchored" data-anchor-id="leitura-dos-dados"><span class="header-section-number">5.6.1</span> Leitura dos dados</h3>
<p>Para ler arquivos do Excel (<code>.xlsx</code>), o pacote ideal é o <code>readxl</code>, que também faz parte do <code>tidyverse</code>. Ele é leve, rápido e não depende do Excel instalado. A função a ser usada é <code>read_excel()</code>. O objeto <code>mater</code> será utilizado para receber os dados:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>mater <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"dados/dadosMater.xlsx"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Importante
</div>
</div>
<div class="callout-body-container callout-body">
<p>O comando para carregar o conjunto de dados somente funciona ,sem colocar o caminho completo, se tudo está sendo realizado no diretório de trabalho</p>
</div>
</div>
<p>Como rotina, em análise de dados, após a leitura é interessante explorar a estrutura do dados. A função <code>as_tibble()</code> é interessante para ver a estrutura de um <code>tibble</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as_tibble</span>(mater)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,368 × 30
      id idadeMae altura  peso ganhoPeso anosEst   cor eCivil renda  fumo
   &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1     1       42   1.65  69.9       3.9       3     2      1  1.45     2
 2     2       29   1.66  78        16.5      11     1      2  2.41     2
 3     3       19   1.72  81         5         9     2      1  1.93     2
 4     4       31   1.55  74        43         5     2      2  1.45     2
 5     5       34   1.6   60        15         7     2      2  0.48     2
 6     6       29   1.5   60        11.4       8     2      2  0.96     1
 7     7       30   1.54  75.5      10.5       4     1      2  1.2      1
 8     8       34   1.63  61         9         6     1      2  2.41     2
 9     9       17   1.68  57        15        10     1      2  2.17     2
10    10       32   1.5   70        11.4       1     2      2  0.72     2
# ℹ 1,358 more rows
# ℹ 20 more variables: quantFumo &lt;dbl&gt;, prenatal &lt;dbl&gt;, para &lt;dbl&gt;,
#   droga &lt;dbl&gt;, ig &lt;dbl&gt;, tipoParto &lt;dbl&gt;, pesoPla &lt;dbl&gt;, sexo &lt;dbl&gt;,
#   pesoRN &lt;dbl&gt;, compRN &lt;dbl&gt;, pcRN &lt;dbl&gt;, apgar1 &lt;dbl&gt;, apgar5 &lt;dbl&gt;,
#   utiNeo &lt;dbl&gt;, obito &lt;dbl&gt;, hiv &lt;dbl&gt;, sifilis &lt;dbl&gt;, rubeola &lt;dbl&gt;,
#   toxo &lt;dbl&gt;, infCong &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Por padrão, a função retorna as dez primeiras linhas. Além disso, colunas que não couberem na largura da tela serão omitidas. Também são apresentadas a dimensão da tabela e as classes de cada coluna. Observa-se que ele tem 1368 linhas (observações) e 30 colunas (variáveis). Além disso, verifica-se que todas as variáveis estão como numéricas (<code>dbl</code>) e, certamente, algumas, dependendo do objetivo na análise, precisarão ser transformadas.</p>
<p>O significado de cada uma das variáveis do <code>tibble</code> <code>mater</code> é o seguinte:</p>
<ul>
<li><strong>id</strong> <span class="math inline">\(\to\)</span> identificação do participante<br>
</li>
<li><strong>idadeMae</strong> <span class="math inline">\(\to\)</span> idade da parturiente em anos<br>
</li>
<li><strong>altura</strong> <span class="math inline">\(\to\)</span> altura da parturiente em metros<br>
</li>
<li><strong>peso</strong> <span class="math inline">\(\to\)</span> peso da parturiente em kg<br>
</li>
<li><strong>ganhoPeso</strong> <span class="math inline">\(\to\)</span> aumento de peso durante a gestação<br>
</li>
<li><strong>anosEst</strong> <span class="math inline">\(\to\)</span> anos de estudo completos<br>
</li>
<li><strong>cor</strong> <span class="math inline">\(\to\)</span> cor declarada pela parturiente: 1 = branca; 2 = não branca<br>
</li>
<li><strong>eCivil</strong> <span class="math inline">\(\to\)</span> estado civil: 1 = solteira; 2 = casada ou companheira<br>
</li>
<li><strong>renda</strong> <span class="math inline">\(\to\)</span> renda familiar em salários minimos<br>
</li>
<li><strong>fumo</strong> <span class="math inline">\(\to\)</span> tabagismo: 1 = sim; 2 = não<br>
</li>
<li><strong>quantFumo</strong> <span class="math inline">\(\to\)</span> quantidade de cigarros fumados diariamente<br>
</li>
<li><strong>prenatal</strong> <span class="math inline">\(\to\)</span> realizou pelo menos 6 consultas no pré-natal? 1 = sim; 2 = não</li>
<li><strong>para</strong> <span class="math inline">\(\to\)</span> número de filhos paridos<br>
</li>
<li><strong>droga</strong> <span class="math inline">\(\to\)</span> drogadição? 1 = sim; 2 = não<br>
</li>
<li><strong>ig</strong> <span class="math inline">\(\to\)</span> idade gestacional em semanas<br>
</li>
<li><strong>tipoParto</strong> <span class="math inline">\(\to\)</span> tipo de parto: 1 = normal; 2 = cesareana<br>
</li>
<li><strong>pesoPla</strong> <span class="math inline">\(\to\)</span> peso da placenta em gramas</li>
<li><strong>sexo</strong> <span class="math inline">\(\to\)</span> sexo do recém-nascido (RN): 1 = masc; 2 = fem<br>
</li>
<li><strong>pesoRN</strong> <span class="math inline">\(\to\)</span> peso do RN em gramas<br>
</li>
<li><strong>compRN</strong> <span class="math inline">\(\to\)</span> comprimento do RN em cm<br>
</li>
<li><strong>pcRN</strong> <span class="math inline">\(\to\)</span> perímetro cefálico dorecém-nascido em cm<br>
</li>
<li><strong>apgar1</strong> <span class="math inline">\(\to\)</span> escore de Apgar no primeiro minuto<br>
</li>
<li><strong>apgar5</strong> <span class="math inline">\(\to\)</span> escore de Apgar no quinto minuto<br>
</li>
<li><strong>utiNeo</strong> <span class="math inline">\(\to\)</span> RN necessitou de terapia intesiva? 1 = sim; 2 = não<br>
</li>
<li><strong>obito</strong> <span class="math inline">\(\to\)</span> obito no período neonatal? 1 = sim; 2 = não<br>
</li>
<li><strong>hiv</strong> <span class="math inline">\(\to\)</span> parturiente portadora de HIV? 1 = sim; 2 = não<br>
</li>
<li><strong>sifilis</strong> <span class="math inline">\(\to\)</span> parturiente portadora de sífilis? 1 = sim; 2 = não<br>
</li>
<li><strong>rubeola</strong> <span class="math inline">\(\to\)</span> parturiente portadora de rubéola? 1 = sim; 2 = não<br>
</li>
<li><strong>toxo</strong> <span class="math inline">\(\longrightarrow\)</span> parturiente portadora de toxoplasmose? 1 = sim; 2 = não<br>
</li>
<li><strong>infCong</strong> <span class="math inline">\(\to\)</span> parturiente portadora de alguma infecção congênita? 1 = sim; 2 = não</li>
</ul>
<p>O <em>tibble</em> mater pode ser facilmente modificado com os verbos do pacote <code>dplyr</code>.</p>
</section>
<section id="selecionando-colunas" class="level3" data-number="5.6.2">
<h3 data-number="5.6.2" class="anchored" data-anchor-id="selecionando-colunas"><span class="header-section-number">5.6.2</span> Selecionando colunas</h3>
<p>A função <code>select ()</code> pode ser usada para escolher quais colunas (variáveis) entrarão na análise. Ela recebe como primeiro argumento o conjunto de dados e os demais argumentos são os nomes das colunas. O nome das colunas devem estar entre aspas.<br>
O conjunto de dados <code>mater</code> contém 30 colunas e muitas podem ser removidas, dependendo do objetivo da análise.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>mater <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(mater, <span class="sc">-</span> obito, <span class="sc">-</span>hiv, <span class="sc">-</span>sifilis, <span class="sc">-</span>rubeola, <span class="sc">-</span>toxo)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note que foi usado o sinal de menos (-) antes das variáveis, porque elas foram removidas. Também poderiam ser listadas as variáveia que permanecem que, automaticamente, as não listadas serão removidas.</p>
<p>Outra maneira, pode ser colocando o número da coluna como abaixo, o sinal de subtração antes da função concatenar c()com os números das colunas a serem removidas (25 a 29):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>mater <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(mater, <span class="sc">-</span> <span class="fu">c</span>(<span class="dv">25</span><span class="sc">:</span><span class="dv">29</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A função <code>str()</code> permite visualizar a nova estrutura:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mater)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [1,368 × 25] (S3: tbl_df/tbl/data.frame)
 $ id       : num [1:1368] 1 2 3 4 5 6 7 8 9 10 ...
 $ idadeMae : num [1:1368] 42 29 19 31 34 29 30 34 17 32 ...
 $ altura   : num [1:1368] 1.65 1.66 1.72 1.55 1.6 1.5 1.54 1.63 1.68 1.5 ...
 $ peso     : num [1:1368] 69.9 78 81 74 60 60 75.5 61 57 70 ...
 $ ganhoPeso: num [1:1368] 3.9 16.5 5 43 15 11.4 10.5 9 15 11.4 ...
 $ anosEst  : num [1:1368] 3 11 9 5 7 8 4 6 10 1 ...
 $ cor      : num [1:1368] 2 1 2 2 2 2 1 1 1 2 ...
 $ eCivil   : num [1:1368] 1 2 1 2 2 2 2 2 2 2 ...
 $ renda    : num [1:1368] 1.45 2.41 1.93 1.45 0.48 0.96 1.2 2.41 2.17 0.72 ...
 $ fumo     : num [1:1368] 2 2 2 2 2 1 1 2 2 2 ...
 $ quantFumo: num [1:1368] 0 0 0 0 0 10 20 0 0 0 ...
 $ prenatal : num [1:1368] 2 1 2 2 2 1 1 2 2 1 ...
 $ para     : num [1:1368] 5 0 0 1 2 1 2 1 0 4 ...
 $ droga    : num [1:1368] 2 2 2 2 2 2 2 2 2 2 ...
 $ ig       : num [1:1368] 29 33 33 33 33 33 33 33 34 34 ...
 $ tipoParto: num [1:1368] 2 2 1 1 2 1 2 1 1 2 ...
 $ pesoPla  : num [1:1368] 224 1118 452 432 574 ...
 $ sexo     : num [1:1368] 2 2 2 2 2 2 2 2 2 2 ...
 $ pesoRN   : num [1:1368] 1035 2300 1580 1840 2475 ...
 $ compRN   : num [1:1368] 35.5 45 39 41 47 41 44 44 47 48 ...
 $ pcRN     : num [1:1368] 28 32 28 32 32 29 32 32 30 27 ...
 $ apgar1   : num [1:1368] NA NA NA NA NA NA NA NA NA NA ...
 $ apgar5   : num [1:1368] NA NA NA NA NA NA NA NA NA NA ...
 $ utiNeo   : num [1:1368] 1 2 1 1 1 1 2 2 1 1 ...
 $ infCong  : num [1:1368] 2 2 2 2 1 2 2 2 2 2 ...</code></pre>
</div>
</div>
<p>A função <code>select ()</code> pode ser combinada com outras funções, como <code>filter ()</code>.</p>
</section>
<section id="modificando-e-criando-novas-colunas" class="level3" data-number="5.6.3">
<h3 data-number="5.6.3" class="anchored" data-anchor-id="modificando-e-criando-novas-colunas"><span class="header-section-number">5.6.3</span> Modificando e criando novas colunas</h3>
<p>Para esta ação, usa-se a função <code>mutate()</code>. Por exemplo, todas as variáveis no <em>tibble</em> <code>mater</code> foram lidas como numéricas. Entretanto, as variáveis <code>cor</code>, <code>estCivil</code>, <code>fumo</code>, <code>prenatal</code>, <code>droga</code>, <code>tipoParto</code>, <code>sexo</code>, <code>utiNeo</code> e <code>infCong</code> são categóricas e devem ser convertidas para fator, usando a função <code>factor()</code> associada a <code>mutate()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>mater <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(mater,</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">cor =</span> <span class="fu">factor</span>(cor, </span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"branca"</span>, <span class="st">"não branca"</span>)), </span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>                        <span class="at">eCivil =</span> <span class="fu">factor</span>(eCivil, </span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"solteira"</span>, <span class="st">"não branca"</span>)),</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>                        <span class="at">fumo =</span> <span class="fu">factor</span>(fumo, </span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"sim"</span>, <span class="st">"não"</span>)), , </span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>                        <span class="at">prenatal =</span> <span class="fu">factor</span>(prenatal, </span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"sim"</span>, <span class="st">"não"</span>)), </span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>                        <span class="at">droga =</span> <span class="fu">factor</span>(droga, </span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"sim"</span>, <span class="st">"não"</span>)), </span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>                        <span class="at">tipoParto =</span> <span class="fu">factor</span>(tipoParto, </span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"normal"</span>, <span class="st">"cesareo"</span>)), </span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>                        <span class="at">sexo =</span> <span class="fu">factor</span>(sexo, </span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"masc"</span>, <span class="st">"fem"</span>)), </span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>                        <span class="at">utiNeo =</span> <span class="fu">factor</span>(utiNeo, </span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"sim"</span>, <span class="st">"não"</span>)),</span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a>                        <span class="at">infCong =</span> <span class="fu">factor</span>(infCong, </span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"sim"</span>, <span class="st">"não"</span>)))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>O conjunto de dados está, agora, estruturado de forma correta.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mater)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [1,368 × 25] (S3: tbl_df/tbl/data.frame)
 $ id       : num [1:1368] 1 2 3 4 5 6 7 8 9 10 ...
 $ idadeMae : num [1:1368] 42 29 19 31 34 29 30 34 17 32 ...
 $ altura   : num [1:1368] 1.65 1.66 1.72 1.55 1.6 1.5 1.54 1.63 1.68 1.5 ...
 $ peso     : num [1:1368] 69.9 78 81 74 60 60 75.5 61 57 70 ...
 $ ganhoPeso: num [1:1368] 3.9 16.5 5 43 15 11.4 10.5 9 15 11.4 ...
 $ anosEst  : num [1:1368] 3 11 9 5 7 8 4 6 10 1 ...
 $ cor      : Factor w/ 2 levels "branca","não branca": 2 1 2 2 2 2 1 1 1 2 ...
 $ eCivil   : Factor w/ 2 levels "solteira","não branca": 1 2 1 2 2 2 2 2 2 2 ...
 $ renda    : num [1:1368] 1.45 2.41 1.93 1.45 0.48 0.96 1.2 2.41 2.17 0.72 ...
 $ fumo     : Factor w/ 2 levels "sim","não": 2 2 2 2 2 1 1 2 2 2 ...
 $ quantFumo: num [1:1368] 0 0 0 0 0 10 20 0 0 0 ...
 $ prenatal : Factor w/ 2 levels "sim","não": 2 1 2 2 2 1 1 2 2 1 ...
 $ para     : num [1:1368] 5 0 0 1 2 1 2 1 0 4 ...
 $ droga    : Factor w/ 2 levels "sim","não": 2 2 2 2 2 2 2 2 2 2 ...
 $ ig       : num [1:1368] 29 33 33 33 33 33 33 33 34 34 ...
 $ tipoParto: Factor w/ 2 levels "normal","cesareo": 2 2 1 1 2 1 2 1 1 2 ...
 $ pesoPla  : num [1:1368] 224 1118 452 432 574 ...
 $ sexo     : Factor w/ 2 levels "masc","fem": 2 2 2 2 2 2 2 2 2 2 ...
 $ pesoRN   : num [1:1368] 1035 2300 1580 1840 2475 ...
 $ compRN   : num [1:1368] 35.5 45 39 41 47 41 44 44 47 48 ...
 $ pcRN     : num [1:1368] 28 32 28 32 32 29 32 32 30 27 ...
 $ apgar1   : num [1:1368] NA NA NA NA NA NA NA NA NA NA ...
 $ apgar5   : num [1:1368] NA NA NA NA NA NA NA NA NA NA ...
 $ utiNeo   : Factor w/ 2 levels "sim","não": 1 2 1 1 1 1 2 2 1 1 ...
 $ infCong  : Factor w/ 2 levels "sim","não": 2 2 2 2 1 2 2 2 2 2 ...</code></pre>
</div>
</div>
<p>O Índice de Massa Corporal (IMC) é um cálculo que relaciona o peso e a altura de uma pessoa para avaliar se ela está com o peso ideal, abaixo do peso, acima do peso ou obesa. É uma ferramenta simples e amplamente utilizada na área da saúde para triagem e acompanhamento do estado nutricional. Para obter esse índice, serão utilizadas as variáveis peso e altura da gestante no início da gravidez. Como visto na <a href="04-introducaoR.html#sec-funcoes" class="quarto-xref"><span>Seção 4.4</span></a>, o cálculo do IMC é dado pela razão entre o peso em kg e a altura em metros elevada ao quadrado. Para criar uma nova coluna com a variável <code>imc</code>, pode-se também usar o <code>mutate()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>mater <span class="ot">&lt;-</span> <span class="fu">mutate</span>(mater,</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">imc =</span> peso<span class="sc">/</span>altura<span class="sc">^</span><span class="dv">2</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="filtrando-linhas" class="level3" data-number="5.6.4">
<h3 data-number="5.6.4" class="anchored" data-anchor-id="filtrando-linhas"><span class="header-section-number">5.6.4</span> Filtrando linhas</h3>
<p>A função <code>filter()</code> é usada para criar um subconjunto de dados que obedeçam determinadas condições lógicas: &amp; (e), | (ou) e ! (não). Por exemplo:</p>
<ul>
<li><strong>y &amp; !x</strong> <span class="math inline">\(\to\)</span> seleciona <em>y</em> e não <em>x</em></li>
<li><strong>x &amp; !y</strong> <span class="math inline">\(\to\)</span> seleciona <em>x</em> e não <em>y</em></li>
<li><strong>x | !x</strong> <span class="math inline">\(\to\)</span> seleciona <em>x</em> ou <em>y</em></li>
<li><strong>x &amp; y</strong> <span class="math inline">\(\to\)</span> seleciona <em>x</em> e <em>y</em></li>
</ul>
<p>Um recém-nascido é dito a termo quando a duração da gestação é igual a 37 a 42 semanas incompletas. Para extrair do banco de dados <code>mater</code> os recém-nascidos a termo (<code>dadosRNT</code>), pode-se usar a função <code>filter()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>dadosRNT <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">filter</span> (mater, ig<span class="sc">&gt;=</span><span class="dv">37</span> <span class="sc">&amp;</span> ig<span class="sc">&lt;</span><span class="dv">42</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Observe que, agora, o conjunto de dados <code>dadosRNT</code> tem 1085 linhas, número de recém-nascidos a termo do banco de dados original <code>mater</code> (1368). Logo, os recém nascidos a termo correspondem a 79.3% dos nascimentos, nesta maternidade.</p>
<p><strong>Outro exemplo</strong></p>
<p>Para selecionar apenas os meninos, nascidos a termo (<code>dadosRNT</code>), codificados como <code>"masc"</code>, procede-se da seguinte maneira:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>dadosRNT_masc <span class="ot">&lt;-</span> <span class="fu">filter</span> (dadosRNT, sexo <span class="sc">==</span> <span class="st">'masc'</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Alerta
</div>
</div>
<div class="callout-body-container callout-body">
<p>Não esquecer que o sinal de igualdade, no R, é representado por um == (duplo igual)</p>
</div>
</div>
</section>
<section id="sumarizando-uma-coluna" class="level3" data-number="5.6.5">
<h3 data-number="5.6.5" class="anchored" data-anchor-id="sumarizando-uma-coluna"><span class="header-section-number">5.6.5</span> Sumarizando uma coluna</h3>
<p>Para resumir uma coluna, utilizando uma métrica de interesse, como média, mediana, desvio padrão, etc. (<a href="06-medidasResumidoras.html" class="quarto-xref"><span>Capítulo 6</span></a>), pode-se usar a função <code>summarize()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>resumo <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">summarize</span>(dadosRNT,</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">n =</span> <span class="fu">length</span> (id),</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">media =</span> <span class="fu">mean</span>(pesoRN, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">desvpad =</span> <span class="fu">sd</span>(pesoRN, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>resumo</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
      n media desvpad
  &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;
1  1085 3216.    462.</code></pre>
</div>
</div>
<p>Muitas vezes, há necessidade de sumarizar uma coluna agrupada pelas categorias de uma segunda coluna. Por exemplo, peso dos recém-nascidos a termo por sexo. Para isso, além do <code>summarize()</code>, utilizamos também a função <code>group_by()</code>.<br>
Para facilitar o trabalho, será usado o operador pipe que pode ser acionado digitando <code>%&gt;%</code> ou usando o atalho <code>ctrl + shift + M</code><a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>, como observado na <a href="#sec-printidyverse" class="quarto-xref"><span>Seção 5.4.2</span></a>. Em vez de passar o argumento para a função separadamente, é possível escrever o valor ou objeto e, em seguida, usar o <code>pipe</code> para convertê-lo como o argumento da função na mesma linha. Funciona como se o <code>pipe</code> jogasse o objeto dentro da função seguinte.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>resumo <span class="ot">&lt;-</span> dadosRNT <span class="sc">%&gt;%</span> </span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">group_by</span>(sexo) <span class="sc">%&gt;%</span> </span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">summarize</span>(</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">n =</span> <span class="fu">length</span> (id),</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">media =</span> <span class="fu">mean</span>(pesoRN, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">desvpad =</span> <span class="fu">sd</span>(pesoRN, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>resumo</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  sexo      n media desvpad
  &lt;fct&gt; &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;
1 masc    592 3274.    458.
2 fem     493 3147.    458.</code></pre>
</div>
</div>
</section>
<section id="selecionando-linhas-específicas" class="level3" data-number="5.6.6">
<h3 data-number="5.6.6" class="anchored" data-anchor-id="selecionando-linhas-específicas"><span class="header-section-number">5.6.6</span> Selecionando linhas específicas</h3>
<p>A função <code>slice()</code> do pacote <code>dplyr</code> é usada para selecionar linhas específicas de um dataframe (ou <em>tibble</em>) com base em suas posições. Ela é bastante útil quando se quer extrair subconjuntos de dados sem usar condições lógicas, mas sim índices de linha.</p>
<p>Diferente de <code>filter()</code>, que seleciona linhas baseado em condições, <code>slice()</code> usa números de linhas. Por exemplo, para visualizar as cinco primeiras linhas do conjunto de dados <code>dadosRNT</code>, usa-se:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">slice</span>(dadosRNT, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 26
     id idadeMae altura  peso ganhoPeso anosEst cor        eCivil    renda fumo 
  &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;fct&gt;      &lt;fct&gt;     &lt;dbl&gt; &lt;fct&gt;
1    20       28   1.5   48.5      11         6 não branca não bran…  3.13 não  
2    21       31   1.55  65        24         5 branca     não bran…  0.72 não  
3    22       27   1.6   60        15         8 não branca não bran…  2.41 sim  
4    23       28   1.58  47         9         8 branca     não bran…  1.69 não  
5    24       18   1.76  65.5       6.5       7 branca     solteira   1.93 sim  
# ℹ 16 more variables: quantFumo &lt;dbl&gt;, prenatal &lt;fct&gt;, para &lt;dbl&gt;,
#   droga &lt;fct&gt;, ig &lt;dbl&gt;, tipoParto &lt;fct&gt;, pesoPla &lt;dbl&gt;, sexo &lt;fct&gt;,
#   pesoRN &lt;dbl&gt;, compRN &lt;dbl&gt;, pcRN &lt;dbl&gt;, apgar1 &lt;dbl&gt;, apgar5 &lt;dbl&gt;,
#   utiNeo &lt;fct&gt;, infCong &lt;fct&gt;, imc &lt;dbl&gt;</code></pre>
</div>
</div>
<p>A função <code>slice()</code> é compatível com agrupamentos, por exemplo, para selecionar os cinco primeiros casos do tibble <code>dadosRNT</code> por <code>sexo</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>dadosRNT <span class="sc">%&gt;%</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">group_by</span>(sexo) <span class="sc">%&gt;%</span> </span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 26
# Groups:   sexo [2]
      id idadeMae altura  peso ganhoPeso anosEst cor        eCivil   renda fumo 
   &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;fct&gt;      &lt;fct&gt;    &lt;dbl&gt; &lt;fct&gt;
 1    20       28   1.5   48.5      11         6 não branca não bra…  3.13 não  
 2    21       31   1.55  65        24         5 branca     não bra…  0.72 não  
 3    22       27   1.6   60        15         8 não branca não bra…  2.41 sim  
 4    23       28   1.58  47         9         8 branca     não bra…  1.69 não  
 5    24       18   1.76  65.5       6.5       7 branca     solteira  1.93 sim  
 6   751       17   1.65  60        11.4       7 não branca solteira  1.92 não  
 7   752       30   1.6   54        12         5 branca     não bra…  1.92 não  
 8   753       27   1.53  43.5      20.5      11 branca     não bra…  1.93 não  
 9   755       28   1.4   60        11.4       8 não branca não bra…  2.17 não  
10   756       17   1.55  78        20        10 branca     solteira  4.82 sim  
# ℹ 16 more variables: quantFumo &lt;dbl&gt;, prenatal &lt;fct&gt;, para &lt;dbl&gt;,
#   droga &lt;fct&gt;, ig &lt;dbl&gt;, tipoParto &lt;fct&gt;, pesoPla &lt;dbl&gt;, sexo &lt;fct&gt;,
#   pesoRN &lt;dbl&gt;, compRN &lt;dbl&gt;, pcRN &lt;dbl&gt;, apgar1 &lt;dbl&gt;, apgar5 &lt;dbl&gt;,
#   utiNeo &lt;fct&gt;, infCong &lt;fct&gt;, imc &lt;dbl&gt;</code></pre>
</div>
</div>
<p>O <code>tidyverse</code> introduziu funções auxiliares como:</p>
<ul>
<li><code>slice_head()</code>: que seleciona as primeiras <code>n</code> linhas. A saída dessa função é a mesma anterior, se for solicitado n = 5:</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 26
     id idadeMae altura  peso ganhoPeso anosEst cor        eCivil    renda fumo 
  &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;fct&gt;      &lt;fct&gt;     &lt;dbl&gt; &lt;fct&gt;
1    20       28   1.5   48.5      11         6 não branca não bran…  3.13 não  
2    21       31   1.55  65        24         5 branca     não bran…  0.72 não  
3    22       27   1.6   60        15         8 não branca não bran…  2.41 sim  
4    23       28   1.58  47         9         8 branca     não bran…  1.69 não  
5    24       18   1.76  65.5       6.5       7 branca     solteira   1.93 sim  
# ℹ 16 more variables: quantFumo &lt;dbl&gt;, prenatal &lt;fct&gt;, para &lt;dbl&gt;,
#   droga &lt;fct&gt;, ig &lt;dbl&gt;, tipoParto &lt;fct&gt;, pesoPla &lt;dbl&gt;, sexo &lt;fct&gt;,
#   pesoRN &lt;dbl&gt;, compRN &lt;dbl&gt;, pcRN &lt;dbl&gt;, apgar1 &lt;dbl&gt;, apgar5 &lt;dbl&gt;,
#   utiNeo &lt;fct&gt;, infCong &lt;fct&gt;, imc &lt;dbl&gt;</code></pre>
</div>
</div>
<ul>
<li><code>slice_tall()</code>: que seleciona as últimas <code>n</code> linhas.<br>
</li>
<li><code>slice_sample()</code>: seleciona linhas aleatórias. Uma amostra de n = 200 será extraída do <code>tibble</code> <code>dadosRNT</code>, como exemplo:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>dadosRNT200 <span class="ot">&lt;-</span> dadosRNT <span class="sc">%&gt;%</span> <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">200</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><code>slice_min()</code>: selecioan as linhas com os menores valores em uma coluna específica. Não ordena todo o dataframe, mas sim identifica e extrai as linhas que têm os menores valores na coluna indicada com <code>order_by</code>. Por exemplo, se o objetivo é extrarir do tibble dadosRNT so cinco menores pesos ao nascer por sexo:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>dadosRNT <span class="sc">%&gt;%</span> </span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(pesoRN, sexo) <span class="sc">%&gt;%</span> </span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_min</span>(<span class="at">order_by =</span> pesoRN, </span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">n =</span> <span class="dv">5</span>, </span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">with_ties =</span> <span class="cn">TRUE</span>, </span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> sexo)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 2
   pesoRN sexo 
    &lt;dbl&gt; &lt;fct&gt;
 1   1425 masc 
 2   1440 masc 
 3   1795 masc 
 4   1810 masc 
 5   1980 masc 
 6   1715 fem  
 7   1785 fem  
 8   1895 fem  
 9   2090 fem  
10   2095 fem  </code></pre>
</div>
</div>
<ul>
<li><code>slice_max()</code>: funcion a da mesma que o slice_min(), apenas para os maiores valores.</li>
</ul>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercício
</div>
</div>
<div class="callout-body-container callout-body">
<p>Verificar a média e o desvio padrão dos pesos dos recém-nascidos a termo de mães fumantes e não fumantes, por sexo.</p>
</div>
</div>
</section>
<section id="ordenando-uma-coluna" class="level3" data-number="5.6.7">
<h3 data-number="5.6.7" class="anchored" data-anchor-id="ordenando-uma-coluna"><span class="header-section-number">5.6.7</span> Ordenando uma coluna</h3>
<p>Para ordenar os dados de uma coluna, pode-se usar a função <code>arrange()</code> do <code>dplyr</code>. O primeiro argumento é o conjunto de base. Os demais argumentos são as colunas a serem ordenadas.<br>
Por padrão, a função ´ coloca os dados em ordem crescente, mas é possível alterar e organizar em ordem decrescente usando a função <code>desc()</code>, que recebe o nome da coluna como argumento e ordena os valores em ordem decrescente.</p>
<p>Por exemplo, a renda familiar das parturientes será ordenada de forma ascendente. Em primeiro lugar, apenas como exercício, a renda familiar em salários mínimos será convertida em reais, tomando como base o valor de 2025 de 1518 reais. Após, a variável <code>renda</code> será colocada em ordem crescente com a função <code>arrange()</code>. A seguir, usando as funções <code>slice_head()</code> e <code>slice_tail()</code>, se verificará as 5 menores e as 5 maiores rendas que serão atribuídos a dois objetos (<code>menores</code> e <code>maiores</code>). Estes vão ser exibidos juntos, usando a função <code>bind_rows()</code>, também do <code>dplyr</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cinco menores salários em ordem crescente</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>menores <span class="ot">&lt;-</span> mater <span class="sc">%&gt;%</span> <span class="fu">select</span>(renda) <span class="sc">%&gt;%</span> </span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">renda =</span> renda <span class="sc">*</span><span class="fl">1518.00</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(renda) <span class="sc">%&gt;%</span> </span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">5</span>)</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>maiores <span class="ot">&lt;-</span> mater <span class="sc">%&gt;%</span> <span class="fu">select</span>(renda) <span class="sc">%&gt;%</span> </span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">renda =</span> renda <span class="sc">*</span><span class="fl">1518.00</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(renda) <span class="sc">%&gt;%</span> </span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice_tail</span>(<span class="at">n=</span><span class="dv">5</span>)</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Exibição</span></span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_rows</span>(menores, maiores)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 1
    renda
    &lt;dbl&gt;
 1   288.
 2   364.
 3   622.
 4   653.
 5   729.
 6 14634.
 7 14634.
 8 14634.
 9 16227.
10 16455.</code></pre>
</div>
</div>
</section>
<section id="função-count" class="level3" data-number="5.6.8">
<h3 data-number="5.6.8" class="anchored" data-anchor-id="função-count"><span class="header-section-number">5.6.8</span> Função <code>count()</code></h3>
<p>Permite contar rapidamente os valores únicos de uma ou mais variáveis. Esta função tem os seguintes argumentos.</p>
<ul>
<li><strong>x</strong> <span class="math inline">\(\to\)</span> dataframe</li>
<li><strong>wt</strong> <span class="math inline">\(\to\)</span> pode ser NULL (padrão) ou uma variável</li>
<li><strong>sort</strong> <span class="math inline">\(\to\)</span> padrão = FALSE; se TRUE, mostrará os maiores grupos no topo</li>
<li><strong>name</strong> <span class="math inline">\(\to\)</span> O nome da nova coluna na saída; padrão = NULL</li>
</ul>
<p>Quando o argumento <code>name</code> é omitido, a função retorna <em>n</em> como nome padrão.</p>
<p>Usando o dataframe <code>mater</code>, a função <code>count()</code> irá contar o número de parturientes fumantes, variável dicotômica <code>fumo</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(mater, fumo)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  fumo      n
  &lt;fct&gt; &lt;int&gt;
1 sim     301
2 não    1067</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercício
</div>
</div>
<div class="callout-body-container callout-body">
<p>Calcule o percentual de partos cesáreos no tibble mater.</p>
</div>
</div>
</section>
</section>
<section id="pacote-forcats" class="level2" data-number="5.7">
<h2 data-number="5.7" class="anchored" data-anchor-id="pacote-forcats"><span class="header-section-number">5.7</span> Pacote forcats()</h2>
<p>O pacote <code>forcats()</code> é uma das maravilhas do <code>tidyverse</code> voltada exclusivamente para o tratamento de variáveis categóricas no R — ou seja, os fatores. O nome vem de “<em>for categorical variables</em>”, e ele foi criado para resolver os desafios que surgem ao lidar com fatores, especialmente em visualizações e modelagens <span class="citation" data-cites="damiani2022forcats">(<a href="referencias.html#ref-damiani2022forcats" role="doc-biblioref">10</a>)</span>.</p>
<p>A finalidade do pacote <code>forcats()</code>:</p>
<p>Oferece funções intuitivas e poderosas para:</p>
<ul>
<li><p>Reordenar os níveis de um fator;<br>
</p></li>
<li><p>Modificar, combinar e recodificar níveis;<br>
</p></li>
<li><p>Lidar com níveis raros ou ausentes;<br>
</p></li>
<li><p>Preparar fatores para gráficos com ggplot2 (<a href="08-graficos.html#sec-ggplot2" class="quarto-xref"><span>Seção 8.3</span></a>)<br>
As principais funções doforcats() são:</p></li>
<li><p><code>fct_reorder()</code> - Reordena os níveis com base em outra variável (ex: média);<br>
</p></li>
<li><p><code>fct_infrequent()</code> - Reordena os níveis pela frequência (mais comum primeiro);<br>
</p></li>
<li><p><code>fct_rev()</code> - Inverte a ordem dos níveis;<br>
</p></li>
<li><p><code>fct_lump()</code> - Agrupa níveis menos frequentes em “outros”:<br>
</p></li>
<li><p><code>fct_recode()</code> - Renomeia níveis manualmente;<br>
</p></li>
<li><p><code>fct_drop()</code> - Remove níveis não utilizados;<br>
</p></li>
<li><p><code>fct_expand()</code> - Adiciona novos níveis.</p></li>
</ul>
<p>Como exemplo, será modificada a ordem de como a variável sexo será apresentada. Para ver a ordem dos níveis, pode-se usar:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(mater<span class="sc">$</span>sexo)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "masc" "fem" </code></pre>
</div>
</div>
<p>Ou seja, o sexo masculino está colocado antes do feminino. Como é uma variável dicotômica, basta inverter a ordem, usando a função <code>fct_rev()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>mater<span class="sc">$</span>sexo <span class="ot">&lt;-</span> <span class="fu">fct_rev</span>(mater<span class="sc">$</span>sexo)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(mater<span class="sc">$</span>sexo)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "fem"  "masc"</code></pre>
</div>
</div>
</section>
<section id="manipulação-de-datas" class="level2" data-number="5.8">
<h2 data-number="5.8" class="anchored" data-anchor-id="manipulação-de-datas"><span class="header-section-number">5.8</span> Manipulação de datas</h2>
<p>Originalmente, todos os que trabalham com o R queixavam-se de como era frustrante trabalhar com datas. Era um processo que causava grande perda de tempo nas análises. O pacote <code>lubridate</code> <span class="citation" data-cites="grolemund2011dates">(<a href="referencias.html#ref-grolemund2011dates" role="doc-biblioref">11</a>)</span> foi criado para simplificar ao máximo a leitura de datas e extração de informações das mesmas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Quando o <code>lubridate</code> é carregado aparece uma mensagem, avisando que alguns nomes de funções também estão contidas no pacote base do R.<br>
Para evitar confusões e verificar que as funções corretas estão sendo usadas, usa-se o duplo dois pontos (<code>::</code>) antes do nome da função, precedido do nome do pacote, por exemplo: <code>lubridate::date()</code>.</p>
<p>Para obter a data atual ou a data-hora, você pode usar as funções <code>today()</code> ou <code>now()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">today</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2025-10-20"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">now</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2025-10-20 21:34:36 -03"</code></pre>
</div>
</div>
<section id="convertendo-strings-ou-caractere-para-data" class="level3" data-number="5.8.1">
<h3 data-number="5.8.1" class="anchored" data-anchor-id="convertendo-strings-ou-caractere-para-data"><span class="header-section-number">5.8.1</span> Convertendo <em>strings</em> ou caractere para data</h3>
<p>Para converter <em>string</em> ou caracteres em datas, basta executar funções específicas adequadas aos dados. Elas determinam automaticamente o formato quando você especifica a ordem do componente. Para usá-los, identifique a ordem em que o ano, o mês e o dia aparecem em suas datas e, em seguida, organize “y”, “m” e “d” na mesma ordem. Isso lhe dá o nome da função do <code>lubridate</code> que analisará a data. Por exemplo, suponhamos a data de 25/12/2022:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>natal <span class="ot">&lt;-</span> <span class="st">"25/12/2022"</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>natal</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "25/12/2022"</code></pre>
</div>
</div>
<p>Aparentemente, o <em>R</em> aceitou a informação como uma data. Entretanto, se for verificada a classe do objeto, tem-se:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(natal)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>Estando como caractere, esta data não poderá ser usada em operações com datas, pois necessitaria estar como uma classe <code>date</code>. Para converte-la em data, usa-se a função <code>dmy()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>natal <span class="ot">&lt;-</span> <span class="fu">dmy</span>(natal)</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>natal</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2022-12-25"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(natal)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date"</code></pre>
</div>
</div>
<p>Dessa forma, a data, agora está sendo reconhecida pelo <em>R</em> como <code>date</code>. É sempre importante verificar a classe da data.</p>
<p>Às vezes, as datas escritas estão com o mês abreviado, como 25/dez/2022. O procedimento é o mesmo</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>minha.data <span class="ot">&lt;-</span> <span class="st">"25/dez/2022"</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span> (minha.data)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>minha.data <span class="ot">&lt;-</span> <span class="fu">dmy</span>(minha.data)</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span> (minha.data)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date"</code></pre>
</div>
</div>
<p>Se além da data, houver necessidade de especificar o horário, basta usar <code>dmy_h()</code>, <code>dmy_hm()</code> e <code>dmy_hms()</code>. No padrão americano, pode ser usado <code>ymd()</code>.</p>
<p>O <code>lubridate</code> traz diversas funções para extrair os componentes de um objeto da classe date.</p>
<ul>
<li><code>second()</code> <span class="math inline">\(\to\)</span> extrai os segundos.</li>
<li><code>minute()</code> <span class="math inline">\(\to\)</span> extrai os minutos.</li>
<li><code>hour()</code> <span class="math inline">\(\to\)</span> extrai a hora.</li>
<li><code>wday()</code> <span class="math inline">\(\to\)</span> extrai o dia da semana.</li>
<li><code>mday()</code> <span class="math inline">\(\to\)</span> extrai o dia do mês.</li>
<li><code>month()</code> <span class="math inline">\(\to\)</span> extrai o mês.</li>
<li><code>year()</code> <span class="math inline">\(\to\)</span> extrai o ano.</li>
</ul>
<p>Por exemplo, usando a data de nascimento (<code>dn</code>) de um dos netos do autor:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>dn <span class="ot">&lt;-</span> <span class="fu">dmy</span>(<span class="st">"06/06/2018"</span>)</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="fu">year</span>(dn)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2018</code></pre>
</div>
</div>
<p>Para acrescentar um horário ao objeto data de nascimento (<code>dn</code>)^[UTC = Coordinated Universal Time}:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hour</span>(dn) <span class="ot">&lt;-</span> <span class="dv">18</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>dn</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-06-06 18:00:00 UTC"</code></pre>
</div>
</div>
</section>
<section id="juntando-componentes-de-datas" class="level3" data-number="5.8.2">
<h3 data-number="5.8.2" class="anchored" data-anchor-id="juntando-componentes-de-datas"><span class="header-section-number">5.8.2</span> Juntando componentes de datas</h3>
<p>Para juntar componentes de datas e horas, pode-se utilizar as funções <code>make_date()</code> e <code>make_datetime()</code>. Em muitos arquivos, os componentes da data estão em colunas diferentes e há necessidade de juntá-los em uma única coluna para compor a data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>felix <span class="ot">&lt;-</span> <span class="fu">make_date</span>(<span class="at">year =</span> <span class="dv">2018</span>, <span class="at">month =</span> <span class="dv">06</span>, <span class="at">day =</span> <span class="dv">06</span>)</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>felix</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-06-06"</code></pre>
</div>
</div>
<p>Para juntar ano, mês, dia, hora e minuto:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>minha.data <span class="ot">&lt;-</span> <span class="fu">make_datetime</span>(<span class="at">year =</span> <span class="dv">2018</span>, </span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">month =</span> <span class="dv">06</span>, </span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">day =</span> <span class="dv">06</span>, </span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>                            <span class="at">hour =</span> <span class="dv">18</span> ,</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>                            <span class="at">min =</span> <span class="dv">00</span>, </span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>                            <span class="at">sec =</span> <span class="dv">15</span>)</span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>minha.data</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2018-06-06 18:00:15 UTC"</code></pre>
</div>
</div>
</section>
<section id="extraindo-componentes-de-datas" class="level3" data-number="5.8.3">
<h3 data-number="5.8.3" class="anchored" data-anchor-id="extraindo-componentes-de-datas"><span class="header-section-number">5.8.3</span> Extraindo componentes de datas</h3>
<p>Quando temos objetos do tipo POSIXt<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> podemos extrair componentes ou elementos deles. Para isso são usadas algumas funções específicas do pacote <code>lubridate</code> como mostrado a seguir.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">now</span>()</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="fu">year</span>(data)            <span class="co"># Extrai o ano</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2025</code></pre>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">month</span>(data)           <span class="co"># Extrai o mês</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">week</span>(data)            <span class="co"># Extrai a semana</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 42</code></pre>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">day</span>(data)             <span class="co"># Extrai o dia</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20</code></pre>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">minute</span>(data)          <span class="co"># Extrai o minuto</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 34</code></pre>
</div>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">second</span>(data)          <span class="co"># Extrai o segundo</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 36.8432</code></pre>
</div>
</div>
<p>Para verificar o número de dias tem em um determinado mês, usa-se a função <code>days_in_month()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a> data1 <span class="ot">&lt;-</span> <span class="fu">dmy</span>(<span class="st">"25/02/2000"</span>)</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">days_in_month</span>(data1)          </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Feb 
 29 </code></pre>
</div>
</div>
</section>
<section id="operações-com-datas" class="level3" data-number="5.8.4">
<h3 data-number="5.8.4" class="anchored" data-anchor-id="operações-com-datas"><span class="header-section-number">5.8.4</span> Operações com datas</h3>
<p>O pacote <code>lubridate</code> possui funções de duração e de período para manipular as datas. As funções de duração calculam o número de segundos em um determinado num determinado número de dias. As funções de duração não levam em consideração anos bissextos e horário de verão, enquanto as funções de período consideram esses fatores.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ddays</span> (<span class="dv">1</span>)           <span class="co"># Número de segundos em 1 dia</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "86400s (~1 days)"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dhours</span> (<span class="dv">1</span>)          <span class="co"># Número de segundos em 1 hora</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "3600s (~1 hours)"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dminutes</span> (<span class="dv">1</span>)        <span class="co"># Número de segundos em 1 minuto</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "60s (~1 minutes)"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">days</span> (<span class="dv">5</span>)            <span class="co"># Cria um período de 5 dias</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "5d 0H 0M 0S"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">weeks</span> (<span class="dv">5</span>)           <span class="co"># Cria um período de 5 semanas</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "35d 0H 0M 0S"</code></pre>
</div>
</div>
<p>Suponha-se que haja necessidade de saber em qual dia cairá após acrescentarmos 5 semanas à <code>data1</code> (25/02/2000), criada acima:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">+</span> <span class="fu">weeks</span> (<span class="dv">5</span>)           </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2000-03-31"</code></pre>
</div>
</div>
<p>Adicionando 1 ano à <code>data1</code> (25/02/2000) com uma função de duração, tem-se:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">+</span> <span class="fu">dyears</span> (<span class="dv">1</span>)           </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2001-02-24 06:00:00 UTC"</code></pre>
</div>
</div>
<p>Se for adicionado um ano à mesma data, mas agora com uma função de período, tem-se:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">+</span> <span class="fu">years</span> (<span class="dv">1</span>)           </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2001-02-25"</code></pre>
</div>
</div>
<p>Um intervalo de tempo pode ser obtido a partir de uma data inicial e uma data final. Suponha que uma gestante tenha como data da sua última menstruação 04/10/2022 e o bebê tenha nascido em 30/06/2023. Qual a idade gestacional em dias? A sintaxe para calcular um intervalo é dada pela subtração das duas datas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>data.inicial <span class="ot">&lt;-</span> <span class="fu">dmy</span>(<span class="st">"04/10/2022"</span>)</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>data.final <span class="ot">&lt;-</span> <span class="fu">dmy</span>(<span class="st">"30/06/2023"</span>)</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>idade_gesta <span class="ot">&lt;-</span> data.final <span class="sc">-</span> data.inicial</span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>idade_gesta</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time difference of 269 days</code></pre>
</div>
</div>
<p>Ou seja a gestação durou 269 dias, constituindo-se em um parto a termo, entre 37 (259 dias) e 42 semanas (294 dias).</p>
<p>Para mais informações sobre o <code>lubridate</code>, consulte a ajuda do pacote ou o capítulo 16 do livro <em>R for Data Science</em>, Hadley Wickman e Garrett Grolemund, 2017 [https://r4ds.had.co.nz/index.html] .</p>


<!-- -->

<div id="refs" class="references csl-bib-body" role="list" style="display: none">
<div id="ref-zuur2009beginner" class="csl-entry" role="listitem">
<div class="csl-left-margin">1. </div><div class="csl-right-inline">Zuur AF, Ieno EN, Meesters EH. Getting Data into R. Em: A Beginner’s Guide to R. Springer; 2009. p. 29–56. </div>
</div>
<div id="ref-ooms2022writexl" class="csl-entry" role="listitem">
<div class="csl-left-margin">2. </div><div class="csl-right-inline">Ooms J. writexl: Export Data Frames to Excel ’xlsx’ Format [Internet]. 2022. Disponível em: <a href="https://CRAN.R-project.org/package=writexl">https://CRAN.R-project.org/package=writexl</a></div>
</div>
<div id="ref-write2022csv" class="csl-entry" role="listitem">
<div class="csl-left-margin">3. </div><div class="csl-right-inline">Team RC. write.table: Data Output/CSV files [Internet]. DataCamp; 2022. Disponível em: <a href="https://www.rdocumentation.org/packages/utils/versions/3.6.2/topics/write.table">https://www.rdocumentation.org/packages/utils/versions/3.6.2/topics/write.table</a></div>
</div>
<div id="ref-wickham2019tidyverse" class="csl-entry" role="listitem">
<div class="csl-left-margin">4. </div><div class="csl-right-inline">Wickham H, Averick M, Bryan J, Chang W, et al. Welcome to the Tidyverse. Journal of Open Source Software. 2019;4(43):1686. </div>
</div>
<div id="ref-wickham2022tidyr" class="csl-entry" role="listitem">
<div class="csl-left-margin">5. </div><div class="csl-right-inline">Wickham H, Girlich M. tidyr: Tidy Messy Data [Internet]. 2022. Disponível em: <a href="https://CRAN.R-project.org/package=tidyr">https://CRAN.R-project.org/package=tidyr</a></div>
</div>
<div id="ref-wickham2014tidy" class="csl-entry" role="listitem">
<div class="csl-left-margin">6. </div><div class="csl-right-inline">Wickham H. Tidy Data. Journal of Statistical Software. 2014;59(10):11–23. </div>
</div>
<div id="ref-bache2022magritt" class="csl-entry" role="listitem">
<div class="csl-left-margin">7. </div><div class="csl-right-inline">Bache SM, Wickham H. magrittr: A Forward-Pipe Operator for R. 2022. </div>
</div>
<div id="ref-wickham2015dplyr" class="csl-entry" role="listitem">
<div class="csl-left-margin">8. </div><div class="csl-right-inline">Wickham H, François R, Henry L, Müller K, et al. dplyr: A grammar of data manipulation. R package version 04. 2015;3:156. </div>
</div>
<div id="ref-madi2010prevalence" class="csl-entry" role="listitem">
<div class="csl-left-margin">9. </div><div class="csl-right-inline">Madi JM, Souza R da S de, Araujo BF de, Oliveira Filho PF, et al. Prevalence of toxoplasmosis, HIV, syphilis and rubella in a population of puerperal women using Whatman 903<span></span> filter paper. The Brazilian Journal of Infectious Diseases. 2010;14(1):24–9. </div>
</div>
<div id="ref-damiani2022forcats" class="csl-entry" role="listitem">
<div class="csl-left-margin">10. </div><div class="csl-right-inline">Damiani A, Milz B, Lente C, Outros. O pacote forcats [Internet]. Ciência de Dados em R. R6 Consultoria; 2022. Disponível em: <a href="https://livro.curso-r.com/7-6-forcats.html#o-que-s%C3%A3o-fatores">https://livro.curso-r.com/7-6-forcats.html#o-que-s%C3%A3o-fatores</a></div>
</div>
<div id="ref-grolemund2011dates" class="csl-entry" role="listitem">
<div class="csl-left-margin">11. </div><div class="csl-right-inline">Grolemund G, Wickham H. Dates and Times Made Easy with lubridate. Journal of Statistical Software [Internet]. 2011;40(3):1–25. Disponível em: <a href="https://www.jstatsoft.org/v40/i03/">https://www.jstatsoft.org/v40/i03/</a></div>
</div>
</div>
</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>A mudança do nome do dataframe de <code>dadosNeonatos</code> para <code>neonatos</code> é desnecessária. Foi realizada apenas por questões didáticas.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Observe, na saída, que a variável <code>utiNeo</code> aparece palavras com acentuação (“não”). Às vezes, ao abrir o arquivo com a função <code>read.csv2()</code>, pode acontecer de esta palavra aparecer, por exemplo, como: “n3o”. Louco, não é? Se ocorrer isso, use, após o nome do arquivo e separado por vírgula, o argumento <code>fileEncoding = “latin1”</code>. Dessa forma, o erro será corrigido.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Da mesma maneira, como acontece com a função <code>read.csv2()</code>, a função equivalente do <code>readr</code> pode retornar erro na leitura de palavras com acento. Para corrigir isso, usa-se o argumento <code>locale (encoding = "latin1")</code><a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>O nome é uma referência ao famoso quadro do pintor belga René Magritte <a href="https://decorem.com.br/blogs/news/significado-da-obra-a-traicao-das-imagens-de-rene-magritte?srsltid=AfmBOoqG3gSMhNdnwgmQ3piepQPRSkJlXkNQjQv5mDq72QYRwub3vJKz"><em>La Trahison des images</em></a> <em>(Ceci n’est pas une pipe)</em>.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Além do <code>pipe</code>, indiretamente, embutido no <code>tidyverse</code>, existe o pipe nativo do R (<code>|&gt;</code>) que também pode ser usado com as mesmas funções do <code>%&gt;%</code>.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Hospital Escola da Universidade de Caxias do Sul, RS.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Para que o pipe (<code>%&gt;%</code>) seja ativado é necessário carregar o pacote <code>dplyr</code>; para o pipe nativo (<code>|&gt;</code>) não há necessidade.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>POSIXt é uma classe de objetos do R que representa datas e horas. POSIXt significa Portable Operating System Interface for Unix Time, que é um padrão para medir o tempo em segundos desde 1 de janeiro de 1970. Existem duas formas internas de implementar POSIXt: POSIXct e POSIXlt. POSIXct armazena os segundos desde a época UNIX e POSIXlt armazena uma lista de dia, mês, ano, hora, minuto, segundo, etc.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copiada");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copiada");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./04-introducaoR.html" class="pagination-link" aria-label="Introdução ao uso do R">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Introdução ao uso do R</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./06-medidasResumidoras.html" class="pagination-link" aria-label="Medidas Resumidoras">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Medidas Resumidoras</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Código fonte</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb120" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Manipulando dados no R</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a><span class="fu">## Dataframes no R {#sec-dataframes}</span></span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a>DataFrames são objetos de dados genéricos em formato tabular, onde os dados são organizados de maneira lógica em linha-e-coluna semelhante ao de uma planilha do Excel. O dataframe é uma estrutura bidimensional. Os DataFrames podem ser formados com objetos criados previamente, desde que tenham o mesmo comprimento @zuur2009beginner.</span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a>Uma das formas de criar um DataFrame no R é a partir de um conjunto de vetores como, por exemplo, este relacionados a 15 nascimentos em uma determinada maternidade:</span>
<span id="cb120-8"><a href="#cb120-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-11"><a href="#cb120-11" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-12"><a href="#cb120-12" aria-hidden="true" tabindex="-1"></a>id <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>)</span>
<span id="cb120-13"><a href="#cb120-13" aria-hidden="true" tabindex="-1"></a>pesoRN <span class="ot">&lt;-</span> <span class="fu">c</span> (<span class="dv">3340</span>,<span class="dv">3345</span>,<span class="dv">3750</span>,<span class="dv">3650</span>,<span class="dv">3220</span>,<span class="dv">4070</span>,<span class="dv">3380</span>,<span class="dv">3970</span>,<span class="dv">3060</span>,<span class="dv">3180</span>,  </span>
<span id="cb120-14"><a href="#cb120-14" aria-hidden="true" tabindex="-1"></a>             <span class="dv">2865</span>,<span class="dv">2815</span>,<span class="dv">3245</span>,<span class="dv">2051</span>,<span class="dv">2630</span>)  </span>
<span id="cb120-15"><a href="#cb120-15" aria-hidden="true" tabindex="-1"></a>compRN <span class="ot">&lt;-</span> <span class="fu">c</span> (<span class="dv">50</span>,<span class="dv">48</span>,<span class="dv">52</span>,<span class="dv">48</span>,<span class="dv">50</span>,<span class="dv">51</span>,<span class="dv">50</span>,<span class="dv">51</span>,<span class="dv">47</span>,<span class="dv">47</span>,<span class="dv">47</span>,<span class="dv">49</span>,<span class="dv">51</span>,<span class="dv">50</span>,<span class="dv">44</span>)</span>
<span id="cb120-16"><a href="#cb120-16" aria-hidden="true" tabindex="-1"></a>sexo <span class="ot">&lt;-</span> <span class="fu">c</span> (<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>)</span>
<span id="cb120-17"><a href="#cb120-17" aria-hidden="true" tabindex="-1"></a>tipoParto <span class="ot">&lt;-</span> <span class="fu">c</span> (<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>)</span>
<span id="cb120-18"><a href="#cb120-18" aria-hidden="true" tabindex="-1"></a>idadeMae <span class="ot">&lt;-</span> <span class="fu">c</span> (<span class="dv">40</span>,<span class="dv">19</span>,<span class="dv">26</span>,<span class="dv">19</span>,<span class="dv">32</span>,<span class="dv">24</span>,<span class="dv">27</span>,<span class="dv">20</span>,<span class="dv">21</span>,<span class="dv">19</span>,<span class="dv">23</span>,<span class="dv">36</span>,<span class="dv">21</span>,<span class="dv">23</span>,<span class="dv">23</span>) </span>
<span id="cb120-19"><a href="#cb120-19" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-20"><a href="#cb120-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-21"><a href="#cb120-21" aria-hidden="true" tabindex="-1"></a>Este grupo de vetores (variáveis) isolados fica difícil de manusear. Portanto, seria útil reuni-los em um só objeto. Pode-se fazer isso, usando a função <span class="in">`data.frame()`</span>, do R base. Este DataFrame será atribuído a um novo objeto de nome <span class="in">`dadosNeonatos`</span>.</span>
<span id="cb120-22"><a href="#cb120-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-25"><a href="#cb120-25" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-26"><a href="#cb120-26" aria-hidden="true" tabindex="-1"></a>dadosNeonatos <span class="ot">&lt;-</span> <span class="fu">data.frame</span> (id,</span>
<span id="cb120-27"><a href="#cb120-27" aria-hidden="true" tabindex="-1"></a>                             pesoRN, </span>
<span id="cb120-28"><a href="#cb120-28" aria-hidden="true" tabindex="-1"></a>                             compRN, </span>
<span id="cb120-29"><a href="#cb120-29" aria-hidden="true" tabindex="-1"></a>                             sexo, </span>
<span id="cb120-30"><a href="#cb120-30" aria-hidden="true" tabindex="-1"></a>                             tipoParto, </span>
<span id="cb120-31"><a href="#cb120-31" aria-hidden="true" tabindex="-1"></a>                             idadeMae)</span>
<span id="cb120-32"><a href="#cb120-32" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-33"><a href="#cb120-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-34"><a href="#cb120-34" aria-hidden="true" tabindex="-1"></a>Verificando a classe deste novo objeto, tem-se:</span>
<span id="cb120-35"><a href="#cb120-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-38"><a href="#cb120-38" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-39"><a href="#cb120-39" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span> (dadosNeonatos)</span>
<span id="cb120-40"><a href="#cb120-40" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-41"><a href="#cb120-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-42"><a href="#cb120-42" aria-hidden="true" tabindex="-1"></a>Para observar a modificação realizada, pode-se usar a função <span class="in">`str()`</span> do R base, digitando no *R Script*:</span>
<span id="cb120-43"><a href="#cb120-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-46"><a href="#cb120-46" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-47"><a href="#cb120-47" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dadosNeonatos)</span>
<span id="cb120-48"><a href="#cb120-48" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-49"><a href="#cb120-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-50"><a href="#cb120-50" aria-hidden="true" tabindex="-1"></a>Na saida da função, verifica-se que o dataframe contém 15 linhas e 6 colunas.</span>
<span id="cb120-51"><a href="#cb120-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-52"><a href="#cb120-52" aria-hidden="true" tabindex="-1"></a><span class="fu">### Acrescentando variáveis a um dataframe</span></span>
<span id="cb120-53"><a href="#cb120-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-54"><a href="#cb120-54" aria-hidden="true" tabindex="-1"></a>Será adicionada ao dataframe uma nova variável chamada <span class="in">`utiNeo`</span>, que indica se cada recém-nascido foi encaminhado ou não para a UTI neonatal logo após o nascimento. Essa variável será construída a partir de um vetor contendo a situação de cada um dos 15 recém-nascidos, e será incorporada como uma nova coluna no dataframe. A sintaxe utilizada para essa operação segue o padrão , resultando em: <span class="in">`nome-do-dataframe$nome-da-variável`</span>.</span>
<span id="cb120-55"><a href="#cb120-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-58"><a href="#cb120-58" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-59"><a href="#cb120-59" aria-hidden="true" tabindex="-1"></a>dadosNeonatos<span class="sc">$</span>utiNeo <span class="ot">&lt;-</span> <span class="fu">c</span> (<span class="st">"não"</span>,<span class="st">"não"</span>,<span class="st">"não"</span>,<span class="st">"não"</span>,<span class="st">"sim"</span>,<span class="st">"não"</span>,<span class="st">"sim"</span>,<span class="st">"não"</span>,<span class="st">"não"</span>,<span class="st">"não"</span>,<span class="st">"não"</span>,<span class="st">"sim"</span>,<span class="st">"não"</span>,<span class="st">"não"</span>,<span class="st">"não"</span>)</span>
<span id="cb120-60"><a href="#cb120-60" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-61"><a href="#cb120-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-62"><a href="#cb120-62" aria-hidden="true" tabindex="-1"></a>Com isso, ´utiNeo<span class="in">`passa a fazer parte do conjunto de dados, permitindo análises específicas sobre a necessidade de cuidados intensivos neonatais. A função`</span>str()<span class="sc">\`</span>, pode ser usada, novamente, para observar a transformação:</span>
<span id="cb120-63"><a href="#cb120-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-66"><a href="#cb120-66" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-67"><a href="#cb120-67" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dadosNeonatos)</span>
<span id="cb120-68"><a href="#cb120-68" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-69"><a href="#cb120-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-70"><a href="#cb120-70" aria-hidden="true" tabindex="-1"></a><span class="fu">### Transformação de variáveis {#sec-transform}</span></span>
<span id="cb120-71"><a href="#cb120-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-72"><a href="#cb120-72" aria-hidden="true" tabindex="-1"></a>Observa-se que todas as variáveis estão como variáveis numéricas (<span class="in">`num`</span>), exceto a variável ´utiNeo<span class="in">`questá como caractere (`</span>chr<span class="in">`). Isto não está correto, pois as variáveis`</span>sexo<span class="in">`,`</span>tipoParto<span class="in">`são variáveis categóricas, bem como a  a variável`</span>utiNeo<span class="in">`, adicionada posteriormente. Elas necessitam ser transformadas para fatores, usando a função`</span>factor()<span class="sc">\`</span>. Os principais argumentos dessa função são:</span>
<span id="cb120-73"><a href="#cb120-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-74"><a href="#cb120-74" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**x** $\to$ vetor numérico</span>
<span id="cb120-75"><a href="#cb120-75" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**levels** $\to$ vetor opcional dos valores que *x* pode assumir</span>
<span id="cb120-76"><a href="#cb120-76" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**labels** $\to$ vetor de caracteres dos rótulos para os níveis, na mesma ordem</span>
<span id="cb120-77"><a href="#cb120-77" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**ordered** $\to$ vetor lógico (TRUE ou FALSE). Se TRUE, os níveis dos fatores são assumidos como ordenados</span>
<span id="cb120-78"><a href="#cb120-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-79"><a href="#cb120-79" aria-hidden="true" tabindex="-1"></a>No exemplo, as variáveis não têm uma ordem lógica, então, o argumento <span class="in">`ordered`</span> não é necessário.</span>
<span id="cb120-80"><a href="#cb120-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-83"><a href="#cb120-83" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-84"><a href="#cb120-84" aria-hidden="true" tabindex="-1"></a>dadosNeonatos<span class="sc">$</span>tipoParto <span class="ot">&lt;-</span> <span class="fu">factor</span>(dadosNeonatos<span class="sc">$</span>tipoParto, </span>
<span id="cb120-85"><a href="#cb120-85" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),</span>
<span id="cb120-86"><a href="#cb120-86" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"normal"</span>,<span class="st">"cesareo"</span>))</span>
<span id="cb120-87"><a href="#cb120-87" aria-hidden="true" tabindex="-1"></a>dadosNeonatos<span class="sc">$</span>sexo <span class="ot">&lt;-</span> <span class="fu">factor</span> (dadosNeonatos<span class="sc">$</span>sexo, </span>
<span id="cb120-88"><a href="#cb120-88" aria-hidden="true" tabindex="-1"></a>                               <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb120-89"><a href="#cb120-89" aria-hidden="true" tabindex="-1"></a>                               <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"M"</span>,<span class="st">"F"</span>)) </span>
<span id="cb120-90"><a href="#cb120-90" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-91"><a href="#cb120-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-92"><a href="#cb120-92" aria-hidden="true" tabindex="-1"></a>A variável <span class="in">`utiNeo`</span> já foi inserida como <span class="in">`string`</span> (texto) e pertence a classe <span class="in">`character`</span>, então, basta usar a <span class="in">`as.factor()`</span> sem necessidade de alterar os rótulos (<span class="in">`labels`</span>) nos níveis (<span class="in">`levels`</span>)</span>
<span id="cb120-93"><a href="#cb120-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-96"><a href="#cb120-96" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-97"><a href="#cb120-97" aria-hidden="true" tabindex="-1"></a>dadosNeonatos<span class="sc">$</span>utiNeo <span class="ot">&lt;-</span> <span class="fu">as.factor</span> (dadosNeonatos<span class="sc">$</span>utiNeo)</span>
<span id="cb120-98"><a href="#cb120-98" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-99"><a href="#cb120-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-100"><a href="#cb120-100" aria-hidden="true" tabindex="-1"></a>Após a transformação, executa-se, novamente, a função <span class="in">`str()`</span> para ver como ficou a estrutura do dataframe:</span>
<span id="cb120-101"><a href="#cb120-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-104"><a href="#cb120-104" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-105"><a href="#cb120-105" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dadosNeonatos)</span>
<span id="cb120-106"><a href="#cb120-106" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-107"><a href="#cb120-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-108"><a href="#cb120-108" aria-hidden="true" tabindex="-1"></a>Agora, as três varáveis passaram a ser fatores e as outras mantiveram-se numéricas.</span>
<span id="cb120-109"><a href="#cb120-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-110"><a href="#cb120-110" aria-hidden="true" tabindex="-1"></a><span class="fu">### Salvando um dataframe</span></span>
<span id="cb120-111"><a href="#cb120-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-112"><a href="#cb120-112" aria-hidden="true" tabindex="-1"></a>O dataframe, criado e modificado anteriormente, pode ser salvo para uso posterior no diretório de trabalho.</span>
<span id="cb120-113"><a href="#cb120-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-114"><a href="#cb120-114" aria-hidden="true" tabindex="-1"></a>A função <span class="in">`save()`</span> realiza esta ação, usando como argumentos o dataframe a ser salvo e o nome do arquivo (<span class="in">`file =`</span>) entre aspas. Por convenção, esta função salva com a extensão <span class="in">`.RData`</span> que deve ser digitada, pois o R não a adiciona automaticamente.</span>
<span id="cb120-115"><a href="#cb120-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-118"><a href="#cb120-118" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-119"><a href="#cb120-119" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb120-120"><a href="#cb120-120" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(dadosNeonatos, <span class="at">file =</span> <span class="st">"dadosNeonatos.RData"</span>)</span>
<span id="cb120-121"><a href="#cb120-121" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-122"><a href="#cb120-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-123"><a href="#cb120-123" aria-hidden="true" tabindex="-1"></a>Este comando colocará o arquivo no diretório de trabalho em uso. Portanto, se o objetivo é salvar em outro local, deve ser informado qual o novo diretório.</span>
<span id="cb120-124"><a href="#cb120-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-125"><a href="#cb120-125" aria-hidden="true" tabindex="-1"></a>Para carregar o objeto salvo anteriormente com o comando <span class="in">`save()`</span>, usa-se a função <span class="in">`load()`</span>. Se o arquivo a ser lido não estiver no diretório de trabalho da sessão, há necessidade de especificar o caminho até o arquivo:</span>
<span id="cb120-126"><a href="#cb120-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-129"><a href="#cb120-129" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-130"><a href="#cb120-130" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb120-131"><a href="#cb120-131" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"dadosNeonatos.RData"</span>)</span>
<span id="cb120-132"><a href="#cb120-132" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-133"><a href="#cb120-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-134"><a href="#cb120-134" aria-hidden="true" tabindex="-1"></a>É possível salvar em outro tipo de extensão como Excel (<span class="in">`.xlsx`</span>), Valores Separados por Vírgula (<span class="in">`.csv`</span>), etc. O procedimento é o mesmo, mudando a função. Para salvar em uma extensão <span class="in">`.xlsx`</span>,utiliza-se a função <span class="in">`write_xlsx ()`</span> do pacote <span class="in">`writexl`</span> <span class="co">[</span><span class="ot">@ooms2022writexl</span><span class="co">]</span>:</span>
<span id="cb120-135"><a href="#cb120-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-138"><a href="#cb120-138" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-139"><a href="#cb120-139" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb120-140"><a href="#cb120-140" aria-hidden="true" tabindex="-1"></a>writexl<span class="sc">::</span><span class="fu">write_xlsx</span>(dadosNeonatos, <span class="st">"dados/dadosNeonatos.xlsx"</span>)</span>
<span id="cb120-141"><a href="#cb120-141" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-142"><a href="#cb120-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-143"><a href="#cb120-143" aria-hidden="true" tabindex="-1"></a>Para salvar com a extensão <span class="in">`.csv`</span>, usar a função <span class="in">`write.csv()`</span> ou <span class="in">`write.csv2()`</span> que faz parte do pacote <span class="in">`utils`</span>, incluido no R base. A primeira função, usa <span class="in">`"."`</span> para a separação dos decimais e <span class="in">`","`</span> para separar as variáveis; a segunda função usa <span class="in">`","`</span> para os decimais e <span class="in">`";"`</span> para separar as variáveis, convenção do Excel para algumas localidades, como o Brasil <span class="co">[</span><span class="ot">@write2022csv</span><span class="co">]</span>. Portanto, uma maneira de salvar o arquivo é:</span>
<span id="cb120-144"><a href="#cb120-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-147"><a href="#cb120-147" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-148"><a href="#cb120-148" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb120-149"><a href="#cb120-149" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv2</span> (dadosNeonatos, <span class="st">"dados/dadosNeonatos.csv"</span>)</span>
<span id="cb120-150"><a href="#cb120-150" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-151"><a href="#cb120-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-152"><a href="#cb120-152" aria-hidden="true" tabindex="-1"></a><span class="fu">## Importando dados de outros *softwares*</span></span>
<span id="cb120-153"><a href="#cb120-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-154"><a href="#cb120-154" aria-hidden="true" tabindex="-1"></a>É possível inserir dados diretamente no *R Script*, como mostrado na @sec-dataframes. Entretanto, se o conjunto de dados for muito extenso, torna-se complicado. Desta forma, é melhor construir o dataframe em outro software, como o Excel, SPSS, etc. e, após, quando necessário, importar os dados para o R.</span>
<span id="cb120-155"><a href="#cb120-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-156"><a href="#cb120-156" aria-hidden="true" tabindex="-1"></a><span class="fu">### Importando dados de um arquivo CSV {#sec-csv}</span></span>
<span id="cb120-157"><a href="#cb120-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-158"><a href="#cb120-158" aria-hidden="true" tabindex="-1"></a>O formato CSV significa *Comma Separated Values*, ou seja, é um arquivo de valores separados por vírgula. Esse formato de armazenamento é simples e agrupa informações de arquivos de texto em planilhas. É possível gerar um arquivo `.csv`, a partir de uma planilha do *Excel*, usando o menu <span class="in">`salvar como`</span> e escolher <span class="in">`CSV`</span>.</span>
<span id="cb120-159"><a href="#cb120-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-160"><a href="#cb120-160" aria-hidden="true" tabindex="-1"></a>As funções <span class="in">`read.csv()`</span> e <span class="in">`read.csv2()`</span>, incluídas no R base, podem ser utilizadas para importar arquivos CSV. Existe uma pequena diferença entre elas. Dois argumentos dessas funções têm padrão diferentes em cada uma. São eles: <span class="in">`sep`</span> (separador de colunas) e <span class="in">`dec`</span> (separador de decimais). Na <span class="in">`read.csv()`</span>, o padrão é <span class="in">`sep = ”,”`</span> e <span class="in">`dec = ”.”`</span> e em <span class="in">`read.csv2()`</span> o padrão é <span class="in">`sep = “;”`</span> e <span class="in">`dec = ”,”`</span>. Portanto, quando se importa um arquivo <span class="in">`.csv`</span>, é importante saber qual a sua estrutura. Verificar se os decimais estão separados por *ponto* ou por *vírgula* e se as colunas (variáveis), por *vírgula* ou *ponto e vírgula*. Para ver isso, basta abrir o arquivo em um bloco de notas (por exemplo, *Bloco de Notas do Windows*, *Notepad ++*).</span>
<span id="cb120-161"><a href="#cb120-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-162"><a href="#cb120-162" aria-hidden="true" tabindex="-1"></a>Quando se usa o <span class="in">`read.csv()`</span> há necessidade de informar o separador e o decimal, pois senão ele usará o padrão inglês e o arquivo não será lido. Já com <span class="in">`read.csv2()`</span>, que usa o padrão brasileiro, não há necessidade de informar qual o separador de colunas e nem o separador dos decimais.</span>
<span id="cb120-163"><a href="#cb120-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-164"><a href="#cb120-164" aria-hidden="true" tabindex="-1"></a>Além disso, é necessário saber em que diretório do computador está o arquivo para informar ao comando. Recomenda-se colocar o arquivo na pasta do diretório de trabalho, pois assim basta apenas colocar o nome do arquivo na função de leitura dos dados. Caso contrário, tem-se que se usar todo o caminho (*path*).</span>
<span id="cb120-165"><a href="#cb120-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-166"><a href="#cb120-166" aria-hidden="true" tabindex="-1"></a>Como exemplo, será importado o arquivo <span class="in">`dadosNeonatos.csv`</span> que se encontra no diretório de trabalho do autor, salvo anteriormente. Para obter o arquivo, siga os passos da @sec-dataframes ou clique <span class="co">[</span><span class="ot">**aqui**</span><span class="co">](https://github.com/petronioliveira/Arquivos/blob/main/dadosNeonatos.csv)</span> e salve em seu diretório de trabalho.</span>
<span id="cb120-167"><a href="#cb120-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-168"><a href="#cb120-168" aria-hidden="true" tabindex="-1"></a>A estrutura deste arquivo mostra que as colunas estão separadas por ponto-e-virgula e, portanto, a leitura dos dados será feita com a função <span class="in">`read.csv2()`</span> e, como o arquivo está no diretório de trabalho, não há necessidade de informar o diretório completo. Os dados serão colocados em um objeto de nome <span class="in">`neonatos`</span> <span class="ot">[^05-manipulandodados-1]</span>:</span>
<span id="cb120-169"><a href="#cb120-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-170"><a href="#cb120-170" aria-hidden="true" tabindex="-1"></a><span class="ot">[^05-manipulandodados-1]: </span>A mudança do nome do dataframe de <span class="in">`dadosNeonatos`</span> para <span class="in">`neonatos`</span> é desnecessária. Foi realizada apenas por questões didáticas.</span>
<span id="cb120-171"><a href="#cb120-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-174"><a href="#cb120-174" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-175"><a href="#cb120-175" aria-hidden="true" tabindex="-1"></a>neonatos <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">"dados/dadosNeonatos.csv"</span>)</span>
<span id="cb120-176"><a href="#cb120-176" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-177"><a href="#cb120-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-178"><a href="#cb120-178" aria-hidden="true" tabindex="-1"></a>Use a função <span class="in">`str()`</span> para visualizar o conjunto de dados:<span class="ot">[^05-manipulandodados-2]</span></span>
<span id="cb120-179"><a href="#cb120-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-180"><a href="#cb120-180" aria-hidden="true" tabindex="-1"></a><span class="ot">[^05-manipulandodados-2]: </span>Observe, na saída, que a variável <span class="in">`utiNeo`</span> aparece palavras com acentuação (“não”). Às vezes, ao abrir o arquivo com a função <span class="in">`read.csv2()`</span>, pode acontecer de esta palavra aparecer, por exemplo, como: “n\xe3o”. Louco, não é? Se ocorrer isso, use, após o nome do arquivo e separado por vírgula, o argumento <span class="in">`fileEncoding = “latin1”`</span>. Dessa forma, o erro será corrigido.</span>
<span id="cb120-181"><a href="#cb120-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-184"><a href="#cb120-184" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-185"><a href="#cb120-185" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(neonatos)</span>
<span id="cb120-186"><a href="#cb120-186" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-187"><a href="#cb120-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-188"><a href="#cb120-188" aria-hidden="true" tabindex="-1"></a>Como se observa na saída do comando, as variáveis foram importadas em classes que vão necessitar transformações para serem usadas. Isto deve ser feito como foi visto na @sec-transform.</span>
<span id="cb120-189"><a href="#cb120-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-190"><a href="#cb120-190" aria-hidden="true" tabindex="-1"></a>::: callout-caution</span>
<span id="cb120-191"><a href="#cb120-191" aria-hidden="true" tabindex="-1"></a><span class="fu">## Atenção</span></span>
<span id="cb120-192"><a href="#cb120-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-193"><a href="#cb120-193" aria-hidden="true" tabindex="-1"></a>Toda vez que se importa um dataset, deve-se verificar atentamente a sua estrutura antes de dar seguimento as análises</span>
<span id="cb120-194"><a href="#cb120-194" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb120-195"><a href="#cb120-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-196"><a href="#cb120-196" aria-hidden="true" tabindex="-1"></a>Recentemente, foi desenvolvido o pacote <span class="in">`readr`</span>, incluído no conjunto de pacotes <span class="in">`tidyverse`</span> @wickham2019tidyverse, para lidar rapidamente com a leitura de grandes arquivos. O pacote fornece substituições para funções como <span class="in">`read.csv()`</span>. As funções <span class="in">`read_csv()`</span> e <span class="in">`read_csv2()`</span> oferecidas pelo <span class="in">`readr`</span> são análogas às do R base. Entretanto, são muito mais rápidas e fornecem mais recursos, como um método compacto para especificar tipos de coluna. Além disso, produzem <span class="in">`tibbles`</span> (ver adiante, @sec-tibble) que são mais reproduzíveis, pois as funções básicas do R herdam alguns comportamentos do sistema operacional e das variáveis de ambiente, portanto, o código de importação que funciona no seu computador pode não funcionar no de outra pessoa. Para usar a função é necessário instalar e ativar o pacote <span class="in">`readr`</span>. A função <span class="in">`read_csv2()`</span> será utilizada para criar um outro objeto de nome <span class="in">`recemNascidos`</span>, mas o conjunto de dados a ser ativado é o mesmo (<span class="in">`dadosNeonatos`</span>):</span>
<span id="cb120-197"><a href="#cb120-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-200"><a href="#cb120-200" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-201"><a href="#cb120-201" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb120-202"><a href="#cb120-202" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb120-203"><a href="#cb120-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-204"><a href="#cb120-204" aria-hidden="true" tabindex="-1"></a> <span class="fu">library</span>(readr)</span>
<span id="cb120-205"><a href="#cb120-205" aria-hidden="true" tabindex="-1"></a> recemNascidos <span class="ot">&lt;-</span> <span class="fu">read_csv2</span>(<span class="st">"dados/dadosNeonatos.csv"</span>)</span>
<span id="cb120-206"><a href="#cb120-206" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-207"><a href="#cb120-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-208"><a href="#cb120-208" aria-hidden="true" tabindex="-1"></a>Quando você executa <span class="in">`read_csv2()`</span>, ele imprime uma especificação de coluna que fornece o nome e o tipo de cada coluna.</span>
<span id="cb120-209"><a href="#cb120-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-210"><a href="#cb120-210" aria-hidden="true" tabindex="-1"></a>Novamente, a função <span class="in">`str()`</span> mostrará a estrutura do arquivo, incluindo mais detalhes <span class="ot">[^05-manipulandodados-3]</span>:</span>
<span id="cb120-211"><a href="#cb120-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-212"><a href="#cb120-212" aria-hidden="true" tabindex="-1"></a><span class="ot">[^05-manipulandodados-3]: </span>Da mesma maneira, como acontece com a função <span class="in">`read.csv2()`</span>, a função equivalente do <span class="in">`readr`</span> pode retornar erro na leitura de palavras com acento. Para corrigir isso, usa-se o argumento <span class="in">`locale (encoding = "latin1")`</span></span>
<span id="cb120-213"><a href="#cb120-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-216"><a href="#cb120-216" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-217"><a href="#cb120-217" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(recemNascidos)</span>
<span id="cb120-218"><a href="#cb120-218" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-219"><a href="#cb120-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-220"><a href="#cb120-220" aria-hidden="true" tabindex="-1"></a><span class="fu">### Importando um arquivo do Excel {#sec-xlsx}</span></span>
<span id="cb120-221"><a href="#cb120-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-222"><a href="#cb120-222" aria-hidden="true" tabindex="-1"></a>O pacote <span class="in">`readxl`</span>, pertencente ao conjunto de pacotes do <span class="in">`tidyverse`</span>, facilita a obtenção de dados do Excel para o R, através da função <span class="in">`read_excel()`</span>. esta função tem o argumento <span class="in">`sheet =`</span> , que deve ser usado indicando o número ou o nome da planilha, colocado entre aspas. Este argumento é importante se houver mais de uma planilha, caso contrário, ele é opcional. Para saber os outros argumentos da função, colque o cursor dentro da função e aperte a tecla <span class="in">`Tab`</span> (@fig-sheet). Isto abrirá um menu com os argumentos:</span>
<span id="cb120-223"><a href="#cb120-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-226"><a href="#cb120-226" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-227"><a href="#cb120-227" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb120-228"><a href="#cb120-228" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "80%"</span></span>
<span id="cb120-229"><a href="#cb120-229" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-sheet</span></span>
<span id="cb120-230"><a href="#cb120-230" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb120-231"><a href="#cb120-231" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Argumentos da função para importar arquivos .xlsx"</span></span>
<span id="cb120-232"><a href="#cb120-232" aria-hidden="true" tabindex="-1"></a> knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"https://i.imgur.com/5qY7z0C.png"</span>)</span>
<span id="cb120-233"><a href="#cb120-233" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-234"><a href="#cb120-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-235"><a href="#cb120-235" aria-hidden="true" tabindex="-1"></a>Será feita a leitura dos mesmos dados, usados na leitura de dados <span class="in">`csv`</span>, apenas o arquivo agora está no formato <span class="in">`.xlsx`</span>. Para obter o arquivo, siga os mesmos passos, usados anteriormente. Clique <span class="co">[</span><span class="ot">**aqui**</span><span class="co">](https://github.com/petronioliveira/Arquivos/blob/main/dadosNeonatos.xlsx)</span> e salve em seu diretório de trabalho.</span>
<span id="cb120-236"><a href="#cb120-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-237"><a href="#cb120-237" aria-hidden="true" tabindex="-1"></a>Os dados serão atribuídos a um objeto com outro nome (<span class="in">`recemNatos`</span>):</span>
<span id="cb120-238"><a href="#cb120-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-241"><a href="#cb120-241" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-242"><a href="#cb120-242" aria-hidden="true" tabindex="-1"></a>recemNatos <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"dados/dadosNeonatos.xlsx"</span>)</span>
<span id="cb120-243"><a href="#cb120-243" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(recemNatos)</span>
<span id="cb120-244"><a href="#cb120-244" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-245"><a href="#cb120-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-246"><a href="#cb120-246" aria-hidden="true" tabindex="-1"></a>Como se vê ao analisar a estrutura, deve-se proceder transformações nas variáveis, como visto na @sec-transform.</span>
<span id="cb120-247"><a href="#cb120-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-248"><a href="#cb120-248" aria-hidden="true" tabindex="-1"></a>Na @fig-sheet, o duplo dois pontos (<span class="in">`::`</span>) precedido do nome do pacote, no caso <span class="in">`readxl`</span>, especifica a procedência da função usada. Nesta situação, não há necessidade de usar a função <span class="in">`library()`</span> para carregar o pacote já instalado em um diretório (biblioteca) previamente.</span>
<span id="cb120-249"><a href="#cb120-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-250"><a href="#cb120-250" aria-hidden="true" tabindex="-1"></a><span class="fu">### Importando arquivos com o RStudio</span></span>
<span id="cb120-251"><a href="#cb120-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-252"><a href="#cb120-252" aria-hidden="true" tabindex="-1"></a>O <span class="in">`RStudio`</span> permite importar arquivos sem a necessidade de digitar comandos, que, para alguns podem ser tediosos.</span>
<span id="cb120-253"><a href="#cb120-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-254"><a href="#cb120-254" aria-hidden="true" tabindex="-1"></a>Na tela inicial do <span class="in">`RStudio`</span>, à direita, na parte superior, clique na aba *Environment* e em <span class="in">`Import Dataset`</span>. Esta ação abre um menu que permite importar arquivos .csv, Excel, SPSS, etc.</span>
<span id="cb120-255"><a href="#cb120-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-256"><a href="#cb120-256" aria-hidden="true" tabindex="-1"></a>Por exemplo, para importar o arquivo <span class="in">`dadosNeonatos.xlsx`</span>, clicar em <span class="in">`From Excel...`</span> Abre uma janela com uma caixa de diálogo. Clicar no botão <span class="in">`Browse...`</span>, localizado em cima à direita, para buscar o arquivo <span class="in">`dadosNeonatos.xlsx`</span>. Assim que o arquivo for aberto, ele mostra uma *preview* do arquivo e, em baixo, à direita mostra uma *preview* do código (@fig-import)), igual ao digitado anteriormente, que cria um objeto denominado <span class="in">`dadosNeonatos`</span>, nome do objeto escolhido pelo R, mas pode ser modificado na janela, à esquerda, <span class="in">`Import Option`</span> em <span class="in">`Name`</span>, onde pode-se digitar qualquer nome. Após encerrar as escolhas, clicar em <span class="in">`Import`</span>. É um caminho diferente para fazer o mesmo. Este é um dos fascínios do R!</span>
<span id="cb120-257"><a href="#cb120-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-260"><a href="#cb120-260" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-261"><a href="#cb120-261" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb120-262"><a href="#cb120-262" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: "100%"</span></span>
<span id="cb120-263"><a href="#cb120-263" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-import</span></span>
<span id="cb120-264"><a href="#cb120-264" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb120-265"><a href="#cb120-265" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Importando arquivos do excel com o RStudio"</span></span>
<span id="cb120-266"><a href="#cb120-266" aria-hidden="true" tabindex="-1"></a> knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"https://i.imgur.com/xjEpK6A.png"</span>)</span>
<span id="cb120-267"><a href="#cb120-267" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-268"><a href="#cb120-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-269"><a href="#cb120-269" aria-hidden="true" tabindex="-1"></a><span class="fu">## Tibble {#sec-tibble}</span></span>
<span id="cb120-270"><a href="#cb120-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-271"><a href="#cb120-271" aria-hidden="true" tabindex="-1"></a>A maneira mais comum de armazenar dados no R é usar <span class="in">`data.frames`</span> ou <span class="in">`tibble`</span>.</span>
<span id="cb120-272"><a href="#cb120-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-273"><a href="#cb120-273" aria-hidden="true" tabindex="-1"></a>*Tibble* é um novo tipo de dataframe. É como se fosse um dataframe mais moderno. Ele mantém muitos recursos importantes do data frame original, mas remove muitos dos recursos desatualizados.</span>
<span id="cb120-274"><a href="#cb120-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-275"><a href="#cb120-275" aria-hidden="true" tabindex="-1"></a>A maioria dos pacotes do R usa dataframes tradicionais, entretanto é possível transformá-los para <span class="in">`tibble`</span>, usando a função <span class="in">`as_tibble()`</span>, incluída no pacote <span class="in">`tidyr`</span> @wickham2022tidyr. O único propósito deste pacote é simplificar o processo de criação dados arrumados organizados (<span class="in">`tidy data`</span>). A transformação de um dataframe tradicional em um <span class="in">`tibble`</span>, é um procedimento rescomendável, em função da maior flexibilidade destes.</span>
<span id="cb120-276"><a href="#cb120-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-277"><a href="#cb120-277" aria-hidden="true" tabindex="-1"></a>Como exemplo deste procedimento, será usado o dataframes criado na @sec-dataframes: <span class="in">`dadosNeonatos`</span>.</span>
<span id="cb120-278"><a href="#cb120-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-279"><a href="#cb120-279" aria-hidden="true" tabindex="-1"></a>Este é um conjunto de dados da classe <span class="in">`data.frame`</span>, contendo 15 observações de 7 variáveis (colunas), pode convetrtido a um <span class="in">`tibble`</span>, usando a função <span class="in">`as.tibble()`</span>:</span>
<span id="cb120-280"><a href="#cb120-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-283"><a href="#cb120-283" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-284"><a href="#cb120-284" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb120-285"><a href="#cb120-285" aria-hidden="true" tabindex="-1"></a><span class="fu">as_tibble</span>(dadosNeonatos)</span>
<span id="cb120-286"><a href="#cb120-286" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-287"><a href="#cb120-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-288"><a href="#cb120-288" aria-hidden="true" tabindex="-1"></a>Por padrão, quando o dataset é muito longo, apenas as primeiras dez linhas são mostradas. Aqui, aparece o toda a estrutura dos dados. São apresentadas a dimensão da tabela e as classes de cada coluna. Verifica-se que não houve grandes mudanças, apenas o conjunto de dados está estruturalmente mais organizado, mais flexível.</span>
<span id="cb120-289"><a href="#cb120-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-290"><a href="#cb120-290" aria-hidden="true" tabindex="-1"></a><span class="fu">## Pacote tidyverse  {#sec-tidyverse}</span></span>
<span id="cb120-291"><a href="#cb120-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-292"><a href="#cb120-292" aria-hidden="true" tabindex="-1"></a>A denominada ciência de dados é difícil de definir, pois a definição depende da formação específica de cada cientista de dados. Entretanto, é possível mostrar como a ciência de dados pode ser realizada na prática, constituindo aquilo que se costuma chamar de *Ciclo da Ciência de Dados* (@fig-ciclo).\</span>
<span id="cb120-293"><a href="#cb120-293" aria-hidden="true" tabindex="-1"></a>Primeiramente, os dados brutos são coletados de diversas maneiras (veja @sec-producao). Após, são armazenados, por exemplo, em Excel, e, em seguida, são arrumados para reduzir problemas de padronização, conceituais e erros ou exclusão de variáveis e casos que não fazem parte do objetivo estabelecido no projeto de pesquisa. Isto constituirá a base de dados analítica.\</span>
<span id="cb120-294"><a href="#cb120-294" aria-hidden="true" tabindex="-1"></a>A base de dados analítica é então transformada, refinada, para produzir medidas resumidoras, tabela e gráficos. Quando necessário, são produzidos modelos estatíticos. O resultado final deve ser comunicado através dos meios de divulgação científica (relatórios, periódicos, livros, jornadas, congressos, GitHub, etc.).</span>
<span id="cb120-295"><a href="#cb120-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-298"><a href="#cb120-298" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-299"><a href="#cb120-299" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb120-300"><a href="#cb120-300" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-ciclo</span></span>
<span id="cb120-301"><a href="#cb120-301" aria-hidden="true" tabindex="-1"></a><span class="co">#| out.width: '80%'</span></span>
<span id="cb120-302"><a href="#cb120-302" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig.align: 'center'</span></span>
<span id="cb120-303"><a href="#cb120-303" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Ciclo da Ciência de Dados"</span></span>
<span id="cb120-304"><a href="#cb120-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-305"><a href="#cb120-305" aria-hidden="true" tabindex="-1"></a> knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"https://i.imgur.com/UYe9AIO.png"</span>)</span>
<span id="cb120-306"><a href="#cb120-306" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-307"><a href="#cb120-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-308"><a href="#cb120-308" aria-hidden="true" tabindex="-1"></a>O pacote <span class="in">`tidyverse`</span> é uma coleção de pacotes para a linguagem de programação R, pensada e desenvolvida para facilitar e otimizar o fluxo de trabalho em ciência de dados @wickham2019tidyverse.\</span>
<span id="cb120-309"><a href="#cb120-309" aria-hidden="true" tabindex="-1"></a>Em vez de ser um pacote único, ele é um "meta-pacote", o que significa que, ao instalá-lo, você instala vários pacotes menores que trabalham em conjunto.</span>
<span id="cb120-310"><a href="#cb120-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-311"><a href="#cb120-311" aria-hidden="true" tabindex="-1"></a>A filosofia principal por trás do <span class="in">`tidyverse`</span> é a de dados "tidy" (arrumados ou organizados) @wickham2014tidy, onde:</span>
<span id="cb120-312"><a href="#cb120-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-313"><a href="#cb120-313" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Cada variável está em uma coluna.</span>
<span id="cb120-314"><a href="#cb120-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-315"><a href="#cb120-315" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Cada observação está em uma linha.</span>
<span id="cb120-316"><a href="#cb120-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-317"><a href="#cb120-317" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Cada valor está em uma célula.</span>
<span id="cb120-318"><a href="#cb120-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-319"><a href="#cb120-319" aria-hidden="true" tabindex="-1"></a>Seguindo essa lógica, as funções e pacotes do <span class="in">`tidyverse`</span> são projetados para facilitar a manipulação dos dados dentro do Ciclo da Ciência de Dados (\@fig-ciclo), tornando a manipulação, a análise e a visualização de dados mais consistentes e intuitivas.</span>
<span id="cb120-320"><a href="#cb120-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-321"><a href="#cb120-321" aria-hidden="true" tabindex="-1"></a><span class="fu">### Principais Pacotes do tidyverse</span></span>
<span id="cb120-322"><a href="#cb120-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-323"><a href="#cb120-323" aria-hidden="true" tabindex="-1"></a>O <span class="in">`tidyverse`</span> simplifica tarefas complexas, oferecendo ferramentas específicas para cada etapa do Ciclo de Ciências de Dados. Alguns dos pacotes mais importantes são:</span>
<span id="cb120-324"><a href="#cb120-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-325"><a href="#cb120-325" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**dplyr**: Para manipulação de dados. Contém funções essenciais para filtrar linhas, selecionar colunas, criar novas variáveis, e resumir dados.</span>
<span id="cb120-326"><a href="#cb120-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-327"><a href="#cb120-327" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**ggplot2**: Para visualização de dados. É um dos pacotes mais populares do R para criar gráficos esteticamente agradáveis e informativos.</span>
<span id="cb120-328"><a href="#cb120-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-329"><a href="#cb120-329" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**tidyr**: Para organizar os dados. Ele transforma dados "bagunçados" (que não seguem o formato tidy) em um formato mais limpo e organizado.</span>
<span id="cb120-330"><a href="#cb120-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-331"><a href="#cb120-331" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**readr**: Para importar dados. Permite ler arquivos de texto (como CSVs) de forma rápida e robusta.</span>
<span id="cb120-332"><a href="#cb120-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-333"><a href="#cb120-333" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**tibble**: Uma versão aprimorada do data.frame do R base. O <span class="in">`tibble`</span> é mais fácil de usar e interage melhor com os pacotes do <span class="in">`tidyverse`</span>.</span>
<span id="cb120-334"><a href="#cb120-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-335"><a href="#cb120-335" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**stringr**: Para manipular strings (textos). Simplifica as tarefas de trabalhar com dados de texto.</span>
<span id="cb120-336"><a href="#cb120-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-337"><a href="#cb120-337" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**forcats**: Para lidar com fatores (variáveis categóricas).</span>
<span id="cb120-338"><a href="#cb120-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-339"><a href="#cb120-339" aria-hidden="true" tabindex="-1"></a><span class="fu">### Princípios do tidyverse {#sec-printidyverse}</span></span>
<span id="cb120-340"><a href="#cb120-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-341"><a href="#cb120-341" aria-hidden="true" tabindex="-1"></a>O <span class="in">`tidyverse`</span> causou quase uma revolução na comunidade do R. Aguns chegam a dizer que existe uma linguagem R antes e depois do <span class="in">`tidyverse`</span>. Pode parecer exagero, mas o certo é que o uso dos princípios do <span class="in">`tidyverse`</span> foi abraçado pela maioria dos usuários de R e, em função disso, foram criados uma grande quantidade de pacotes que conversam entre si, facilitando o manuseio dos dados.</span>
<span id="cb120-342"><a href="#cb120-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-343"><a href="#cb120-343" aria-hidden="true" tabindex="-1"></a>Os princípios fundamentais são:</span>
<span id="cb120-344"><a href="#cb120-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-345"><a href="#cb120-345" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Reutilizar estruturas de dados existentes.</span>
<span id="cb120-346"><a href="#cb120-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-347"><a href="#cb120-347" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Organizar funções simples usando o <span class="in">`pipe`</span>.<span class="ot">[^05-manipulandodados-4]</span>. Esse operador, introduzido por Stefan Milton Bache no pacote <span class="in">`magrittr`</span> @bache2022magritt, permite encadear múltiplas operações em uma sequência clara e legível, de forma que a saída de uma função se torna a entrada da próxima. Isso torna o código mais fácil de ler e entender, eliminando a necessidade de criar muitas variáveis intermediárias. O <span class="in">`pipe`</span> pode ser acionado digitando <span class="in">`%&gt;%`</span> ou usando o atalho <span class="in">`ctrl + shift + M`</span>. <span class="ot">[^05-manipulandodados-5]</span></span>
<span id="cb120-348"><a href="#cb120-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-349"><a href="#cb120-349" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Usar uma sintaxe consistente: As funções dos pacotes tidyverse seguem uma lógica de nomeação e de argumentos parecida, facilitando a memorização e o uso.</span>
<span id="cb120-350"><a href="#cb120-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-351"><a href="#cb120-351" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>Projetado com foco nos seres humanos, priorizando a eficiência do programador.</span>
<span id="cb120-352"><a href="#cb120-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-353"><a href="#cb120-353" aria-hidden="true" tabindex="-1"></a><span class="ot">[^05-manipulandodados-4]: </span>O nome é uma referência ao famoso quadro do pintor belga René Magritte <span class="co">[</span><span class="ot">*La Trahison des images*</span><span class="co">](https://decorem.com.br/blogs/news/significado-da-obra-a-traicao-das-imagens-de-rene-magritte?srsltid=AfmBOoqG3gSMhNdnwgmQ3piepQPRSkJlXkNQjQv5mDq72QYRwub3vJKz)</span> *(Ceci n’est pas une pipe)*.</span>
<span id="cb120-354"><a href="#cb120-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-355"><a href="#cb120-355" aria-hidden="true" tabindex="-1"></a><span class="ot">[^05-manipulandodados-5]: </span>Além do <span class="in">`pipe`</span>, indiretamente, embutido no <span class="in">`tidyverse`</span>, existe o pipe nativo do R (<span class="in">`|&gt;`</span>) que também pode ser usado com as mesmas funções do <span class="in">`%&gt;%`</span>.</span>
<span id="cb120-356"><a href="#cb120-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-357"><a href="#cb120-357" aria-hidden="true" tabindex="-1"></a>Quando o <span class="in">`tidyverse`</span> é carregado, todos os pacotes embutidos nele, serão carregados.</span>
<span id="cb120-358"><a href="#cb120-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-361"><a href="#cb120-361" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-362"><a href="#cb120-362" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb120-363"><a href="#cb120-363" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-364"><a href="#cb120-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-365"><a href="#cb120-365" aria-hidden="true" tabindex="-1"></a>::: {.callout-warning title="Conflito de funções ao carregar tidyverse"}</span>
<span id="cb120-366"><a href="#cb120-366" aria-hidden="true" tabindex="-1"></a>Ao carregar o pacote <span class="in">`tidyverse`</span> ou qualquer outro, podem surgir mensagens de conflito indicando que funções previamente disponíveis foram sobrescritas por versões de mesmo nome.</span>
<span id="cb120-367"><a href="#cb120-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-368"><a href="#cb120-368" aria-hidden="true" tabindex="-1"></a>No exemplo apresentado, as funções <span class="in">`filter()`</span> e <span class="in">`lag()`</span> do pacote <span class="in">`stats`</span> foram substituídas pelas versões do pacote <span class="in">`dplyr`</span>.</span>
<span id="cb120-369"><a href="#cb120-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-370"><a href="#cb120-370" aria-hidden="true" tabindex="-1"></a>Para utilizar as funções originais do pacote <span class="in">`stats`</span> após esse carregamento, é necessário especificar o namespace diretamente:\</span>
<span id="cb120-371"><a href="#cb120-371" aria-hidden="true" tabindex="-1"></a><span class="in">`stats::filter()`</span> e <span class="in">`stats::lag()`</span>.</span>
<span id="cb120-372"><a href="#cb120-372" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb120-373"><a href="#cb120-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-374"><a href="#cb120-374" aria-hidden="true" tabindex="-1"></a><span class="fu">## Pacote dplyr  {#sec-dplyr}</span></span>
<span id="cb120-375"><a href="#cb120-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-376"><a href="#cb120-376" aria-hidden="true" tabindex="-1"></a>Um dos pacotes de maior utilidade abarcado pelo <span class="in">`tidyverse`</span> é o <span class="in">`dplyr`</span>. Ele permite realizar transformação dos dados de uma forma simples e eficiente. O uso dos verbos <span class="in">`dplyr`</span>, aliado ao operador <span class="in">`pipe`</span>, tendem a tornar os scripts mais "enxutos" e elegantes @wickham2015dplyr.\</span>
<span id="cb120-377"><a href="#cb120-377" aria-hidden="true" tabindex="-1"></a>As principais funções do <span class="in">`dplyr`</span> são:</span>
<span id="cb120-378"><a href="#cb120-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-379"><a href="#cb120-379" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`select()`</span> - seleciona colunas\</span>
<span id="cb120-380"><a href="#cb120-380" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`arrange()`</span> - ordena uma variável em ordem crescente ou descrescente\</span>
<span id="cb120-381"><a href="#cb120-381" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`filter()`</span> - filtra linhas\</span>
<span id="cb120-382"><a href="#cb120-382" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`mutate()`</span> - cria/modifica colunas\</span>
<span id="cb120-383"><a href="#cb120-383" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`group_by()`</span> - agrupa por fatores\</span>
<span id="cb120-384"><a href="#cb120-384" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`summarise()`</span> - sumariza a base</span>
<span id="cb120-385"><a href="#cb120-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-386"><a href="#cb120-386" aria-hidden="true" tabindex="-1"></a>Todas as funções tem as mesmas características: o primeiro argumento é um tibble e o que será a ação da função nos outrso argumentos.</span>
<span id="cb120-387"><a href="#cb120-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-388"><a href="#cb120-388" aria-hidden="true" tabindex="-1"></a>Neste capítulo e em muitos outros deste livro, será outilizado o dataframe <span class="in">`dadosMater.xlsx`</span>.</span>
<span id="cb120-389"><a href="#cb120-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-390"><a href="#cb120-390" aria-hidden="true" tabindex="-1"></a><span class="fu">## Dataframe `dadosMater.xlsx` {#sec-dadosMater}</span></span>
<span id="cb120-391"><a href="#cb120-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-392"><a href="#cb120-392" aria-hidden="true" tabindex="-1"></a>O arquivo <span class="in">`dadosMater.xlsx`</span> é um dataframe constituído por dados de 1568 partos consecutivos do Hospital Geral de Caxias do Sul (HGCS) <span class="ot">[^05-manipulandodados-6]</span> , durante um estudo sobre infecções congênitas @madi2010prevalence. Para baixar esses dados, clique <span class="co">[</span><span class="ot">aqui</span><span class="co">](https://github.com/petronioliveira/Arquivos/blob/main/dadosMater.xlsx)</span> e faça o *download* para o diretório de trabalho, para uso posterior.</span>
<span id="cb120-393"><a href="#cb120-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-394"><a href="#cb120-394" aria-hidden="true" tabindex="-1"></a><span class="ot">[^05-manipulandodados-6]: </span>Hospital Escola da Universidade de Caxias do Sul, RS.</span>
<span id="cb120-395"><a href="#cb120-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-396"><a href="#cb120-396" aria-hidden="true" tabindex="-1"></a><span class="fu">### Leitura dos dados</span></span>
<span id="cb120-397"><a href="#cb120-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-398"><a href="#cb120-398" aria-hidden="true" tabindex="-1"></a>Para ler arquivos do Excel (<span class="in">`.xlsx`</span>), o pacote ideal é o <span class="in">`readxl`</span>, que também faz parte do <span class="in">`tidyverse`</span>. Ele é leve, rápido e não depende do Excel instalado. A função a ser usada é <span class="in">`read_excel()`</span>. O objeto <span class="in">`mater`</span> será utilizado para receber os dados:</span>
<span id="cb120-399"><a href="#cb120-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-402"><a href="#cb120-402" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-403"><a href="#cb120-403" aria-hidden="true" tabindex="-1"></a>mater <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"dados/dadosMater.xlsx"</span>)</span>
<span id="cb120-404"><a href="#cb120-404" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-405"><a href="#cb120-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-406"><a href="#cb120-406" aria-hidden="true" tabindex="-1"></a>::: callout-important</span>
<span id="cb120-407"><a href="#cb120-407" aria-hidden="true" tabindex="-1"></a><span class="fu">## Importante</span></span>
<span id="cb120-408"><a href="#cb120-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-409"><a href="#cb120-409" aria-hidden="true" tabindex="-1"></a>O comando para carregar o conjunto de dados somente funciona ,sem colocar o caminho completo, se tudo está sendo realizado no diretório de trabalho</span>
<span id="cb120-410"><a href="#cb120-410" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb120-411"><a href="#cb120-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-412"><a href="#cb120-412" aria-hidden="true" tabindex="-1"></a>Como rotina, em análise de dados, após a leitura é interessante explorar a estrutura do dados. A função <span class="in">`as_tibble()`</span> é interessante para ver a estrutura de um <span class="in">`tibble`</span>:</span>
<span id="cb120-413"><a href="#cb120-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-416"><a href="#cb120-416" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-417"><a href="#cb120-417" aria-hidden="true" tabindex="-1"></a><span class="fu">as_tibble</span>(mater)</span>
<span id="cb120-418"><a href="#cb120-418" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-419"><a href="#cb120-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-420"><a href="#cb120-420" aria-hidden="true" tabindex="-1"></a>Por padrão, a função retorna as dez primeiras linhas. Além disso, colunas que não couberem na largura da tela serão omitidas. Também são apresentadas a dimensão da tabela e as classes de cada coluna. Observa-se que ele tem 1368 linhas (observações) e 30 colunas (variáveis). Além disso, verifica-se que todas as variáveis estão como numéricas (<span class="in">`dbl`</span>) e, certamente, algumas, dependendo do objetivo na análise, precisarão ser transformadas.</span>
<span id="cb120-421"><a href="#cb120-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-422"><a href="#cb120-422" aria-hidden="true" tabindex="-1"></a>O significado de cada uma das variáveis do <span class="in">`tibble`</span> <span class="in">`mater`</span> é o seguinte:</span>
<span id="cb120-423"><a href="#cb120-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-424"><a href="#cb120-424" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**id** $\to$ identificação do participante\</span>
<span id="cb120-425"><a href="#cb120-425" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**idadeMae** $\to$ idade da parturiente em anos\</span>
<span id="cb120-426"><a href="#cb120-426" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**altura** $\to$ altura da parturiente em metros\</span>
<span id="cb120-427"><a href="#cb120-427" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**peso** $\to$ peso da parturiente em kg\</span>
<span id="cb120-428"><a href="#cb120-428" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**ganhoPeso** $\to$ aumento de peso durante a gestação\</span>
<span id="cb120-429"><a href="#cb120-429" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**anosEst** $\to$ anos de estudo completos\</span>
<span id="cb120-430"><a href="#cb120-430" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**cor** $\to$ cor declarada pela parturiente: 1 = branca; 2 = não branca\</span>
<span id="cb120-431"><a href="#cb120-431" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**eCivil** $\to$ estado civil: 1 = solteira; 2 = casada ou companheira\</span>
<span id="cb120-432"><a href="#cb120-432" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**renda** $\to$ renda familiar em salários minimos\</span>
<span id="cb120-433"><a href="#cb120-433" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**fumo** $\to$ tabagismo: 1 = sim; 2 = não\</span>
<span id="cb120-434"><a href="#cb120-434" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**quantFumo** $\to$ quantidade de cigarros fumados diariamente\</span>
<span id="cb120-435"><a href="#cb120-435" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**prenatal** $\to$ realizou pelo menos 6 consultas no pré-natal? 1 = sim; 2 = não</span>
<span id="cb120-436"><a href="#cb120-436" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**para** $\to$ número de filhos paridos\</span>
<span id="cb120-437"><a href="#cb120-437" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**droga** $\to$ drogadição? 1 = sim; 2 = não\</span>
<span id="cb120-438"><a href="#cb120-438" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**ig** $\to$ idade gestacional em semanas\</span>
<span id="cb120-439"><a href="#cb120-439" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**tipoParto** $\to$ tipo de parto: 1 = normal; 2 = cesareana\</span>
<span id="cb120-440"><a href="#cb120-440" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**pesoPla** $\to$ peso da placenta em gramas</span>
<span id="cb120-441"><a href="#cb120-441" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**sexo** $\to$ sexo do recém-nascido (RN): 1 = masc; 2 = fem\</span>
<span id="cb120-442"><a href="#cb120-442" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**pesoRN** $\to$ peso do RN em gramas\</span>
<span id="cb120-443"><a href="#cb120-443" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**compRN** $\to$ comprimento do RN em cm\</span>
<span id="cb120-444"><a href="#cb120-444" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**pcRN** $\to$ perímetro cefálico dorecém-nascido em cm\</span>
<span id="cb120-445"><a href="#cb120-445" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**apgar1** $\to$ escore de Apgar no primeiro minuto\</span>
<span id="cb120-446"><a href="#cb120-446" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**apgar5** $\to$ escore de Apgar no quinto minuto\</span>
<span id="cb120-447"><a href="#cb120-447" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**utiNeo** $\to$ RN necessitou de terapia intesiva? 1 = sim; 2 = não\</span>
<span id="cb120-448"><a href="#cb120-448" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**obito** $\to$ obito no período neonatal? 1 = sim; 2 = não\</span>
<span id="cb120-449"><a href="#cb120-449" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**hiv** $\to$ parturiente portadora de HIV? 1 = sim; 2 = não\</span>
<span id="cb120-450"><a href="#cb120-450" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**sifilis** $\to$ parturiente portadora de sífilis? 1 = sim; 2 = não\</span>
<span id="cb120-451"><a href="#cb120-451" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**rubeola** $\to$ parturiente portadora de rubéola? 1 = sim; 2 = não\</span>
<span id="cb120-452"><a href="#cb120-452" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**toxo** $\longrightarrow$ parturiente portadora de toxoplasmose? 1 = sim; 2 = não\</span>
<span id="cb120-453"><a href="#cb120-453" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**infCong** $\to$ parturiente portadora de alguma infecção congênita? 1 = sim; 2 = não</span>
<span id="cb120-454"><a href="#cb120-454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-455"><a href="#cb120-455" aria-hidden="true" tabindex="-1"></a>O *tibble* mater pode ser facilmente modificado com os verbos do pacote <span class="in">`dplyr`</span>.</span>
<span id="cb120-456"><a href="#cb120-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-457"><a href="#cb120-457" aria-hidden="true" tabindex="-1"></a><span class="fu">### Selecionando colunas</span></span>
<span id="cb120-458"><a href="#cb120-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-459"><a href="#cb120-459" aria-hidden="true" tabindex="-1"></a>A função <span class="in">`select ()`</span> pode ser usada para escolher quais colunas (variáveis) entrarão na análise. Ela recebe como primeiro argumento o conjunto de dados e os demais argumentos são os nomes das colunas. O nome das colunas devem estar entre aspas.\</span>
<span id="cb120-460"><a href="#cb120-460" aria-hidden="true" tabindex="-1"></a>O conjunto de dados <span class="in">`mater`</span> contém 30 colunas e muitas podem ser removidas, dependendo do objetivo da análise.</span>
<span id="cb120-461"><a href="#cb120-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-464"><a href="#cb120-464" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-465"><a href="#cb120-465" aria-hidden="true" tabindex="-1"></a>mater <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(mater, <span class="sc">-</span> obito, <span class="sc">-</span>hiv, <span class="sc">-</span>sifilis, <span class="sc">-</span>rubeola, <span class="sc">-</span>toxo)</span>
<span id="cb120-466"><a href="#cb120-466" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-467"><a href="#cb120-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-468"><a href="#cb120-468" aria-hidden="true" tabindex="-1"></a>Note que foi usado o sinal de menos (-) antes das variáveis, porque elas foram removidas. Também poderiam ser listadas as variáveia que permanecem que, automaticamente, as não listadas serão removidas.</span>
<span id="cb120-469"><a href="#cb120-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-470"><a href="#cb120-470" aria-hidden="true" tabindex="-1"></a>Outra maneira, pode ser colocando o número da coluna como abaixo, o sinal de subtração antes da função concatenar c()com os números das colunas a serem removidas (25 a 29):</span>
<span id="cb120-471"><a href="#cb120-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-474"><a href="#cb120-474" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-475"><a href="#cb120-475" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb120-476"><a href="#cb120-476" aria-hidden="true" tabindex="-1"></a>mater <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(mater, <span class="sc">-</span> <span class="fu">c</span>(<span class="dv">25</span><span class="sc">:</span><span class="dv">29</span>))</span>
<span id="cb120-477"><a href="#cb120-477" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-478"><a href="#cb120-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-479"><a href="#cb120-479" aria-hidden="true" tabindex="-1"></a>A função <span class="in">`str()`</span> permite visualizar a nova estrutura:</span>
<span id="cb120-480"><a href="#cb120-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-483"><a href="#cb120-483" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-484"><a href="#cb120-484" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mater)</span>
<span id="cb120-485"><a href="#cb120-485" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-486"><a href="#cb120-486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-487"><a href="#cb120-487" aria-hidden="true" tabindex="-1"></a>A função <span class="in">`select ()`</span> pode ser combinada com outras funções, como <span class="in">`filter ()`</span>.</span>
<span id="cb120-488"><a href="#cb120-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-489"><a href="#cb120-489" aria-hidden="true" tabindex="-1"></a><span class="fu">### Modificando e criando novas colunas</span></span>
<span id="cb120-490"><a href="#cb120-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-491"><a href="#cb120-491" aria-hidden="true" tabindex="-1"></a>Para esta ação, usa-se a função <span class="in">`mutate()`</span>. Por exemplo, todas as variáveis no *tibble* <span class="in">`mater`</span> foram lidas como numéricas. Entretanto, as variáveis <span class="in">`cor`</span>, <span class="in">`estCivil`</span>, <span class="in">`fumo`</span>, <span class="in">`prenatal`</span>, <span class="in">`droga`</span>, <span class="in">`tipoParto`</span>, <span class="in">`sexo`</span>, <span class="in">`utiNeo`</span> e <span class="in">`infCong`</span> são categóricas e devem ser convertidas para fator, usando a função <span class="in">`factor()`</span> associada a <span class="in">`mutate()`</span>:</span>
<span id="cb120-492"><a href="#cb120-492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-495"><a href="#cb120-495" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-496"><a href="#cb120-496" aria-hidden="true" tabindex="-1"></a>mater <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(mater,</span>
<span id="cb120-497"><a href="#cb120-497" aria-hidden="true" tabindex="-1"></a>                        <span class="at">cor =</span> <span class="fu">factor</span>(cor, </span>
<span id="cb120-498"><a href="#cb120-498" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb120-499"><a href="#cb120-499" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"branca"</span>, <span class="st">"não branca"</span>)), </span>
<span id="cb120-500"><a href="#cb120-500" aria-hidden="true" tabindex="-1"></a>                        <span class="at">eCivil =</span> <span class="fu">factor</span>(eCivil, </span>
<span id="cb120-501"><a href="#cb120-501" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb120-502"><a href="#cb120-502" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"solteira"</span>, <span class="st">"não branca"</span>)),</span>
<span id="cb120-503"><a href="#cb120-503" aria-hidden="true" tabindex="-1"></a>                        <span class="at">fumo =</span> <span class="fu">factor</span>(fumo, </span>
<span id="cb120-504"><a href="#cb120-504" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb120-505"><a href="#cb120-505" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"sim"</span>, <span class="st">"não"</span>)), , </span>
<span id="cb120-506"><a href="#cb120-506" aria-hidden="true" tabindex="-1"></a>                        <span class="at">prenatal =</span> <span class="fu">factor</span>(prenatal, </span>
<span id="cb120-507"><a href="#cb120-507" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb120-508"><a href="#cb120-508" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"sim"</span>, <span class="st">"não"</span>)), </span>
<span id="cb120-509"><a href="#cb120-509" aria-hidden="true" tabindex="-1"></a>                        <span class="at">droga =</span> <span class="fu">factor</span>(droga, </span>
<span id="cb120-510"><a href="#cb120-510" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb120-511"><a href="#cb120-511" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"sim"</span>, <span class="st">"não"</span>)), </span>
<span id="cb120-512"><a href="#cb120-512" aria-hidden="true" tabindex="-1"></a>                        <span class="at">tipoParto =</span> <span class="fu">factor</span>(tipoParto, </span>
<span id="cb120-513"><a href="#cb120-513" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb120-514"><a href="#cb120-514" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"normal"</span>, <span class="st">"cesareo"</span>)), </span>
<span id="cb120-515"><a href="#cb120-515" aria-hidden="true" tabindex="-1"></a>                        <span class="at">sexo =</span> <span class="fu">factor</span>(sexo, </span>
<span id="cb120-516"><a href="#cb120-516" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb120-517"><a href="#cb120-517" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"masc"</span>, <span class="st">"fem"</span>)), </span>
<span id="cb120-518"><a href="#cb120-518" aria-hidden="true" tabindex="-1"></a>                        <span class="at">utiNeo =</span> <span class="fu">factor</span>(utiNeo, </span>
<span id="cb120-519"><a href="#cb120-519" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb120-520"><a href="#cb120-520" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"sim"</span>, <span class="st">"não"</span>)),</span>
<span id="cb120-521"><a href="#cb120-521" aria-hidden="true" tabindex="-1"></a>                        <span class="at">infCong =</span> <span class="fu">factor</span>(infCong, </span>
<span id="cb120-522"><a href="#cb120-522" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), </span>
<span id="cb120-523"><a href="#cb120-523" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"sim"</span>, <span class="st">"não"</span>)))</span>
<span id="cb120-524"><a href="#cb120-524" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-525"><a href="#cb120-525" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-526"><a href="#cb120-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-527"><a href="#cb120-527" aria-hidden="true" tabindex="-1"></a>O conjunto de dados está, agora, estruturado de forma correta.</span>
<span id="cb120-528"><a href="#cb120-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-531"><a href="#cb120-531" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-532"><a href="#cb120-532" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mater)</span>
<span id="cb120-533"><a href="#cb120-533" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-534"><a href="#cb120-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-535"><a href="#cb120-535" aria-hidden="true" tabindex="-1"></a>O Índice de Massa Corporal (IMC) é um cálculo que relaciona o peso e a altura de uma pessoa para avaliar se ela está com o peso ideal, abaixo do peso, acima do peso ou obesa. É uma ferramenta simples e amplamente utilizada na área da saúde para triagem e acompanhamento do estado nutricional. Para obter esse índice, serão utilizadas as variáveis peso e altura da gestante no início da gravidez. Como visto na @sec-funcoes, o cálculo do IMC é dado pela razão entre o peso em kg e a altura em metros elevada ao quadrado. Para criar uma nova coluna com a variável <span class="in">`imc`</span>, pode-se também usar o <span class="in">`mutate()`</span>.</span>
<span id="cb120-536"><a href="#cb120-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-539"><a href="#cb120-539" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-540"><a href="#cb120-540" aria-hidden="true" tabindex="-1"></a>mater <span class="ot">&lt;-</span> <span class="fu">mutate</span>(mater,</span>
<span id="cb120-541"><a href="#cb120-541" aria-hidden="true" tabindex="-1"></a>                <span class="at">imc =</span> peso<span class="sc">/</span>altura<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb120-542"><a href="#cb120-542" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-543"><a href="#cb120-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-544"><a href="#cb120-544" aria-hidden="true" tabindex="-1"></a><span class="fu">### Filtrando linhas</span></span>
<span id="cb120-545"><a href="#cb120-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-546"><a href="#cb120-546" aria-hidden="true" tabindex="-1"></a>A função <span class="in">`filter()`</span> é usada para criar um subconjunto de dados que obedeçam determinadas condições lógicas: &amp; (e), <span class="sc">\|</span> (ou) e ! (não). Por exemplo:</span>
<span id="cb120-547"><a href="#cb120-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-548"><a href="#cb120-548" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**y &amp; !x** $\to$ seleciona *y* e não *x*</span>
<span id="cb120-549"><a href="#cb120-549" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**x &amp; !y** $\to$ seleciona *x* e não *y*</span>
<span id="cb120-550"><a href="#cb120-550" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**x \| !x** $\to$ seleciona *x* ou *y*</span>
<span id="cb120-551"><a href="#cb120-551" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**x &amp; y** $\to$ seleciona *x* e *y*</span>
<span id="cb120-552"><a href="#cb120-552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-553"><a href="#cb120-553" aria-hidden="true" tabindex="-1"></a>Um recém-nascido é dito a termo quando a duração da gestação é igual a 37 a 42 semanas incompletas. Para extrair do banco de dados <span class="in">`mater`</span> os recém-nascidos a termo (<span class="in">`dadosRNT`</span>), pode-se usar a função <span class="in">`filter()`</span>:</span>
<span id="cb120-554"><a href="#cb120-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-557"><a href="#cb120-557" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-558"><a href="#cb120-558" aria-hidden="true" tabindex="-1"></a>dadosRNT <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">filter</span> (mater, ig<span class="sc">&gt;=</span><span class="dv">37</span> <span class="sc">&amp;</span> ig<span class="sc">&lt;</span><span class="dv">42</span>)</span>
<span id="cb120-559"><a href="#cb120-559" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-560"><a href="#cb120-560" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-561"><a href="#cb120-561" aria-hidden="true" tabindex="-1"></a>Observe que, agora, o conjunto de dados <span class="in">`dadosRNT`</span> tem <span class="in">`r length(dadosRNT$sexo)`</span> linhas, número de recém-nascidos a termo do banco de dados original <span class="in">`mater`</span> (<span class="in">`r length(mater$sexo)`</span>). Logo, os recém nascidos a termo correspondem a <span class="in">`r round((length(dadosRNT$sexo)/length(mater$sexo)*100),1)`</span>% dos nascimentos, nesta maternidade.</span>
<span id="cb120-562"><a href="#cb120-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-563"><a href="#cb120-563" aria-hidden="true" tabindex="-1"></a>**Outro exemplo**</span>
<span id="cb120-564"><a href="#cb120-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-565"><a href="#cb120-565" aria-hidden="true" tabindex="-1"></a>Para selecionar apenas os meninos, nascidos a termo (<span class="in">`dadosRNT`</span>), codificados como <span class="in">`"masc"`</span>, procede-se da seguinte maneira:</span>
<span id="cb120-566"><a href="#cb120-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-569"><a href="#cb120-569" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-570"><a href="#cb120-570" aria-hidden="true" tabindex="-1"></a>dadosRNT_masc <span class="ot">&lt;-</span> <span class="fu">filter</span> (dadosRNT, sexo <span class="sc">==</span> <span class="st">'masc'</span>)</span>
<span id="cb120-571"><a href="#cb120-571" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-572"><a href="#cb120-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-573"><a href="#cb120-573" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb120-574"><a href="#cb120-574" aria-hidden="true" tabindex="-1"></a><span class="fu">## Alerta</span></span>
<span id="cb120-575"><a href="#cb120-575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-576"><a href="#cb120-576" aria-hidden="true" tabindex="-1"></a>Não esquecer que o sinal de igualdade, no R, é representado por um == (duplo igual)</span>
<span id="cb120-577"><a href="#cb120-577" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb120-578"><a href="#cb120-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-579"><a href="#cb120-579" aria-hidden="true" tabindex="-1"></a><span class="fu">### Sumarizando uma coluna</span></span>
<span id="cb120-580"><a href="#cb120-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-581"><a href="#cb120-581" aria-hidden="true" tabindex="-1"></a>Para resumir uma coluna, utilizando uma métrica de interesse, como média, mediana, desvio padrão, etc. (@sec-resumo), pode-se usar a função <span class="in">`summarize()`</span>.</span>
<span id="cb120-582"><a href="#cb120-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-585"><a href="#cb120-585" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-586"><a href="#cb120-586" aria-hidden="true" tabindex="-1"></a>resumo <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">summarize</span>(dadosRNT,</span>
<span id="cb120-587"><a href="#cb120-587" aria-hidden="true" tabindex="-1"></a>  <span class="at">n =</span> <span class="fu">length</span> (id),</span>
<span id="cb120-588"><a href="#cb120-588" aria-hidden="true" tabindex="-1"></a>  <span class="at">media =</span> <span class="fu">mean</span>(pesoRN, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb120-589"><a href="#cb120-589" aria-hidden="true" tabindex="-1"></a>  <span class="at">desvpad =</span> <span class="fu">sd</span>(pesoRN, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-590"><a href="#cb120-590" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb120-591"><a href="#cb120-591" aria-hidden="true" tabindex="-1"></a>resumo</span>
<span id="cb120-592"><a href="#cb120-592" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-593"><a href="#cb120-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-594"><a href="#cb120-594" aria-hidden="true" tabindex="-1"></a>Muitas vezes, há necessidade de sumarizar uma coluna agrupada pelas categorias de uma segunda coluna. Por exemplo, peso dos recém-nascidos a termo por sexo. Para isso, além do <span class="in">`summarize()`</span>, utilizamos também a função <span class="in">`group_by()`</span>.\</span>
<span id="cb120-595"><a href="#cb120-595" aria-hidden="true" tabindex="-1"></a>Para facilitar o trabalho, será usado o operador pipe que pode ser acionado digitando <span class="in">`%&gt;%`</span> ou usando o atalho <span class="in">`ctrl + shift + M`</span><span class="ot">[^05-manipulandodados-7]</span>, como observado na @sec-printidyverse. Em vez de passar o argumento para a função separadamente, é possível escrever o valor ou objeto e, em seguida, usar o <span class="in">`pipe`</span> para convertê-lo como o argumento da função na mesma linha. Funciona como se o <span class="in">`pipe`</span> jogasse o objeto dentro da função seguinte.</span>
<span id="cb120-596"><a href="#cb120-596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-597"><a href="#cb120-597" aria-hidden="true" tabindex="-1"></a><span class="ot">[^05-manipulandodados-7]: </span>Para que o pipe (<span class="in">`%&gt;%`</span>) seja ativado é necessário carregar o pacote <span class="in">`dplyr`</span>; para o pipe nativo (<span class="in">`|&gt;`</span>) não há necessidade.</span>
<span id="cb120-598"><a href="#cb120-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-601"><a href="#cb120-601" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-602"><a href="#cb120-602" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb120-603"><a href="#cb120-603" aria-hidden="true" tabindex="-1"></a>resumo <span class="ot">&lt;-</span> dadosRNT <span class="sc">%&gt;%</span> </span>
<span id="cb120-604"><a href="#cb120-604" aria-hidden="true" tabindex="-1"></a>        <span class="fu">group_by</span>(sexo) <span class="sc">%&gt;%</span> </span>
<span id="cb120-605"><a href="#cb120-605" aria-hidden="true" tabindex="-1"></a>        <span class="fu">summarize</span>(</span>
<span id="cb120-606"><a href="#cb120-606" aria-hidden="true" tabindex="-1"></a>  <span class="at">n =</span> <span class="fu">length</span> (id),</span>
<span id="cb120-607"><a href="#cb120-607" aria-hidden="true" tabindex="-1"></a>  <span class="at">media =</span> <span class="fu">mean</span>(pesoRN, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb120-608"><a href="#cb120-608" aria-hidden="true" tabindex="-1"></a>  <span class="at">desvpad =</span> <span class="fu">sd</span>(pesoRN, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-609"><a href="#cb120-609" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb120-610"><a href="#cb120-610" aria-hidden="true" tabindex="-1"></a>resumo</span>
<span id="cb120-611"><a href="#cb120-611" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb120-612"><a href="#cb120-612" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-613"><a href="#cb120-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-614"><a href="#cb120-614" aria-hidden="true" tabindex="-1"></a><span class="fu">### Selecionando linhas específicas</span></span>
<span id="cb120-615"><a href="#cb120-615" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-616"><a href="#cb120-616" aria-hidden="true" tabindex="-1"></a>A função <span class="in">`slice()`</span> do pacote <span class="in">`dplyr`</span> é usada para selecionar linhas específicas de um dataframe (ou *tibble*) com base em suas posições. Ela é bastante útil quando se quer extrair subconjuntos de dados sem usar condições lógicas, mas sim índices de linha.</span>
<span id="cb120-617"><a href="#cb120-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-618"><a href="#cb120-618" aria-hidden="true" tabindex="-1"></a>Diferente de <span class="in">`filter()`</span>, que seleciona linhas baseado em condições, <span class="in">`slice()`</span> usa números de linhas. Por exemplo, para visualizar as cinco primeiras linhas do conjunto de dados <span class="in">`dadosRNT`</span>, usa-se:</span>
<span id="cb120-619"><a href="#cb120-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-622"><a href="#cb120-622" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-623"><a href="#cb120-623" aria-hidden="true" tabindex="-1"></a><span class="fu">slice</span>(dadosRNT, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb120-624"><a href="#cb120-624" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-625"><a href="#cb120-625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-626"><a href="#cb120-626" aria-hidden="true" tabindex="-1"></a>A função <span class="in">`slice()`</span> é compatível com agrupamentos, por exemplo, para selecionar os cinco primeiros casos do tibble <span class="in">`dadosRNT`</span> por <span class="in">`sexo`</span>:</span>
<span id="cb120-627"><a href="#cb120-627" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-630"><a href="#cb120-630" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-631"><a href="#cb120-631" aria-hidden="true" tabindex="-1"></a>dadosRNT <span class="sc">%&gt;%</span></span>
<span id="cb120-632"><a href="#cb120-632" aria-hidden="true" tabindex="-1"></a>        <span class="fu">group_by</span>(sexo) <span class="sc">%&gt;%</span> </span>
<span id="cb120-633"><a href="#cb120-633" aria-hidden="true" tabindex="-1"></a>        <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb120-634"><a href="#cb120-634" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-635"><a href="#cb120-635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-636"><a href="#cb120-636" aria-hidden="true" tabindex="-1"></a>O <span class="in">`tidyverse`</span> introduziu funções auxiliares como:</span>
<span id="cb120-637"><a href="#cb120-637" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-638"><a href="#cb120-638" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`slice_head()`</span>: que seleciona as primeiras <span class="in">`n`</span> linhas. A saída dessa função é a mesma anterior, se for solicitado n = 5:</span>
<span id="cb120-639"><a href="#cb120-639" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-642"><a href="#cb120-642" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-643"><a href="#cb120-643" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false </span></span>
<span id="cb120-644"><a href="#cb120-644" aria-hidden="true" tabindex="-1"></a><span class="fu">slice_head</span>(dadosRNT, <span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb120-645"><a href="#cb120-645" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-646"><a href="#cb120-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-647"><a href="#cb120-647" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`slice_tall()`</span>: que seleciona as últimas <span class="in">`n`</span> linhas.\</span>
<span id="cb120-648"><a href="#cb120-648" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`slice_sample()`</span>: seleciona linhas aleatórias. Uma amostra de n = 200 será extraída do <span class="in">`tibble`</span> <span class="in">`dadosRNT`</span>, como exemplo:</span>
<span id="cb120-649"><a href="#cb120-649" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-652"><a href="#cb120-652" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-653"><a href="#cb120-653" aria-hidden="true" tabindex="-1"></a>dadosRNT200 <span class="ot">&lt;-</span> dadosRNT <span class="sc">%&gt;%</span> <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">200</span>)</span>
<span id="cb120-654"><a href="#cb120-654" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-655"><a href="#cb120-655" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-656"><a href="#cb120-656" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`slice_min()`</span>: selecioan as linhas com os menores valores em uma coluna específica. Não ordena todo o dataframe, mas sim identifica e extrai as linhas que têm os menores valores na coluna indicada com <span class="in">`order_by`</span>. Por exemplo, se o objetivo é extrarir do tibble dadosRNT so cinco menores pesos ao nascer por sexo:</span>
<span id="cb120-657"><a href="#cb120-657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-660"><a href="#cb120-660" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-661"><a href="#cb120-661" aria-hidden="true" tabindex="-1"></a>dadosRNT <span class="sc">%&gt;%</span> </span>
<span id="cb120-662"><a href="#cb120-662" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(pesoRN, sexo) <span class="sc">%&gt;%</span> </span>
<span id="cb120-663"><a href="#cb120-663" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_min</span>(<span class="at">order_by =</span> pesoRN, </span>
<span id="cb120-664"><a href="#cb120-664" aria-hidden="true" tabindex="-1"></a>            <span class="at">n =</span> <span class="dv">5</span>, </span>
<span id="cb120-665"><a href="#cb120-665" aria-hidden="true" tabindex="-1"></a>            <span class="at">with_ties =</span> <span class="cn">TRUE</span>, </span>
<span id="cb120-666"><a href="#cb120-666" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> sexo)</span>
<span id="cb120-667"><a href="#cb120-667" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-668"><a href="#cb120-668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-669"><a href="#cb120-669" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`slice_max()`</span>: funcion a da mesma que o slice_min(), apenas para os maiores valores.</span>
<span id="cb120-670"><a href="#cb120-670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-671"><a href="#cb120-671" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb120-672"><a href="#cb120-672" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exercício</span></span>
<span id="cb120-673"><a href="#cb120-673" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-674"><a href="#cb120-674" aria-hidden="true" tabindex="-1"></a>Verificar a média e o desvio padrão dos pesos dos recém-nascidos a termo de mães fumantes e não fumantes, por sexo.</span>
<span id="cb120-675"><a href="#cb120-675" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb120-676"><a href="#cb120-676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-677"><a href="#cb120-677" aria-hidden="true" tabindex="-1"></a><span class="fu">### Ordenando uma coluna</span></span>
<span id="cb120-678"><a href="#cb120-678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-679"><a href="#cb120-679" aria-hidden="true" tabindex="-1"></a>Para ordenar os dados de uma coluna, pode-se usar a função <span class="in">`arrange()`</span> do <span class="in">`dplyr`</span>. O primeiro argumento é o conjunto de base. Os demais argumentos são as colunas a serem ordenadas.\</span>
<span id="cb120-680"><a href="#cb120-680" aria-hidden="true" tabindex="-1"></a>Por padrão, a função ´ coloca os dados em ordem crescente, mas é possível alterar e organizar em ordem decrescente usando a função <span class="in">`desc()`</span>, que recebe o nome da coluna como argumento e ordena os valores em ordem decrescente.</span>
<span id="cb120-681"><a href="#cb120-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-682"><a href="#cb120-682" aria-hidden="true" tabindex="-1"></a>Por exemplo, a renda familiar das parturientes será ordenada de forma ascendente. Em primeiro lugar, apenas como exercício, a renda familiar em salários mínimos será convertida em reais, tomando como base o valor de 2025 de 1518 reais. Após, a variável <span class="in">`renda`</span> será colocada em ordem crescente com a função <span class="in">`arrange()`</span>. A seguir, usando as funções <span class="in">`slice_head()`</span> e <span class="in">`slice_tail()`</span>, se verificará as 5 menores e as 5 maiores rendas que serão atribuídos a dois objetos (<span class="in">`menores`</span> e <span class="in">`maiores`</span>). Estes vão ser exibidos juntos, usando a função <span class="in">`bind_rows()`</span>, também do <span class="in">`dplyr`</span>:</span>
<span id="cb120-683"><a href="#cb120-683" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-686"><a href="#cb120-686" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-687"><a href="#cb120-687" aria-hidden="true" tabindex="-1"></a><span class="co"># Cinco menores salários em ordem crescente</span></span>
<span id="cb120-688"><a href="#cb120-688" aria-hidden="true" tabindex="-1"></a>menores <span class="ot">&lt;-</span> mater <span class="sc">%&gt;%</span> <span class="fu">select</span>(renda) <span class="sc">%&gt;%</span> </span>
<span id="cb120-689"><a href="#cb120-689" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">renda =</span> renda <span class="sc">*</span><span class="fl">1518.00</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb120-690"><a href="#cb120-690" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(renda) <span class="sc">%&gt;%</span> </span>
<span id="cb120-691"><a href="#cb120-691" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">5</span>)</span>
<span id="cb120-692"><a href="#cb120-692" aria-hidden="true" tabindex="-1"></a>maiores <span class="ot">&lt;-</span> mater <span class="sc">%&gt;%</span> <span class="fu">select</span>(renda) <span class="sc">%&gt;%</span> </span>
<span id="cb120-693"><a href="#cb120-693" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">renda =</span> renda <span class="sc">*</span><span class="fl">1518.00</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb120-694"><a href="#cb120-694" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(renda) <span class="sc">%&gt;%</span> </span>
<span id="cb120-695"><a href="#cb120-695" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice_tail</span>(<span class="at">n=</span><span class="dv">5</span>)</span>
<span id="cb120-696"><a href="#cb120-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-697"><a href="#cb120-697" aria-hidden="true" tabindex="-1"></a><span class="co"># Exibição</span></span>
<span id="cb120-698"><a href="#cb120-698" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_rows</span>(menores, maiores)</span>
<span id="cb120-699"><a href="#cb120-699" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-700"><a href="#cb120-700" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-701"><a href="#cb120-701" aria-hidden="true" tabindex="-1"></a><span class="fu">### Função `count()`</span></span>
<span id="cb120-702"><a href="#cb120-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-703"><a href="#cb120-703" aria-hidden="true" tabindex="-1"></a>Permite contar rapidamente os valores únicos de uma ou mais variáveis. Esta função tem os seguintes argumentos.</span>
<span id="cb120-704"><a href="#cb120-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-705"><a href="#cb120-705" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**x** $\to$ dataframe</span>
<span id="cb120-706"><a href="#cb120-706" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**wt** $\to$ pode ser NULL (padrão) ou uma variável</span>
<span id="cb120-707"><a href="#cb120-707" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**sort** $\to$ padrão = FALSE; se TRUE, mostrará os maiores grupos no topo</span>
<span id="cb120-708"><a href="#cb120-708" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**name** $\to$ O nome da nova coluna na saída; padrão = NULL</span>
<span id="cb120-709"><a href="#cb120-709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-710"><a href="#cb120-710" aria-hidden="true" tabindex="-1"></a>Quando o argumento <span class="in">`name`</span> é omitido, a função retorna *n* como nome padrão.</span>
<span id="cb120-711"><a href="#cb120-711" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-712"><a href="#cb120-712" aria-hidden="true" tabindex="-1"></a>Usando o dataframe <span class="in">`mater`</span>, a função <span class="in">`count()`</span> irá contar o número de parturientes fumantes, variável dicotômica <span class="in">`fumo`</span>:</span>
<span id="cb120-713"><a href="#cb120-713" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-716"><a href="#cb120-716" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-717"><a href="#cb120-717" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(mater, fumo)</span>
<span id="cb120-718"><a href="#cb120-718" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-719"><a href="#cb120-719" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-720"><a href="#cb120-720" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb120-721"><a href="#cb120-721" aria-hidden="true" tabindex="-1"></a><span class="fu">## Exercício</span></span>
<span id="cb120-722"><a href="#cb120-722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-723"><a href="#cb120-723" aria-hidden="true" tabindex="-1"></a>Calcule o percentual de partos cesáreos no tibble mater.</span>
<span id="cb120-724"><a href="#cb120-724" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb120-725"><a href="#cb120-725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-726"><a href="#cb120-726" aria-hidden="true" tabindex="-1"></a><span class="fu">## Pacote forcats()</span></span>
<span id="cb120-727"><a href="#cb120-727" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-728"><a href="#cb120-728" aria-hidden="true" tabindex="-1"></a>O pacote <span class="in">`forcats()`</span> é uma das maravilhas do <span class="in">`tidyverse`</span> voltada exclusivamente para o tratamento de variáveis categóricas no R — ou seja, os fatores. O nome vem de “*for categorical variables*”, e ele foi criado para resolver os desafios que surgem ao lidar com fatores, especialmente em visualizações e modelagens @damiani2022forcats.  </span>
<span id="cb120-729"><a href="#cb120-729" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb120-730"><a href="#cb120-730" aria-hidden="true" tabindex="-1"></a>A finalidade do pacote <span class="in">`forcats()`</span>:</span>
<span id="cb120-731"><a href="#cb120-731" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb120-732"><a href="#cb120-732" aria-hidden="true" tabindex="-1"></a>Oferece funções intuitivas e poderosas para:</span>
<span id="cb120-733"><a href="#cb120-733" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb120-734"><a href="#cb120-734" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Reordenar os níveis de um fator;  </span>
<span id="cb120-735"><a href="#cb120-735" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Modificar, combinar e recodificar níveis;  </span>
<span id="cb120-736"><a href="#cb120-736" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Lidar com níveis raros ou ausentes;  </span>
<span id="cb120-737"><a href="#cb120-737" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Preparar fatores para gráficos com ggplot2 (@sec-ggplot2)  </span>
<span id="cb120-738"><a href="#cb120-738" aria-hidden="true" tabindex="-1"></a>As principais funções doforcats() são:</span>
<span id="cb120-739"><a href="#cb120-739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-740"><a href="#cb120-740" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`fct_reorder()`</span> - Reordena os níveis com base em outra variável (ex: média);  </span>
<span id="cb120-741"><a href="#cb120-741" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`fct_infrequent()`</span> - Reordena os níveis pela frequência (mais comum primeiro);  </span>
<span id="cb120-742"><a href="#cb120-742" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`fct_rev()`</span>  -  Inverte a ordem dos níveis;   </span>
<span id="cb120-743"><a href="#cb120-743" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`fct_lump()`</span> - Agrupa níveis menos frequentes em "outros":  </span>
<span id="cb120-744"><a href="#cb120-744" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`fct_recode()`</span> - Renomeia níveis manualmente;  </span>
<span id="cb120-745"><a href="#cb120-745" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`fct_drop()`</span>  - Remove níveis não utilizados;  </span>
<span id="cb120-746"><a href="#cb120-746" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`fct_expand()`</span> - Adiciona novos níveis.</span>
<span id="cb120-747"><a href="#cb120-747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-748"><a href="#cb120-748" aria-hidden="true" tabindex="-1"></a>Como exemplo, será modificada a ordem de como a variável sexo será apresentada. Para ver a ordem dos níveis, pode-se usar:</span>
<span id="cb120-749"><a href="#cb120-749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-752"><a href="#cb120-752" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-753"><a href="#cb120-753" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(mater<span class="sc">$</span>sexo)</span>
<span id="cb120-754"><a href="#cb120-754" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-755"><a href="#cb120-755" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-756"><a href="#cb120-756" aria-hidden="true" tabindex="-1"></a>Ou seja, o sexo masculino está colocado antes do feminino. Como é uma variável dicotômica, basta inverter a ordem, usando a função <span class="in">`fct_rev()`</span>:</span>
<span id="cb120-757"><a href="#cb120-757" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-760"><a href="#cb120-760" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-761"><a href="#cb120-761" aria-hidden="true" tabindex="-1"></a>mater<span class="sc">$</span>sexo <span class="ot">&lt;-</span> <span class="fu">fct_rev</span>(mater<span class="sc">$</span>sexo)</span>
<span id="cb120-762"><a href="#cb120-762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-763"><a href="#cb120-763" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(mater<span class="sc">$</span>sexo)</span>
<span id="cb120-764"><a href="#cb120-764" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-765"><a href="#cb120-765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-766"><a href="#cb120-766" aria-hidden="true" tabindex="-1"></a><span class="fu">## Manipulação de datas</span></span>
<span id="cb120-767"><a href="#cb120-767" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-768"><a href="#cb120-768" aria-hidden="true" tabindex="-1"></a>Originalmente, todos os que trabalham com o R queixavam-se de como era frustrante trabalhar com datas. Era um processo que causava grande perda de tempo nas análises. O pacote <span class="in">`lubridate`</span> @grolemund2011dates foi criado para simplificar ao máximo a leitura de datas e extração de informações das mesmas.  </span>
<span id="cb120-769"><a href="#cb120-769" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-772"><a href="#cb120-772" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-773"><a href="#cb120-773" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb120-774"><a href="#cb120-774" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-775"><a href="#cb120-775" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-776"><a href="#cb120-776" aria-hidden="true" tabindex="-1"></a>Quando o <span class="in">`lubridate`</span> é carregado aparece uma mensagem, avisando que alguns nomes de funções também estão contidas no pacote base do R.    </span>
<span id="cb120-777"><a href="#cb120-777" aria-hidden="true" tabindex="-1"></a>Para evitar confusões e verificar que as funções corretas estão sendo usadas, usa-se o duplo dois pontos (<span class="in">`::`</span>) antes do nome da função, precedido do nome do pacote, por exemplo: <span class="in">`lubridate::date()`</span>.  </span>
<span id="cb120-778"><a href="#cb120-778" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-779"><a href="#cb120-779" aria-hidden="true" tabindex="-1"></a>Para obter a data atual ou a data-hora, você pode usar as funções <span class="in">`today()`</span> ou <span class="in">`now()`</span>: </span>
<span id="cb120-780"><a href="#cb120-780" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-783"><a href="#cb120-783" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-784"><a href="#cb120-784" aria-hidden="true" tabindex="-1"></a><span class="fu">today</span>()</span>
<span id="cb120-785"><a href="#cb120-785" aria-hidden="true" tabindex="-1"></a><span class="fu">now</span>()</span>
<span id="cb120-786"><a href="#cb120-786" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-787"><a href="#cb120-787" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-788"><a href="#cb120-788" aria-hidden="true" tabindex="-1"></a><span class="fu">### Convertendo *strings* ou caractere para data</span></span>
<span id="cb120-789"><a href="#cb120-789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-790"><a href="#cb120-790" aria-hidden="true" tabindex="-1"></a>Para converter *string* ou caracteres em datas, basta executar funções específicas adequadas aos dados. Elas determinam automaticamente o formato quando você especifica a ordem do componente. Para usá-los, identifique a ordem em que o ano, o mês e o dia aparecem em suas datas e, em seguida, organize "y", "m" e "d" na mesma ordem. Isso lhe dá o nome da função do <span class="in">`lubridate`</span> que analisará a data. Por exemplo, suponhamos a data de 25/12/2022:</span>
<span id="cb120-791"><a href="#cb120-791" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-794"><a href="#cb120-794" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-795"><a href="#cb120-795" aria-hidden="true" tabindex="-1"></a>natal <span class="ot">&lt;-</span> <span class="st">"25/12/2022"</span></span>
<span id="cb120-796"><a href="#cb120-796" aria-hidden="true" tabindex="-1"></a>natal</span>
<span id="cb120-797"><a href="#cb120-797" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-798"><a href="#cb120-798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-799"><a href="#cb120-799" aria-hidden="true" tabindex="-1"></a>Aparentemente, o *R* aceitou a informação como uma data. Entretanto, se for verificada a classe do objeto, tem-se:</span>
<span id="cb120-800"><a href="#cb120-800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-803"><a href="#cb120-803" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-804"><a href="#cb120-804" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(natal)</span>
<span id="cb120-805"><a href="#cb120-805" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-806"><a href="#cb120-806" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-807"><a href="#cb120-807" aria-hidden="true" tabindex="-1"></a>Estando como caractere, esta data não poderá ser usada em operações com datas, pois necessitaria estar como uma classe <span class="in">`date`</span>. Para converte-la em data, usa-se a função <span class="in">`dmy()`</span>:</span>
<span id="cb120-808"><a href="#cb120-808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-811"><a href="#cb120-811" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-812"><a href="#cb120-812" aria-hidden="true" tabindex="-1"></a>natal <span class="ot">&lt;-</span> <span class="fu">dmy</span>(natal)</span>
<span id="cb120-813"><a href="#cb120-813" aria-hidden="true" tabindex="-1"></a>natal</span>
<span id="cb120-814"><a href="#cb120-814" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(natal)</span>
<span id="cb120-815"><a href="#cb120-815" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-816"><a href="#cb120-816" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-817"><a href="#cb120-817" aria-hidden="true" tabindex="-1"></a>Dessa forma, a data, agora está sendo reconhecida pelo *R* como <span class="in">`date`</span>. É sempre importante verificar a classe da data.</span>
<span id="cb120-818"><a href="#cb120-818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-819"><a href="#cb120-819" aria-hidden="true" tabindex="-1"></a>Às vezes, as datas escritas estão com o mês abreviado, como 25/dez/2022. O procedimento é o mesmo</span>
<span id="cb120-820"><a href="#cb120-820" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-823"><a href="#cb120-823" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-824"><a href="#cb120-824" aria-hidden="true" tabindex="-1"></a>minha.data <span class="ot">&lt;-</span> <span class="st">"25/dez/2022"</span></span>
<span id="cb120-825"><a href="#cb120-825" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span> (minha.data)</span>
<span id="cb120-826"><a href="#cb120-826" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-827"><a href="#cb120-827" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-830"><a href="#cb120-830" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-831"><a href="#cb120-831" aria-hidden="true" tabindex="-1"></a>minha.data <span class="ot">&lt;-</span> <span class="fu">dmy</span>(minha.data)</span>
<span id="cb120-832"><a href="#cb120-832" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span> (minha.data)</span>
<span id="cb120-833"><a href="#cb120-833" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-834"><a href="#cb120-834" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-835"><a href="#cb120-835" aria-hidden="true" tabindex="-1"></a>Se além da data, houver necessidade de especificar o horário, basta usar <span class="in">`dmy_h()`</span>, <span class="in">`dmy_hm()`</span> e <span class="in">`dmy_hms()`</span>. No padrão americano, pode ser usado <span class="in">`ymd()`</span>.</span>
<span id="cb120-836"><a href="#cb120-836" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-837"><a href="#cb120-837" aria-hidden="true" tabindex="-1"></a>O <span class="in">`lubridate`</span> traz diversas funções para extrair os componentes de um objeto da classe date.</span>
<span id="cb120-838"><a href="#cb120-838" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-839"><a href="#cb120-839" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`second()`</span> $\to$ extrai os segundos.</span>
<span id="cb120-840"><a href="#cb120-840" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`minute()`</span> $\to$ extrai os minutos.</span>
<span id="cb120-841"><a href="#cb120-841" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`hour()`</span> $\to$ extrai a hora.</span>
<span id="cb120-842"><a href="#cb120-842" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`wday()`</span> $\to$ extrai o dia da semana.</span>
<span id="cb120-843"><a href="#cb120-843" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`mday()`</span> $\to$ extrai o dia do mês.</span>
<span id="cb120-844"><a href="#cb120-844" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`month()`</span> $\to$ extrai o mês.</span>
<span id="cb120-845"><a href="#cb120-845" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`year()`</span> $\to$ extrai o ano.</span>
<span id="cb120-846"><a href="#cb120-846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-847"><a href="#cb120-847" aria-hidden="true" tabindex="-1"></a>Por exemplo, usando a data de nascimento (<span class="in">`dn`</span>) de um dos netos do autor:</span>
<span id="cb120-848"><a href="#cb120-848" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-851"><a href="#cb120-851" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-852"><a href="#cb120-852" aria-hidden="true" tabindex="-1"></a>dn <span class="ot">&lt;-</span> <span class="fu">dmy</span>(<span class="st">"06/06/2018"</span>)</span>
<span id="cb120-853"><a href="#cb120-853" aria-hidden="true" tabindex="-1"></a><span class="fu">year</span>(dn)</span>
<span id="cb120-854"><a href="#cb120-854" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-855"><a href="#cb120-855" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-856"><a href="#cb120-856" aria-hidden="true" tabindex="-1"></a>Para acrescentar um horário ao objeto data de nascimento (<span class="in">`dn`</span>)\^<span class="sc">\[</span>UTC = Coordinated Universal Time}:</span>
<span id="cb120-857"><a href="#cb120-857" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-860"><a href="#cb120-860" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-861"><a href="#cb120-861" aria-hidden="true" tabindex="-1"></a><span class="fu">hour</span>(dn) <span class="ot">&lt;-</span> <span class="dv">18</span></span>
<span id="cb120-862"><a href="#cb120-862" aria-hidden="true" tabindex="-1"></a>dn</span>
<span id="cb120-863"><a href="#cb120-863" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-864"><a href="#cb120-864" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-865"><a href="#cb120-865" aria-hidden="true" tabindex="-1"></a><span class="fu">### Juntando componentes de datas</span></span>
<span id="cb120-866"><a href="#cb120-866" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-867"><a href="#cb120-867" aria-hidden="true" tabindex="-1"></a>Para juntar componentes de datas e horas, pode-se utilizar as funções <span class="in">`make_date()`</span> e <span class="in">`make_datetime()`</span>. Em muitos arquivos, os componentes da data estão em colunas diferentes e há necessidade de juntá-los em uma única coluna para compor a data:</span>
<span id="cb120-868"><a href="#cb120-868" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-871"><a href="#cb120-871" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-872"><a href="#cb120-872" aria-hidden="true" tabindex="-1"></a>felix <span class="ot">&lt;-</span> <span class="fu">make_date</span>(<span class="at">year =</span> <span class="dv">2018</span>, <span class="at">month =</span> <span class="dv">06</span>, <span class="at">day =</span> <span class="dv">06</span>)</span>
<span id="cb120-873"><a href="#cb120-873" aria-hidden="true" tabindex="-1"></a>felix</span>
<span id="cb120-874"><a href="#cb120-874" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-875"><a href="#cb120-875" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-876"><a href="#cb120-876" aria-hidden="true" tabindex="-1"></a>Para juntar ano, mês, dia, hora e minuto:</span>
<span id="cb120-877"><a href="#cb120-877" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-880"><a href="#cb120-880" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-881"><a href="#cb120-881" aria-hidden="true" tabindex="-1"></a>minha.data <span class="ot">&lt;-</span> <span class="fu">make_datetime</span>(<span class="at">year =</span> <span class="dv">2018</span>, </span>
<span id="cb120-882"><a href="#cb120-882" aria-hidden="true" tabindex="-1"></a>                            <span class="at">month =</span> <span class="dv">06</span>, </span>
<span id="cb120-883"><a href="#cb120-883" aria-hidden="true" tabindex="-1"></a>                            <span class="at">day =</span> <span class="dv">06</span>, </span>
<span id="cb120-884"><a href="#cb120-884" aria-hidden="true" tabindex="-1"></a>                            <span class="at">hour =</span> <span class="dv">18</span> ,</span>
<span id="cb120-885"><a href="#cb120-885" aria-hidden="true" tabindex="-1"></a>                            <span class="at">min =</span> <span class="dv">00</span>, </span>
<span id="cb120-886"><a href="#cb120-886" aria-hidden="true" tabindex="-1"></a>                            <span class="at">sec =</span> <span class="dv">15</span>)</span>
<span id="cb120-887"><a href="#cb120-887" aria-hidden="true" tabindex="-1"></a>minha.data</span>
<span id="cb120-888"><a href="#cb120-888" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-889"><a href="#cb120-889" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-890"><a href="#cb120-890" aria-hidden="true" tabindex="-1"></a><span class="fu">### Extraindo componentes de datas</span></span>
<span id="cb120-891"><a href="#cb120-891" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-892"><a href="#cb120-892" aria-hidden="true" tabindex="-1"></a>Quando temos objetos do tipo POSIXt<span class="ot">[^05-manipulandodados-9]</span> podemos extrair componentes ou elementos deles. Para isso são usadas algumas funções específicas do pacote <span class="in">`lubridate`</span> como mostrado a seguir.</span>
<span id="cb120-893"><a href="#cb120-893" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-894"><a href="#cb120-894" aria-hidden="true" tabindex="-1"></a><span class="ot">[^05-manipulandodados-9]: </span>POSIXt é uma classe de objetos do R que representa datas e horas. POSIXt significa Portable Operating System Interface for Unix Time, que é um padrão para medir o tempo em segundos desde 1 de janeiro de 1970. Existem duas formas internas de implementar POSIXt: POSIXct e POSIXlt. POSIXct armazena os segundos desde a época UNIX e POSIXlt armazena uma lista de dia, mês, ano, hora, minuto, segundo, etc.</span>
<span id="cb120-895"><a href="#cb120-895" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-898"><a href="#cb120-898" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-899"><a href="#cb120-899" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">now</span>()</span>
<span id="cb120-900"><a href="#cb120-900" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-901"><a href="#cb120-901" aria-hidden="true" tabindex="-1"></a><span class="fu">year</span>(data)            <span class="co"># Extrai o ano</span></span>
<span id="cb120-902"><a href="#cb120-902" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb120-903"><a href="#cb120-903" aria-hidden="true" tabindex="-1"></a><span class="fu">month</span>(data)           <span class="co"># Extrai o mês</span></span>
<span id="cb120-904"><a href="#cb120-904" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-905"><a href="#cb120-905" aria-hidden="true" tabindex="-1"></a><span class="fu">week</span>(data)            <span class="co"># Extrai a semana</span></span>
<span id="cb120-906"><a href="#cb120-906" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-907"><a href="#cb120-907" aria-hidden="true" tabindex="-1"></a><span class="fu">day</span>(data)             <span class="co"># Extrai o dia</span></span>
<span id="cb120-908"><a href="#cb120-908" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-909"><a href="#cb120-909" aria-hidden="true" tabindex="-1"></a><span class="fu">minute</span>(data)          <span class="co"># Extrai o minuto</span></span>
<span id="cb120-910"><a href="#cb120-910" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-911"><a href="#cb120-911" aria-hidden="true" tabindex="-1"></a><span class="fu">second</span>(data)          <span class="co"># Extrai o segundo</span></span>
<span id="cb120-912"><a href="#cb120-912" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-913"><a href="#cb120-913" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-914"><a href="#cb120-914" aria-hidden="true" tabindex="-1"></a>Para verificar o número de dias tem em um determinado mês, usa-se a função <span class="in">`days_in_month()`</span>:</span>
<span id="cb120-915"><a href="#cb120-915" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-918"><a href="#cb120-918" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-919"><a href="#cb120-919" aria-hidden="true" tabindex="-1"></a> data1 <span class="ot">&lt;-</span> <span class="fu">dmy</span>(<span class="st">"25/02/2000"</span>)</span>
<span id="cb120-920"><a href="#cb120-920" aria-hidden="true" tabindex="-1"></a> <span class="fu">days_in_month</span>(data1)          </span>
<span id="cb120-921"><a href="#cb120-921" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-922"><a href="#cb120-922" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-923"><a href="#cb120-923" aria-hidden="true" tabindex="-1"></a><span class="fu">### Operações com datas</span></span>
<span id="cb120-924"><a href="#cb120-924" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-925"><a href="#cb120-925" aria-hidden="true" tabindex="-1"></a>O pacote <span class="in">`lubridate`</span> possui funções de duração e de período para manipular as datas. As funções de duração calculam o número de segundos em um determinado num determinado número de dias. As funções de duração não levam em consideração anos bissextos e horário de verão, enquanto as funções de período consideram esses fatores.</span>
<span id="cb120-926"><a href="#cb120-926" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-929"><a href="#cb120-929" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-930"><a href="#cb120-930" aria-hidden="true" tabindex="-1"></a><span class="fu">ddays</span> (<span class="dv">1</span>)           <span class="co"># Número de segundos em 1 dia</span></span>
<span id="cb120-931"><a href="#cb120-931" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-932"><a href="#cb120-932" aria-hidden="true" tabindex="-1"></a><span class="fu">dhours</span> (<span class="dv">1</span>)          <span class="co"># Número de segundos em 1 hora</span></span>
<span id="cb120-933"><a href="#cb120-933" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-934"><a href="#cb120-934" aria-hidden="true" tabindex="-1"></a><span class="fu">dminutes</span> (<span class="dv">1</span>)        <span class="co"># Número de segundos em 1 minuto</span></span>
<span id="cb120-935"><a href="#cb120-935" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-936"><a href="#cb120-936" aria-hidden="true" tabindex="-1"></a><span class="fu">days</span> (<span class="dv">5</span>)            <span class="co"># Cria um período de 5 dias</span></span>
<span id="cb120-937"><a href="#cb120-937" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-938"><a href="#cb120-938" aria-hidden="true" tabindex="-1"></a><span class="fu">weeks</span> (<span class="dv">5</span>)           <span class="co"># Cria um período de 5 semanas</span></span>
<span id="cb120-939"><a href="#cb120-939" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-940"><a href="#cb120-940" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-941"><a href="#cb120-941" aria-hidden="true" tabindex="-1"></a>Suponha-se que haja necessidade de saber em qual dia cairá após acrescentarmos 5 semanas à <span class="in">`data1`</span> (25/02/2000), criada acima:</span>
<span id="cb120-942"><a href="#cb120-942" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-945"><a href="#cb120-945" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-946"><a href="#cb120-946" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">+</span> <span class="fu">weeks</span> (<span class="dv">5</span>)           </span>
<span id="cb120-947"><a href="#cb120-947" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-948"><a href="#cb120-948" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-949"><a href="#cb120-949" aria-hidden="true" tabindex="-1"></a>Adicionando 1 ano à <span class="in">`data1`</span> (25/02/2000) com uma função de duração, tem-se:</span>
<span id="cb120-950"><a href="#cb120-950" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-953"><a href="#cb120-953" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-954"><a href="#cb120-954" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">+</span> <span class="fu">dyears</span> (<span class="dv">1</span>)           </span>
<span id="cb120-955"><a href="#cb120-955" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-956"><a href="#cb120-956" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-957"><a href="#cb120-957" aria-hidden="true" tabindex="-1"></a>Se for adicionado um ano à mesma data, mas agora com uma função de período, tem-se:</span>
<span id="cb120-958"><a href="#cb120-958" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-961"><a href="#cb120-961" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-962"><a href="#cb120-962" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">+</span> <span class="fu">years</span> (<span class="dv">1</span>)           </span>
<span id="cb120-963"><a href="#cb120-963" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-964"><a href="#cb120-964" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-965"><a href="#cb120-965" aria-hidden="true" tabindex="-1"></a>Um intervalo de tempo pode ser obtido a partir de uma data inicial e uma data final. Suponha que uma gestante tenha como data da sua última menstruação 04/10/2022 e o bebê tenha nascido em 30/06/2023. Qual a idade gestacional em dias? A sintaxe para calcular um intervalo é dada pela subtração das duas datas:</span>
<span id="cb120-966"><a href="#cb120-966" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-969"><a href="#cb120-969" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-970"><a href="#cb120-970" aria-hidden="true" tabindex="-1"></a>data.inicial <span class="ot">&lt;-</span> <span class="fu">dmy</span>(<span class="st">"04/10/2022"</span>)</span>
<span id="cb120-971"><a href="#cb120-971" aria-hidden="true" tabindex="-1"></a>data.final <span class="ot">&lt;-</span> <span class="fu">dmy</span>(<span class="st">"30/06/2023"</span>)</span>
<span id="cb120-972"><a href="#cb120-972" aria-hidden="true" tabindex="-1"></a>idade_gesta <span class="ot">&lt;-</span> data.final <span class="sc">-</span> data.inicial</span>
<span id="cb120-973"><a href="#cb120-973" aria-hidden="true" tabindex="-1"></a>idade_gesta</span>
<span id="cb120-974"><a href="#cb120-974" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-975"><a href="#cb120-975" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-976"><a href="#cb120-976" aria-hidden="true" tabindex="-1"></a>Ou seja a gestação durou 269 dias, constituindo-se em um parto a termo, entre 37 (259 dias) e 42 semanas (294 dias).</span>
<span id="cb120-977"><a href="#cb120-977" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-978"><a href="#cb120-978" aria-hidden="true" tabindex="-1"></a>Para mais informações sobre o <span class="in">`lubridate`</span>, consulte a ajuda do pacote ou o capítulo 16 do livro *R for Data Science*, Hadley Wickman e Garrett Grolemund, 2017 <span class="sc">\[</span>https://r4ds.had.co.nz/index.html<span class="sc">\]</span> .</span>
</code><button title="Copiar para a área de transferência" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>